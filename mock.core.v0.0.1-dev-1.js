var t=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),n=()=>Math.random().toString(36).substring(7).split("").join("."),e={INIT:`@@redux/INIT${n()}`,REPLACE:`@@redux/REPLACE${n()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${n()}`};function r(t){if(void 0===t)return"undefined";if(null===t)return"null";const n=typeof t;switch(n){case"boolean":case"string":case"number":case"symbol":case"function":return n}if(Array.isArray(t))return"array";if(function(t){return t instanceof Date||"function"==typeof t.toDateString&&"function"==typeof t.getDate&&"function"==typeof t.setDate}(t))return"date";if(function(t){return t instanceof Error||"string"==typeof t.message&&t.constructor&&"number"==typeof t.constructor.stackTraceLimit}(t))return"error";const e=function(t){return"function"==typeof t.constructor?t.constructor.name:null}(t);switch(e){case"Symbol":case"Promise":case"WeakMap":case"WeakSet":case"Map":case"Set":return e}return Object.prototype.toString.call(t).slice(8,-1).toLowerCase().replace(/\s/g,"")}function i(t){let n=typeof t;return n=r(t),n}function o(n,r,s){if("function"!=typeof n)throw new Error(`Expected the root reducer to be a function. Instead, received: '${i(n)}'`);if("function"==typeof r&&"function"==typeof s||"function"==typeof s&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.");if("function"==typeof r&&void 0===s&&(s=r,r=void 0),void 0!==s){if("function"!=typeof s)throw new Error(`Expected the enhancer to be a function. Instead, received: '${i(s)}'`);return s(o)(n,r)}let c=n,u=r,a=new Map,f=a,h=0,l=!1;function d(){f===a&&(f=new Map,a.forEach(((t,n)=>{f.set(n,t)})))}function v(){if(l)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return u}function p(t){if("function"!=typeof t)throw new Error(`Expected the listener to be a function. Instead, received: '${i(t)}'`);if(l)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api/store#subscribelistener for more details.");let n=!0;d();const e=h++;return f.set(e,t),function(){if(n){if(l)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api/store#subscribelistener for more details.");n=!1,d(),f.delete(e),a=null}}}function b(t){if(!function(t){if("object"!=typeof t||null===t)return!1;let n=t;for(;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(t)===n||null===Object.getPrototypeOf(t)}(t))throw new Error(`Actions must be plain objects. Instead, the actual type was: '${i(t)}'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.`);if(void 0===t.type)throw new Error('Actions may not have an undefined "type" property. You may have misspelled an action type string constant.');if("string"!=typeof t.type)throw new Error(`Action "type" property must be a string. Instead, the actual type was: '${i(t.type)}'. Value was: '${t.type}' (stringified)`);if(l)throw new Error("Reducers may not dispatch actions.");try{l=!0,u=c(u,t)}finally{l=!1}return(a=f).forEach((t=>{t()})),t}b({type:e.INIT});return{dispatch:b,subscribe:p,getState:v,replaceReducer:function(t){if("function"!=typeof t)throw new Error(`Expected the nextReducer to be a function. Instead, received: '${i(t)}`);c=t,b({type:e.REPLACE})},[t]:function(){const n=p;return{subscribe(t){if("object"!=typeof t||null===t)throw new Error(`Expected the observer to be an object. Instead, received: '${i(t)}'`);function e(){const n=t;n.next&&n.next(v())}e();return{unsubscribe:n(e)}},[t](){return this}}}}}function s(...t){return 0===t.length?t=>t:1===t.length?t[0]:t.reduce(((t,n)=>(...e)=>t(n(...e))))}var c=Symbol.for("immer-nothing"),u=Symbol.for("immer-draftable"),a=Symbol.for("immer-state"),f=[function(t){return`The plugin for '${t}' has not been loaded into Immer. To enable the plugin, import and call \`enable${t}()\` when initializing your application.`},function(t){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${t}'`},"This object has been frozen and should not be mutated",function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(t){return`'current' expects a draft, got: ${t}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(t){return`'original' expects a draft, got: ${t}`}];function h(t,...n){{const e=f[t],r="function"==typeof e?e.apply(null,n):e;throw new Error(`[Immer] ${r}`)}}var l=Object.getPrototypeOf;function d(t){return!!t&&!!t[a]}function v(t){return!!t&&(b(t)||Array.isArray(t)||!!t[u]||!!t.constructor?.[u]||j(t)||O(t))}var p=Object.prototype.constructor.toString();function b(t){if(!t||"object"!=typeof t)return!1;const n=l(t);if(null===n)return!0;const e=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return e===Object||"function"==typeof e&&Function.toString.call(e)===p}function y(t,n){0===w(t)?Reflect.ownKeys(t).forEach((e=>{n(e,t[e],t)})):t.forEach(((e,r)=>n(r,e,t)))}function w(t){const n=t[a];return n?n.type_:Array.isArray(t)?1:j(t)?2:O(t)?3:0}function m(t,n){return 2===w(t)?t.has(n):Object.prototype.hasOwnProperty.call(t,n)}function g(t,n,e){const r=w(t);2===r?t.set(n,e):3===r?t.add(e):t[n]=e}function j(t){return t instanceof Map}function O(t){return t instanceof Set}function S(t){return t.copy_||t.base_}function x(t,n){if(j(t))return new Map(t);if(O(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const e=b(t);if(!0===n||"class_only"===n&&!e){const n=Object.getOwnPropertyDescriptors(t);delete n[a];let e=Reflect.ownKeys(n);for(let r=0;r<e.length;r++){const i=e[r],o=n[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[i]})}return Object.create(l(t),n)}{const n=l(t);if(null!==n&&e)return{...t};const r=Object.create(n);return Object.assign(r,t)}}function _(t,n=!1){return $(t)||d(t)||!v(t)||(w(t)>1&&(t.set=t.add=t.clear=t.delete=A),Object.freeze(t),n&&Object.entries(t).forEach((([t,n])=>_(n,!0)))),t}function A(){h(2)}function $(t){return Object.isFrozen(t)}var k,E={};function P(t){const n=E[t];return n||h(0,t),n}function M(){return k}function T(t,n){n&&(P("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=n)}function I(t){R(t),t.drafts_.forEach(F),t.drafts_=null}function R(t){t===k&&(k=t.parent_)}function C(t){return k={drafts_:[],parent_:k,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function F(t){const n=t[a];0===n.type_||1===n.type_?n.revoke_():n.revoked_=!0}function N(t,n){n.unfinalizedDrafts_=n.drafts_.length;const e=n.drafts_[0];return void 0!==t&&t!==e?(e[a].modified_&&(I(n),h(4)),v(t)&&(t=L(n,t),n.parent_||U(n,t)),n.patches_&&P("Patches").generateReplacementPatches_(e[a].base_,t,n.patches_,n.inversePatches_)):t=L(n,e,[]),I(n),n.patches_&&n.patchListener_(n.patches_,n.inversePatches_),t!==c?t:void 0}function L(t,n,e){if($(n))return n;const r=n[a];if(!r)return y(n,((i,o)=>B(t,r,n,i,o,e))),n;if(r.scope_!==t)return n;if(!r.modified_)return U(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const n=r.copy_;let i=n,o=!1;3===r.type_&&(i=new Set(n),n.clear(),o=!0),y(i,((i,s)=>B(t,r,n,i,s,e,o))),U(t,n,!1),e&&t.patches_&&P("Patches").generatePatches_(r,e,t.patches_,t.inversePatches_)}return r.copy_}function B(t,n,e,r,i,o,s){if(i===e&&h(5),d(i)){const s=L(t,i,o&&n&&3!==n.type_&&!m(n.assigned_,r)?o.concat(r):void 0);if(g(e,r,s),!d(s))return;t.canAutoFreeze_=!1}else s&&e.add(i);if(v(i)&&!$(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;L(t,i),n&&n.scope_.parent_||"symbol"==typeof r||!Object.prototype.propertyIsEnumerable.call(e,r)||U(t,i)}}function U(t,n,e=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&_(n,e)}var D={get(t,n){if(n===a)return t;const e=S(t);if(!m(e,n))return function(t,n,e){const r=W(n,e);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}(t,e,n);const r=e[n];return t.finalized_||!v(r)?r:r===V(t.base_,n)?(z(t),t.copy_[n]=Y(r,t)):r},has:(t,n)=>n in S(t),ownKeys:t=>Reflect.ownKeys(S(t)),set(t,n,e){const r=W(S(t),n);if(r?.set)return r.set.call(t.draft_,e),!0;if(!t.modified_){const r=V(S(t),n),s=r?.[a];if(s&&s.base_===e)return t.copy_[n]=e,t.assigned_[n]=!1,!0;if(((i=e)===(o=r)?0!==i||1/i==1/o:i!=i&&o!=o)&&(void 0!==e||m(t.base_,n)))return!0;z(t),q(t)}var i,o;return t.copy_[n]===e&&(void 0!==e||n in t.copy_)||Number.isNaN(e)&&Number.isNaN(t.copy_[n])||(t.copy_[n]=e,t.assigned_[n]=!0),!0},deleteProperty:(t,n)=>(void 0!==V(t.base_,n)||n in t.base_?(t.assigned_[n]=!1,z(t),q(t)):delete t.assigned_[n],t.copy_&&delete t.copy_[n],!0),getOwnPropertyDescriptor(t,n){const e=S(t),r=Reflect.getOwnPropertyDescriptor(e,n);return r?{writable:!0,configurable:1!==t.type_||"length"!==n,enumerable:r.enumerable,value:e[n]}:r},defineProperty(){h(11)},getPrototypeOf:t=>l(t.base_),setPrototypeOf(){h(12)}},H={};function V(t,n){const e=t[a];return(e?S(e):t)[n]}function W(t,n){if(!(n in t))return;let e=l(t);for(;e;){const t=Object.getOwnPropertyDescriptor(e,n);if(t)return t;e=l(e)}}function q(t){t.modified_||(t.modified_=!0,t.parent_&&q(t.parent_))}function z(t){t.copy_||(t.copy_=x(t.base_,t.scope_.immer_.useStrictShallowCopy_))}y(D,((t,n)=>{H[t]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}})),H.deleteProperty=function(t,n){return isNaN(parseInt(n))&&h(13),H.set.call(this,t,n,void 0)},H.set=function(t,n,e){return"length"!==n&&isNaN(parseInt(n))&&h(14),D.set.call(this,t[0],n,e,t[0])};function Y(t,n){const e=j(t)?P("MapSet").proxyMap_(t,n):O(t)?P("MapSet").proxySet_(t,n):function(t,n){const e=Array.isArray(t),r={type_:e?1:0,scope_:n?n.scope_:M(),modified_:!1,finalized_:!1,assigned_:{},parent_:n,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=D;e&&(i=[r],o=H);const{revoke:s,proxy:c}=Proxy.revocable(i,o);return r.draft_=c,r.revoke_=s,c}(t,n);return(n?n.scope_:M()).drafts_.push(e),e}function G(t){if(!v(t)||$(t))return t;const n=t[a];let e;if(n){if(!n.modified_)return n.base_;n.finalized_=!0,e=x(t,n.scope_.immer_.useStrictShallowCopy_)}else e=x(t,!0);return y(e,((t,n)=>{g(e,t,G(n))})),n&&(n.finalized_=!1),e}var K=new class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,e)=>{if("function"==typeof t&&"function"!=typeof n){const e=n;n=t;const r=this;return function(t=e,...i){return r.produce(t,(t=>n.call(this,t,...i)))}}let r;if("function"!=typeof n&&h(6),void 0!==e&&"function"!=typeof e&&h(7),v(t)){const i=C(this),o=Y(t,void 0);let s=!0;try{r=n(o),s=!1}finally{s?I(i):R(i)}return T(i,e),N(r,i)}if(!t||"object"!=typeof t){if(r=n(t),void 0===r&&(r=t),r===c&&(r=void 0),this.autoFreeze_&&_(r,!0),e){const n=[],i=[];P("Patches").generateReplacementPatches_(t,r,n,i),e(n,i)}return r}h(1,t)},this.produceWithPatches=(t,n)=>{if("function"==typeof t)return(n,...e)=>this.produceWithPatches(n,(n=>t(n,...e)));let e,r;return[this.produce(t,n,((t,n)=>{e=t,r=n})),e,r]},"boolean"==typeof t?.autoFreeze&&this.setAutoFreeze(t.autoFreeze),"boolean"==typeof t?.useStrictShallowCopy&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){v(t)||h(8),d(t)&&(t=function(t){d(t)||h(10,t);return G(t)}(t));const n=C(this),e=Y(t,void 0);return e[a].isManual_=!0,R(n),e}finishDraft(t,n){const e=t&&t[a];e&&e.isManual_||h(9);const{scope_:r}=e;return T(r,n),N(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,n){let e;for(e=n.length-1;e>=0;e--){const r=n[e];if(0===r.path.length&&"replace"===r.op){t=r.value;break}}e>-1&&(n=n.slice(e+1));const r=P("Patches").applyPatches_;return d(t)?r(t,n):this.produce(t,(t=>r(t,n)))}},J=K.produce;K.produceWithPatches.bind(K),K.setAutoFreeze.bind(K),K.setUseStrictShallowCopy.bind(K),K.applyPatches.bind(K),K.createDraft.bind(K),K.finishDraft.bind(K);var Q="object"==typeof global&&global&&global.Object===Object&&global,X="object"==typeof self&&self&&self.Object===Object&&self,Z=Q||X||Function("return this")(),tt=Z.Symbol,nt=Object.prototype,et=nt.hasOwnProperty,rt=nt.toString,it=tt?tt.toStringTag:void 0;var ot=Object.prototype.toString;var st="[object Null]",ct="[object Undefined]",ut=tt?tt.toStringTag:void 0;function at(t){return null==t?void 0===t?ct:st:ut&&ut in Object(t)?function(t){var n=et.call(t,it),e=t[it];try{t[it]=void 0;var r=!0}catch(t){}var i=rt.call(t);return r&&(n?t[it]=e:delete t[it]),i}(t):function(t){return ot.call(t)}(t)}function ft(t){return null!=t&&"object"==typeof t}var ht="[object Symbol]";function lt(t){return"symbol"==typeof t||ft(t)&&at(t)==ht}var dt=Array.isArray,vt=1/0,pt=tt?tt.prototype:void 0,bt=pt?pt.toString:void 0;function yt(t){if("string"==typeof t)return t;if(dt(t))return function(t,n){for(var e=-1,r=null==t?0:t.length,i=Array(r);++e<r;)i[e]=n(t[e],e,t);return i}(t,yt)+"";if(lt(t))return bt?bt.call(t):"";var n=t+"";return"0"==n&&1/t==-vt?"-0":n}function wt(t){var n=typeof t;return null!=t&&("object"==n||"function"==n)}function mt(t){return t}var gt="[object AsyncFunction]",jt="[object Function]",Ot="[object GeneratorFunction]",St="[object Proxy]";function xt(t){if(!wt(t))return!1;var n=at(t);return n==jt||n==Ot||n==gt||n==St}var _t,At=Z["t"],$t=(_t=/[^.]+$/.exec(At&&At.keys&&At.keys.IE_PROTO||""))?"Symbol(src)_1."+_t:"";var kt=Function.prototype.toString;function Et(t){if(null!=t){try{return kt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var Pt=/^\[object .+?Constructor\]$/,Mt=Function.prototype,Tt=Object.prototype,It=Mt.toString,Rt=Tt.hasOwnProperty,Ct=RegExp("^"+It.call(Rt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ft(t){return!(!wt(t)||(n=t,$t&&$t in n))&&(xt(t)?Ct:Pt).test(Et(t));var n}function Nt(t,n){var e=function(t,n){return null==t?void 0:t[n]}(t,n);return Ft(e)?e:void 0}var Lt=Nt(Z,"WeakMap"),Bt=Object.create,Ut=function(){function t(){}return function(n){if(!wt(n))return{};if(Bt)return Bt(n);t.prototype=n;var e=new t;return t.prototype=void 0,e}}();function Dt(t,n){var e=-1,r=t.length;for(n||(n=Array(r));++e<r;)n[e]=t[e];return n}var Ht=Date.now;var Vt,Wt,qt,zt=function(){try{var t=Nt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Yt=zt,Gt=Yt?function(t,n){return Yt(t,"toString",{configurable:!0,enumerable:!1,value:(e=n,function(){return e}),writable:!0});var e}:mt,Kt=(Vt=Gt,Wt=0,qt=0,function(){var t=Ht(),n=16-(t-qt);if(qt=t,n>0){if(++Wt>=800)return arguments[0]}else Wt=0;return Vt.apply(void 0,arguments)});var Jt=9007199254740991,Qt=/^(?:0|[1-9]\d*)$/;function Xt(t,n){var e=typeof t;return!!(n=n??Jt)&&("number"==e||"symbol"!=e&&Qt.test(t))&&t>-1&&t%1==0&&t<n}function Zt(t,n,e){"__proto__"==n&&Yt?Yt(t,n,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[n]=e}function tn(t,n){return t===n||t!=t&&n!=n}var nn=Object.prototype.hasOwnProperty;function en(t,n,e){var r=t[n];nn.call(t,n)&&tn(r,e)&&(void 0!==e||n in t)||Zt(t,n,e)}function rn(t,n,e,r){var i=!e;e||(e={});for(var o=-1,s=n.length;++o<s;){var c=n[o],u=r?r(e[c],t[c],c,e,t):void 0;void 0===u&&(u=t[c]),i?Zt(e,c,u):en(e,c,u)}return e}var on=Math.max;function sn(t,n){return Kt(function(t,n,e){return n=on(void 0===n?t.length-1:n,0),function(){for(var r=arguments,i=-1,o=on(r.length-n,0),s=Array(o);++i<o;)s[i]=r[n+i];i=-1;for(var c=Array(n+1);++i<n;)c[i]=r[i];return c[n]=e(s),function(t,n,e){switch(e.length){case 0:return t.call(n);case 1:return t.call(n,e[0]);case 2:return t.call(n,e[0],e[1]);case 3:return t.call(n,e[0],e[1],e[2])}return t.apply(n,e)}(t,this,c)}}(t,n,mt),t+"")}var cn=9007199254740991;function un(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=cn}function an(t){return null!=t&&un(t.length)&&!xt(t)}var fn=Object.prototype;function hn(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||fn)}function ln(t){return ft(t)&&"[object Arguments]"==at(t)}var dn=Object.prototype,vn=dn.hasOwnProperty,pn=dn.propertyIsEnumerable,bn=ln(function(){return arguments}())?ln:function(t){return ft(t)&&vn.call(t,"callee")&&!pn.call(t,"callee")};var yn="object"==typeof exports&&exports&&!exports.nodeType&&exports,wn=yn&&"object"==typeof module&&module&&!module.nodeType&&module,mn=wn&&wn.exports===yn?Z.Buffer:void 0,gn=(mn?mn.isBuffer:void 0)||function(){return!1},jn={};function On(t){return function(n){return t(n)}}jn["[object Float32Array]"]=jn["[object Float64Array]"]=jn["[object Int8Array]"]=jn["[object Int16Array]"]=jn["[object Int32Array]"]=jn["[object Uint8Array]"]=jn["[object Uint8ClampedArray]"]=jn["[object Uint16Array]"]=jn["[object Uint32Array]"]=!0,jn["[object Arguments]"]=jn["[object Array]"]=jn["[object ArrayBuffer]"]=jn["[object Boolean]"]=jn["[object DataView]"]=jn["[object Date]"]=jn["[object Error]"]=jn["[object Function]"]=jn["[object Map]"]=jn["[object Number]"]=jn["[object Object]"]=jn["[object RegExp]"]=jn["[object Set]"]=jn["[object String]"]=jn["[object WeakMap]"]=!1;var Sn="object"==typeof exports&&exports&&!exports.nodeType&&exports,xn=Sn&&"object"==typeof module&&module&&!module.nodeType&&module,_n=xn&&xn.exports===Sn&&Q.process,An=function(){try{var t=xn&&xn.require&&xn.require("util").types;return t||_n&&_n.binding&&_n.binding("util")}catch(t){}}(),$n=An&&An.isTypedArray,kn=$n?On($n):function(t){return ft(t)&&un(t.length)&&!!jn[at(t)]},En=Object.prototype.hasOwnProperty;function Pn(t,n){var e=dt(t),r=!e&&bn(t),i=!e&&!r&&gn(t),o=!e&&!r&&!i&&kn(t),s=e||r||i||o,c=s?function(t,n){for(var e=-1,r=Array(t);++e<t;)r[e]=n(e);return r}(t.length,String):[],u=c.length;for(var a in t)!n&&!En.call(t,a)||s&&("length"==a||i&&("offset"==a||"parent"==a)||o&&("buffer"==a||"byteLength"==a||"byteOffset"==a)||Xt(a,u))||c.push(a);return c}function Mn(t,n){return function(e){return t(n(e))}}var Tn=Mn(Object.keys,Object),In=Object.prototype.hasOwnProperty;function Rn(t){return an(t)?Pn(t):function(t){if(!hn(t))return Tn(t);var n=[];for(var e in Object(t))In.call(t,e)&&"constructor"!=e&&n.push(e);return n}(t)}var Cn=Object.prototype.hasOwnProperty;function Fn(t){if(!wt(t))return function(t){var n=[];if(null!=t)for(var e in Object(t))n.push(e);return n}(t);var n=hn(t),e=[];for(var r in t)("constructor"!=r||!n&&Cn.call(t,r))&&e.push(r);return e}function Nn(t){return an(t)?Pn(t,!0):Fn(t)}var Ln=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Bn=/^\w*$/;var Un=Nt(Object,"create");var Dn=Object.prototype.hasOwnProperty;var Hn=Object.prototype.hasOwnProperty;function Vn(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function Wn(t,n){for(var e=t.length;e--;)if(tn(t[e][0],n))return e;return-1}Vn.prototype.clear=function(){this.i=Un?Un(null):{},this.size=0},Vn.prototype.delete=function(t){var n=this.has(t)&&delete this.i[t];return this.size-=n?1:0,n},Vn.prototype.get=function(t){var n=this.i;if(Un){var e=n[t];return"__lodash_hash_undefined__"===e?void 0:e}return Dn.call(n,t)?n[t]:void 0},Vn.prototype.has=function(t){var n=this.i;return Un?void 0!==n[t]:Hn.call(n,t)},Vn.prototype.set=function(t,n){var e=this.i;return this.size+=this.has(t)?0:1,e[t]=Un&&void 0===n?"__lodash_hash_undefined__":n,this};var qn=Array.prototype.splice;function zn(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}zn.prototype.clear=function(){this.i=[],this.size=0},zn.prototype.delete=function(t){var n=this.i,e=Wn(n,t);return!(e<0)&&(e==n.length-1?n.pop():qn.call(n,e,1),--this.size,!0)},zn.prototype.get=function(t){var n=this.i,e=Wn(n,t);return e<0?void 0:n[e][1]},zn.prototype.has=function(t){return Wn(this.i,t)>-1},zn.prototype.set=function(t,n){var e=this.i,r=Wn(e,t);return r<0?(++this.size,e.push([t,n])):e[r][1]=n,this};var Yn=Nt(Z,"Map");function Gn(t,n){var e,r,i=t.i;return("string"==(r=typeof(e=n))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==e:null===e)?i["string"==typeof n?"string":"hash"]:i.map}function Kn(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}Kn.prototype.clear=function(){this.size=0,this.i={hash:new Vn,map:new(Yn||zn),string:new Vn}},Kn.prototype.delete=function(t){var n=Gn(this,t).delete(t);return this.size-=n?1:0,n},Kn.prototype.get=function(t){return Gn(this,t).get(t)},Kn.prototype.has=function(t){return Gn(this,t).has(t)},Kn.prototype.set=function(t,n){var e=Gn(this,t),r=e.size;return e.set(t,n),this.size+=e.size==r?0:1,this};var Jn="Expected a function";function Qn(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw new TypeError(Jn);var e=function(){var r=arguments,i=n?n.apply(this,r):r[0],o=e.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return e.cache=o.set(i,s)||o,s};return e.cache=new(Qn.Cache||Kn),e}Qn.Cache=Kn;var Xn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Zn=/\\(\\)?/g,te=function(t){var n=Qn(t,(function(t){return 500===e.size&&e.clear(),t})),e=n.cache;return n}((function(t){var n=[];return 46===t.charCodeAt(0)&&n.push(""),t.replace(Xn,(function(t,e,r,i){n.push(r?i.replace(Zn,"$1"):e||t)})),n})),ne=te;function ee(t,n){return dt(t)?t:function(t,n){if(dt(t))return!1;var e=typeof t;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!lt(t))||Bn.test(t)||!Ln.test(t)||null!=n&&t in Object(n)}(t,n)?[t]:ne(function(t){return null==t?"":yt(t)}(t))}var re=1/0;function ie(t){if("string"==typeof t||lt(t))return t;var n=t+"";return"0"==n&&1/t==-re?"-0":n}function oe(t,n){for(var e=-1,r=n.length,i=t.length;++e<r;)t[i+e]=n[e];return t}var se=Mn(Object.getPrototypeOf,Object),ce="[object Object]",ue=Function.prototype,ae=Object.prototype,fe=ue.toString,he=ae.hasOwnProperty,le=fe.call(Object);function de(t){var n=this.i=new zn(t);this.size=n.size}de.prototype.clear=function(){this.i=new zn,this.size=0},de.prototype.delete=function(t){var n=this.i,e=n.delete(t);return this.size=n.size,e},de.prototype.get=function(t){return this.i.get(t)},de.prototype.has=function(t){return this.i.has(t)},de.prototype.set=function(t,n){var e=this.i;if(e instanceof zn){var r=e.i;if(!Yn||r.length<199)return r.push([t,n]),this.size=++e.size,this;e=this.i=new Kn(r)}return e.set(t,n),this.size=e.size,this};var ve="object"==typeof exports&&exports&&!exports.nodeType&&exports,pe=ve&&"object"==typeof module&&module&&!module.nodeType&&module,be=pe&&pe.exports===ve?Z.Buffer:void 0,ye=be?be.allocUnsafe:void 0;function we(t,n){if(n)return t.slice();var e=t.length,r=ye?ye(e):new t.constructor(e);return t.copy(r),r}function me(){return[]}var ge=Object.prototype.propertyIsEnumerable,je=Object.getOwnPropertySymbols,Oe=je?function(t){return null==t?[]:(t=Object(t),function(t,n){for(var e=-1,r=null==t?0:t.length,i=0,o=[];++e<r;){var s=t[e];n(s,e,t)&&(o[i++]=s)}return o}(je(t),(function(n){return ge.call(t,n)})))}:me;var Se=Object.getOwnPropertySymbols?function(t){for(var n=[];t;)oe(n,Oe(t)),t=se(t);return n}:me;function xe(t,n,e){var r=n(t);return dt(t)?r:oe(r,e(t))}function _e(t){return xe(t,Rn,Oe)}function Ae(t){return xe(t,Nn,Se)}var $e=Nt(Z,"DataView"),ke=Nt(Z,"Promise"),Ee=Nt(Z,"Set"),Pe="[object Map]",Me="[object Promise]",Te="[object Set]",Ie="[object WeakMap]",Re="[object DataView]",Ce=Et($e),Fe=Et(Yn),Ne=Et(ke),Le=Et(Ee),Be=Et(Lt),Ue=at;($e&&Ue(new $e(new ArrayBuffer(1)))!=Re||Yn&&Ue(new Yn)!=Pe||ke&&Ue(ke.resolve())!=Me||Ee&&Ue(new Ee)!=Te||Lt&&Ue(new Lt)!=Ie)&&(Ue=function(t){var n=at(t),e="[object Object]"==n?t.constructor:void 0,r=e?Et(e):"";if(r)switch(r){case Ce:return Re;case Fe:return Pe;case Ne:return Me;case Le:return Te;case Be:return Ie}return n});var De=Ue,He=Object.prototype.hasOwnProperty;var Ve=Z.Uint8Array;function We(t){var n=new t.constructor(t.byteLength);return new Ve(n).set(new Ve(t)),n}var qe=/\w*$/;var ze=tt?tt.prototype:void 0,Ye=ze?ze.valueOf:void 0;function Ge(t,n){var e=n?We(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}var Ke="[object Boolean]",Je="[object Date]",Qe="[object Map]",Xe="[object Number]",Ze="[object RegExp]",tr="[object Set]",nr="[object String]",er="[object Symbol]",rr="[object ArrayBuffer]",ir="[object DataView]",or="[object Float32Array]",sr="[object Float64Array]",cr="[object Int8Array]",ur="[object Int16Array]",ar="[object Int32Array]",fr="[object Uint8Array]",hr="[object Uint8ClampedArray]",lr="[object Uint16Array]",dr="[object Uint32Array]";function vr(t,n,e){var r,i,o,s=t.constructor;switch(n){case rr:return We(t);case Ke:case Je:return new s(+t);case ir:return function(t,n){var e=n?We(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}(t,e);case or:case sr:case cr:case ur:case ar:case fr:case hr:case lr:case dr:return Ge(t,e);case Qe:return new s;case Xe:case nr:return new s(t);case Ze:return(o=new(i=t).constructor(i.source,qe.exec(i))).lastIndex=i.lastIndex,o;case tr:return new s;case er:return r=t,Ye?Object(Ye.call(r)):{}}}function pr(t){return"function"!=typeof t.constructor||hn(t)?{}:Ut(se(t))}var br=An&&An.isMap,yr=br?On(br):function(t){return ft(t)&&"[object Map]"==De(t)};var wr=An&&An.isSet,mr=wr?On(wr):function(t){return ft(t)&&"[object Set]"==De(t)},gr=1,jr=2,Or=4,Sr="[object Arguments]",xr="[object Function]",_r="[object GeneratorFunction]",Ar="[object Object]",$r={};function kr(t,n,e,r,i,o){var s,c=n&gr,u=n&jr,a=n&Or;if(e&&(s=i?e(t,r,i,o):e(t)),void 0!==s)return s;if(!wt(t))return t;var f=dt(t);if(f){if(s=function(t){var n=t.length,e=new t.constructor(n);return n&&"string"==typeof t[0]&&He.call(t,"index")&&(e.index=t.index,e.input=t.input),e}(t),!c)return Dt(t,s)}else{var h=De(t),l=h==xr||h==_r;if(gn(t))return we(t,c);if(h==Ar||h==Sr||l&&!i){if(s=u||l?{}:pr(t),!c)return u?function(t,n){return rn(t,Se(t),n)}(t,function(t,n){return t&&rn(n,Nn(n),t)}(s,t)):function(t,n){return rn(t,Oe(t),n)}(t,function(t,n){return t&&rn(n,Rn(n),t)}(s,t))}else{if(!$r[h])return i?t:{};s=vr(t,h,c)}}o||(o=new de);var d=o.get(t);if(d)return d;o.set(t,s),mr(t)?t.forEach((function(r){s.add(kr(r,n,e,r,t,o))})):yr(t)&&t.forEach((function(r,i){s.set(i,kr(r,n,e,i,t,o))}));var v=f?void 0:(a?u?Ae:_e:u?Nn:Rn)(t);return function(t,n){for(var e=-1,r=null==t?0:t.length;++e<r&&!1!==n(t[e],e,t););}(v||t,(function(r,i){v&&(r=t[i=r]),en(s,i,kr(r,n,e,i,t,o))})),s}$r[Sr]=$r["[object Array]"]=$r["[object ArrayBuffer]"]=$r["[object DataView]"]=$r["[object Boolean]"]=$r["[object Date]"]=$r["[object Float32Array]"]=$r["[object Float64Array]"]=$r["[object Int8Array]"]=$r["[object Int16Array]"]=$r["[object Int32Array]"]=$r["[object Map]"]=$r["[object Number]"]=$r[Ar]=$r["[object RegExp]"]=$r["[object Set]"]=$r["[object String]"]=$r["[object Symbol]"]=$r["[object Uint8Array]"]=$r["[object Uint8ClampedArray]"]=$r["[object Uint16Array]"]=$r["[object Uint32Array]"]=!0,$r["[object Error]"]=$r[xr]=$r["[object WeakMap]"]=!1;function Er(t){return kr(t,5)}function Pr(t){var n=-1,e=null==t?0:t.length;for(this.i=new Kn;++n<e;)this.add(t[n])}function Mr(t,n){for(var e=-1,r=null==t?0:t.length;++e<r;)if(n(t[e],e,t))return!0;return!1}Pr.prototype.add=Pr.prototype.push=function(t){return this.i.set(t,"__lodash_hash_undefined__"),this},Pr.prototype.has=function(t){return this.i.has(t)};var Tr=1,Ir=2;function Rr(t,n,e,r,i,o){var s=e&Tr,c=t.length,u=n.length;if(c!=u&&!(s&&u>c))return!1;var a=o.get(t),f=o.get(n);if(a&&f)return a==n&&f==t;var h=-1,l=!0,d=e&Ir?new Pr:void 0;for(o.set(t,n),o.set(n,t);++h<c;){var v=t[h],p=n[h];if(r)var b=s?r(p,v,h,n,t,o):r(v,p,h,t,n,o);if(void 0!==b){if(b)continue;l=!1;break}if(d){if(!Mr(n,(function(t,n){if(s=n,!d.has(s)&&(v===t||i(v,t,e,r,o)))return d.push(n);var s}))){l=!1;break}}else if(v!==p&&!i(v,p,e,r,o)){l=!1;break}}return o.delete(t),o.delete(n),l}function Cr(t){var n=-1,e=Array(t.size);return t.forEach((function(t,r){e[++n]=[r,t]})),e}function Fr(t){var n=-1,e=Array(t.size);return t.forEach((function(t){e[++n]=t})),e}var Nr=1,Lr=2,Br="[object Boolean]",Ur="[object Date]",Dr="[object Error]",Hr="[object Map]",Vr="[object Number]",Wr="[object RegExp]",qr="[object Set]",zr="[object String]",Yr="[object Symbol]",Gr="[object ArrayBuffer]",Kr="[object DataView]",Jr=tt?tt.prototype:void 0,Qr=Jr?Jr.valueOf:void 0;var Xr=1,Zr=Object.prototype.hasOwnProperty;var ti=1,ni="[object Arguments]",ei="[object Array]",ri="[object Object]",ii=Object.prototype.hasOwnProperty;function oi(t,n,e,r,i,o){var s=dt(t),c=dt(n),u=s?ei:De(t),a=c?ei:De(n),f=(u=u==ni?ri:u)==ri,h=(a=a==ni?ri:a)==ri,l=u==a;if(l&&gn(t)){if(!gn(n))return!1;s=!0,f=!1}if(l&&!f)return o||(o=new de),s||kn(t)?Rr(t,n,e,r,i,o):function(t,n,e,r,i,o,s){switch(e){case Kr:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case Gr:return!(t.byteLength!=n.byteLength||!o(new Ve(t),new Ve(n)));case Br:case Ur:case Vr:return tn(+t,+n);case Dr:return t.name==n.name&&t.message==n.message;case Wr:case zr:return t==n+"";case Hr:var c=Cr;case qr:var u=r&Nr;if(c||(c=Fr),t.size!=n.size&&!u)return!1;var a=s.get(t);if(a)return a==n;r|=Lr,s.set(t,n);var f=Rr(c(t),c(n),r,i,o,s);return s.delete(t),f;case Yr:if(Qr)return Qr.call(t)==Qr.call(n)}return!1}(t,n,u,e,r,i,o);if(!(e&ti)){var d=f&&ii.call(t,"__wrapped__"),v=h&&ii.call(n,"__wrapped__");if(d||v){var p=d?t.value():t,b=v?n.value():n;return o||(o=new de),i(p,b,e,r,o)}}return!!l&&(o||(o=new de),function(t,n,e,r,i,o){var s=e&Xr,c=_e(t),u=c.length;if(u!=_e(n).length&&!s)return!1;for(var a=u;a--;){var f=c[a];if(!(s?f in n:Zr.call(n,f)))return!1}var h=o.get(t),l=o.get(n);if(h&&l)return h==n&&l==t;var d=!0;o.set(t,n),o.set(n,t);for(var v=s;++a<u;){var p=t[f=c[a]],b=n[f];if(r)var y=s?r(b,p,f,n,t,o):r(p,b,f,t,n,o);if(!(void 0===y?p===b||i(p,b,e,r,o):y)){d=!1;break}v||(v="constructor"==f)}if(d&&!v){var w=t.constructor,m=n.constructor;w==m||!("constructor"in t)||!("constructor"in n)||"function"==typeof w&&w instanceof w&&"function"==typeof m&&m instanceof m||(d=!1)}return o.delete(t),o.delete(n),d}(t,n,e,r,i,o))}function si(t,n,e,r,i){return t===n||(null==t||null==n||!ft(t)&&!ft(n)?t!=t&&n!=n:oi(t,n,e,r,si,i))}var ci,ui=function(t,n,e){for(var r=-1,i=Object(t),o=e(t),s=o.length;s--;){var c=o[ci?s:++r];if(!1===n(i[c],c,i))break}return t};function ai(t,n,e){(void 0!==e&&!tn(t[n],e)||void 0===e&&!(n in t))&&Zt(t,n,e)}function fi(t,n){if(("constructor"!==n||"function"!=typeof t[n])&&"__proto__"!=n)return t[n]}function hi(t,n,e,r,i,o,s){var c=fi(t,e),u=fi(n,e),a=s.get(u);if(a)ai(t,e,a);else{var f,h=o?o(c,u,e+"",t,n,s):void 0,l=void 0===h;if(l){var d=dt(u),v=!d&&gn(u),p=!d&&!v&&kn(u);h=u,d||v||p?dt(c)?h=c:ft(f=c)&&an(f)?h=Dt(c):v?(l=!1,h=we(u,!0)):p?(l=!1,h=Ge(u,!0)):h=[]:function(t){if(!ft(t)||at(t)!=ce)return!1;var n=se(t);if(null===n)return!0;var e=he.call(n,"constructor")&&n.constructor;return"function"==typeof e&&e instanceof e&&fe.call(e)==le}(u)||bn(u)?(h=c,bn(c)?h=function(t){return rn(t,Nn(t))}(c):wt(c)&&!xt(c)||(h=pr(u))):l=!1}l&&(s.set(u,h),i(h,u,r,o,s),s.delete(u)),ai(t,e,h)}}function li(t,n,e,r,i){t!==n&&ui(n,(function(o,s){if(i||(i=new de),wt(o))hi(t,n,s,e,li,r,i);else{var c=r?r(fi(t,s),o,s+"",t,n,i):void 0;void 0===c&&(c=o),ai(t,s,c)}}),Nn)}var di,vi=(di=function(t,n,e){li(t,n,e)},sn((function(t,n){var e=-1,r=n.length,i=r>1?n[r-1]:void 0,o=r>2?n[2]:void 0;for(i=di.length>3&&"function"==typeof i?(r--,i):void 0,o&&function(t,n,e){if(!wt(e))return!1;var r=typeof n;return!!("number"==r?an(e)&&Xt(n,e.length):"string"==r&&n in e)&&tn(e[n],t)}(n[0],n[1],o)&&(i=r<3?void 0:i,r=1),t=Object(t);++e<r;){var s=n[e];s&&di(t,s,e,i)}return t})));function pi(t,n,e){return null==t?t:function(t,n,e,r){if(!wt(t))return t;for(var i=-1,o=(n=ee(n,t)).length,s=o-1,c=t;null!=c&&++i<o;){var u=ie(n[i]),a=e;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(i!=s){var f=c[u];void 0===(a=r?r(f,u,c):void 0)&&(a=wt(f)?f:Xt(n[i+1])?[]:{})}en(c,u,a),c=c[u]}return t}(t,n,e)}const bi="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?s:s.apply(null,arguments)};const yi=new class{constructor(){this.action=new Map,this.subscriptions=new Set}init(t,n=!0){var e,r,i;this.store=(e=(n=t,e)=>J(n,(t=>{this.lastState=n,this.action.get(e.type)?.(t,e)})),r=n&&bi(),o(e,r,i)),this.store.subscribe((()=>{const t=this.store.getState();for(const n of this.subscriptions){const e=this.lastState&&n.selector(this.lastState),r=n.selector(t);let i=!1;i="object"==typeof r?si(e,r):e===r,i||n.listener(r)}}))}register(t,n){this.action.has(t)||this.action.set(t,n)}unregister(t){this.action.delete(t)}get(){return this.store.getState()}select(t,n){const e={prev:t(this.get()),selector:t,listener:n};return this.subscriptions.add(e),()=>this.subscriptions.delete(e)}dispatch(t){"string"==typeof t&&(t={type:t}),this.store.dispatch(t)}once(t,n){n&&this.register(t,n),this.dispatch({type:t}),n&&this.unregister(t)}};yi.init({});class wi{constructor(){this.headers={Accept:"application/json","Content-Type":"application/json"}}async request(t,n={}){if(Array.isArray(t))return await this.handleRequestList(t);let e=Er(t);"string"==typeof e&&(e={url:e}),e.options=e.options||{method:"GET"},e.options.headers=vi({},this.headers,e.options.headers);const r=yi.get().app?.user?.authorization;if(r&&(e.options.headers.Authorization=r),n.exceptions=n.exceptions||new Set,n.exceptions.has(e.url))return{};n.exceptions.add(e.url);const i=await fetch(e.url,e.options),o=await i.json();return await this.extend(o,n)}async handleRequestList(t){let n={};for(const e of t){const t=await this.request(e);vi(n,t)}return n}async extend(t,n={}){if(!1===n.extends)return t;if(!t.extends)return t;const e=t.extends;delete t.extends;const r=await this.request(e,n);return vi(r,t)}async get(t,n){return await this.request({url:t,options:n})}async post(t,n,e){return await this.request({url:t,options:vi({method:"POST",body:JSON.stringify(n)},e)})}}const mi=new class{getProfile(){return yi.get().app?.user?.profile}hasPermission(t){const n=yi.get().app?.user?.permissions?.indexOf(t);return!(void 0===n||-1===n)}hasPermissions(t){for(const n of t)if(!this.hasPermission(n))return!1;return!0}};const gi=new class{constructor(){this.initialState={}}restrict(t,n){const e=yi.get().app?.[n];if(e?.$restrict?.length&&!e?.$restrict.includes(t))throw new Error(`[${t}] does not have permission to write to [${n}]`)}create(t,n){const e=n=>({register:(e,r)=>(gi.restrict(t,n),yi.register(`[${t}=>${n}] ${e}`,((t,e)=>{t[n]=t[n]||{},r(t[n],e)}))),unregister:e=>yi.unregister(`[${t}:${n}] ${e}`),get:()=>yi.get()[n],select:(t,e)=>yi.select((e=>t(e[n])),e),dispatch(t){"string"==typeof t&&(t={type:t});const e=Er(t);return e.type=`[${n}] ${t.type}`,yi.dispatch(e)},once:(e,r)=>(gi.restrict(t,n),yi.once(`[${t}=>${n}] ${e}`,r?(t,e)=>{t[n]=t[n]||{},r(t[n],e)}:void 0)),reset(){this.once("reset",(t=>{for(const n of Object.keys(t))delete t[n];t={...Er(gi.initialState?.[n])}}))}});return e.router={get current(){return yi.get().router?.current},navigate:(t,e)=>n.router.navigate(t,e),resolve:t=>n.router.resolve(t)},e.user={hasPermissions:t=>mi.hasPermissions(t),get profile(){return mi.getProfile()}},e.api={request:(t,e)=>n.api.request(t,e),get:(t,e)=>n.api.get(t,e),post:(t,e,r)=>n.api.post(t,e,r)},e.service=t=>{const e={};for(const[r,i]of Object.entries(n.service?.[t]||{}))"function"==typeof i&&(e[r]=function(){return i(...arguments)});return e},e.import=(t,e,r)=>n.import(t,e,r),e.render=(t,e,r)=>n.render(t,e,r),e}};const ji=new class{async init(t,n){await Promise.all(Object.entries(n||{}).map((([n,e])=>this.createService(n,e,t))))}async createService(t,n,e){if(!n.module)throw new Error(`invalid-service:${t}`);const r=(await import(n.module)).default;if(!r)return;const i=gi.create(t,e);if("function"!=typeof r)return r.app=i,e.service[t]=r,vi({},r.config,n.config),await(r.init?.()),r;const o={id:t,config:n,merge:vi};return e.service[t]=await r(o,i)}};class Oi{constructor(){this.pathMatchIndex=new Map}async configure(t){for(const[n,e]of Object.entries(t))e.path=e.path||n,e.match=e.path.split("/").filter((t=>!!t));this.createPathIndex(t)}createPathIndex(t){const n=Object.entries(t).map((t=>({key:t[0],match:t[1].match||[]})));n.sort(((t,n)=>this.getMatchPriority(t.match,n.match)));for(const t of n)this.pathMatchIndex.set(t.match,t.key)}getMatchRoute(t){for(const n of this.pathMatchIndex.keys())if(this.matchPath(t,n))return this.pathMatchIndex.get(n)}getMatchPriority(t,n){let e=0;for(;;){const r=t[e],i=n[e];if(!r&&!i)return 0;if(!r)return-1;if(!i)return 1;if("*"===r&&"*"===i)return 0;if("*"===r)return 1;if("*"===i)return-1;const o=r.substring(0,1),s=i.substring(0,1);if(":"===o&&":"===s)return 0;if(":"===o)return 1;if(":"===s)return-1;if(r>i)return-1;if(r<i)return 1;e++}}matchPath(t,n){const e=t.split("/").filter((t=>!!t));if(n.length>e.length)return!1;for(let t=0;t<e.length;t++){const r=e[t],i=n[t];if(!i)return!1;if("*"===i)return!0;if(":"!==i.substring(0,1)&&r!==i)return!1}return!0}getPathParams(t,n){const e=yi.get().route?.[t],r=(e?.path||t).split("/"),i=n.split("/"),o={};for(let t=0;t<r.length;t++){const n=r[t],e=i[t];n.startsWith(":")&&(o[n.substring(1)]=e)}return o}}new Oi;var Si=/([:*])(\w+)/g,xi="([^/]+)",_i=/\*/g,Ai="?(?:.*)",$i=/\/\?/g,ki="/?([^/]+|)",Ei="(?:/^|^)",Pi="";function Mi(t){return void 0===t&&(t="/"),Ui()?location.pathname+location.search+location.hash:t}function Ti(t){return t.replace(/\/+$/,"").replace(/^\/+/,"")}function Ii(t){return"string"==typeof t}function Ri(t){return t&&t.indexOf("#")>=0&&t.split("#").pop()||""}function Ci(t){var n=Ti(t).split(/\?(.*)?$/);return[Ti(n[0]),n.slice(1).join("")]}function Fi(t){for(var n={},e=t.split("&"),r=0;r<e.length;r++){var i=e[r].split("=");if(""!==i[0]){var o=decodeURIComponent(i[0]);n[o]?(Array.isArray(n[o])||(n[o]=[n[o]]),n[o].push(decodeURIComponent(i[1]||""))):n[o]=decodeURIComponent(i[1]||"")}}return n}function Ni(t,n){var e,r=Ci(Ti(t.currentLocationPath)),i=r[0],o=r[1],s=""===o?null:Fi(o),c=[];if(Ii(n.path)){if(e=Ei+Ti(n.path).replace(Si,(function(t,n,e){return c.push(e),xi})).replace(_i,Ai).replace($i,ki)+"$",""===Ti(n.path)&&""===Ti(i))return{url:i,queryString:o,hashString:Ri(t.to),route:n,data:null,params:s}}else e=n.path;var u=new RegExp(e,Pi),a=i.match(u);if(a){var f=Ii(n.path)?function(t,n){return 0===n.length?null:t?t.slice(1,t.length).reduce((function(t,e,r){return null===t&&(t={}),t[n[r]]=decodeURIComponent(e),t}),null):null}(a,c):a.groups?a.groups:a.slice(1);return{url:Ti(i.replace(new RegExp("^"+t.instance.root),"")),queryString:o,hashString:Ri(t.to),route:n,data:f,params:s}}return!1}function Li(){return!("undefined"==typeof window||!window.history||!window.history.pushState)}function Bi(t,n){return void 0===t[n]||!0===t[n]}function Ui(){return"undefined"!=typeof window}function Di(t,n){return void 0===t&&(t=[]),void 0===n&&(n={}),t.filter((function(t){return t})).forEach((function(t){["before","after","already","leave"].forEach((function(e){t[e]&&(n[e]||(n[e]=[]),n[e].push(t[e]))}))})),n}function Hi(t,n,e){var r=n||{},i=0;!function n(){t[i]?Array.isArray(t[i])?(t.splice.apply(t,[i,1].concat(t[i][0](r)?t[i][1]:t[i][2])),n()):t[i](r,(function(t){void 0===t||!0===t?(i+=1,n()):e&&e(r)})):e&&e(r)}()}function Vi(t,n){void 0===t.currentLocationPath&&(t.currentLocationPath=t.to=Mi(t.instance.root)),t.currentLocationPath=t.instance._checkForAHash(t.currentLocationPath),n()}function Wi(t,n){for(var e=0;e<t.instance.routes.length;e++){var r=Ni(t,t.instance.routes[e]);if(r&&(t.matches||(t.matches=[]),t.matches.push(r),"ONE"===t.resolveOptions.strategy))return void n()}n()}function qi(t,n){t.navigateOptions&&(void 0!==t.navigateOptions.shouldResolve&&console.warn('"shouldResolve" is deprecated. Please check the documentation.'),void 0!==t.navigateOptions.silent&&console.warn('"silent" is deprecated. Please check the documentation.')),n()}function zi(t,n){!0===t.navigateOptions.force?(t.instance._setCurrent([t.instance._pathToMatchObject(t.to)]),n(!1)):n()}Hi.if=function(t,n,e){return Array.isArray(n)||(n=[n]),Array.isArray(e)||(e=[e]),[t,n,e]};var Yi=Ui(),Gi=Li();function Ki(t,n){if(Bi(t.navigateOptions,"updateBrowserURL")){var e=("/"+t.to).replace(/\/\//g,"/"),r=Yi&&t.resolveOptions&&!0===t.resolveOptions.hash;Gi?(history[t.navigateOptions.historyAPIMethod||"pushState"](t.navigateOptions.stateObj||{},t.navigateOptions.title||"",r?"#"+e:e),location&&location.hash&&(t.instance.o=!0,setTimeout((function(){if(!r){var n=location.hash;location.hash="",location.hash=n}t.instance.o=!1}),1))):Yi&&(window.location.href=t.to)}n()}function Ji(t,n){var e=t.instance;e.lastResolved()?Hi(e.lastResolved().map((function(n){return function(e,r){if(n.route.hooks&&n.route.hooks.leave){var i=!1,o=t.instance.matchLocation(n.route.path,t.currentLocationPath,!1);if("*"!==n.route.path)i=!o;else i=!(!!t.matches&&t.matches.find((function(t){return n.route.path===t.route.path})));Bi(t.navigateOptions,"callHooks")&&i?Hi(n.route.hooks.leave.map((function(n){return function(e,r){return n((function(n){!1===n?t.instance.u(t):r()}),t.matches&&t.matches.length>0?1===t.matches.length?t.matches[0]:t.matches:void 0)}})).concat([function(){return r()}])):r()}else r()}})),{},(function(){return n()})):n()}function Qi(t,n){Bi(t.navigateOptions,"updateState")&&t.instance._setCurrent(t.matches),n()}var Xi=[function(t,n){var e=t.instance.lastResolved();if(e&&e[0]&&e[0].route===t.match.route&&e[0].url===t.match.url&&e[0].queryString===t.match.queryString)return e.forEach((function(n){n.route.hooks&&n.route.hooks.already&&Bi(t.navigateOptions,"callHooks")&&n.route.hooks.already.forEach((function(n){return n(t.match)}))})),void n(!1);n()},function(t,n){t.match.route.hooks&&t.match.route.hooks.before&&Bi(t.navigateOptions,"callHooks")?Hi(t.match.route.hooks.before.map((function(n){return function(e,r){return n((function(n){!1===n?t.instance.u(t):r()}),t.match)}})).concat([function(){return n()}])):n()},function(t,n){Bi(t.navigateOptions,"callHandler")&&t.match.route.handler(t.match),t.instance.updatePageLinks(),n()},function(t,n){t.match.route.hooks&&t.match.route.hooks.after&&Bi(t.navigateOptions,"callHooks")&&t.match.route.hooks.after.forEach((function(n){return n(t.match)})),n()}],Zi=[Ji,function(t,n){var e=t.instance._notFoundRoute;if(e){t.notFoundHandled=!0;var r=Ci(t.currentLocationPath),i=r[0],o=r[1],s=Ri(t.to);e.path=Ti(i);var c={url:e.path,queryString:o,hashString:s,data:null,route:e,params:""!==o?Fi(o):null};t.matches=[c],t.match=c}n()},Hi.if((function(t){return t.notFoundHandled}),Xi.concat([Qi]),[function(t,n){t.resolveOptions&&!1!==t.resolveOptions.noMatchWarning&&void 0!==t.resolveOptions.noMatchWarning||console.warn('Navigo: "'+t.currentLocationPath+"\" didn't match any of the registered routes."),n()},function(t,n){t.instance._setCurrent(null),n()}])];function to(){return to=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},to.apply(this,arguments)}function no(t,n){var e=0;Ji(t,(function r(){e!==t.matches.length?Hi(Xi,to({},t,{match:t.matches[e]}),(function(){e+=1,r()})):Qi(t,n)}))}function eo(t){t.instance.u(t)}function ro(){return ro=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},ro.apply(this,arguments)}var io="[data-navigo]";function oo(t,n){var e,r=n||{strategy:"ONE",hash:!1,noMatchWarning:!1,linksSelector:io},i=this,o="/",s=null,c=[],u=!1,a=Li(),f=Ui();function h(t){return t.indexOf("#")>=0&&(t=!0===r.hash?t.split("#")[1]||"/":t.split("#")[0]),t}function l(t){return Ti(o+"/"+Ti(t))}function d(t,n,e,r){return t=Ii(t)?l(t):t,{name:r||Ti(String(t)),path:t,handler:n,hooks:Di(e)}}function v(t,n){if(!i.h){i.h=!0,t=t?Ti(o)+"/"+Ti(t):void 0;var e={instance:i,to:t,currentLocationPath:t,navigateOptions:{},resolveOptions:ro({},r,n)};return Hi([Vi,Wi,Hi.if((function(t){var n=t.matches;return n&&n.length>0}),no,Zi)],e,eo),!!e.matches&&e.matches}i.l.push((function(){return i.resolve(t,n)}))}function p(t,n){if(i.h)i.l.push((function(){return i.navigate(t,n)}));else{i.h=!0,t=Ti(o)+"/"+Ti(t);var e={instance:i,to:t,navigateOptions:n||{},resolveOptions:n&&n.resolveOptions?n.resolveOptions:r,currentLocationPath:h(t)};Hi([qi,zi,Wi,Hi.if((function(t){var n=t.matches;return n&&n.length>0}),no,Zi),Ki,eo],e,eo)}}function b(){if(f)return function(){if(f)return[].slice.call(document.querySelectorAll(r.linksSelector||io));return[]}().forEach((function(t){"false"!==t.getAttribute("data-navigo")&&"_blank"!==t.getAttribute("target")?t.hasListenerAttached||(t.hasListenerAttached=!0,t.navigoHandler=function(n){if((n.ctrlKey||n.metaKey)&&"a"===n.target.tagName.toLowerCase())return!1;var e=t.getAttribute("href");if(null==e)return!1;if(e.match(/^(http|https)/)&&"undefined"!=typeof URL)try{var r=new URL(e);e=r.pathname+r.search}catch(t){}var o=function(t){if(!t)return{};var n,e=t.split(","),r={};return e.forEach((function(t){var e=t.split(":").map((function(t){return t.replace(/(^ +| +$)/g,"")}));switch(e[0]){case"historyAPIMethod":r.historyAPIMethod=e[1];break;case"resolveOptionsStrategy":n||(n={}),n.strategy=e[1];break;case"resolveOptionsHash":n||(n={}),n.hash="true"===e[1];break;case"updateBrowserURL":case"callHandler":case"updateState":case"force":r[e[0]]="true"===e[1]}})),n&&(r.resolveOptions=n),r}(t.getAttribute("data-navigo-options"));u||(n.preventDefault(),n.stopPropagation(),i.navigate(Ti(e),o))},t.addEventListener("click",t.navigoHandler)):t.hasListenerAttached&&t.removeEventListener("click",t.navigoHandler)})),i}function y(t,n,e){var r=c.find((function(n){return n.name===t})),i=null;if(r){if(i=r.path,n)for(var s in n)i=i.replace(":"+s,n[s]);i=i.match(/^\//)?i:"/"+i}return i&&e&&!e.includeRoot&&(i=i.replace(new RegExp("^/"+o),"")),i}function w(t){var n=Ci(Ti(t)),r=n[0],i=n[1],o=""===i?null:Fi(i);return{url:r,queryString:i,hashString:Ri(t),route:d(r,(function(){}),[e],r),data:null,params:o}}function m(t,n,e){return"string"==typeof n&&(n=g(n)),n?(n.hooks[t]||(n.hooks[t]=[]),n.hooks[t].push(e),function(){n.hooks[t]=n.hooks[t].filter((function(t){return t!==e}))}):(console.warn("Route doesn't exists: "+n),function(){})}function g(t){return"string"==typeof t?c.find((function(n){return n.name===l(t)})):c.find((function(n){return n.handler===t}))}t?o=Ti(t):console.warn('Navigo requires a root path in its constructor. If not provided will use "/" as default.'),this.root=o,this.routes=c,this.destroyed=u,this.current=s,this.o=!1,this.l=[],this.h=!1,this.u=function(t){t.instance.h=!1,t.instance.l.length>0&&t.instance.l.shift()()},this.on=function(t,n,r){var i=this;return"object"!=typeof t||t instanceof RegExp?("function"==typeof t&&(r=n,n=t,t=o),c.push(d(t,n,[e,r])),this):(Object.keys(t).forEach((function(n){if("function"==typeof t[n])i.on(n,t[n]);else{var r=t[n],o=r.uses,s=r.as,u=r.hooks;c.push(d(n,o,[e,u],s))}})),this)},this.off=function(t){return this.routes=c=c.filter((function(n){return Ii(t)?Ti(n.path)!==Ti(t):"function"==typeof t?t!==n.handler:String(n.path)!==String(t)})),this},this.resolve=v,this.navigate=p,this.navigateByName=function(t,n,e){var r=y(t,n);return null!==r&&(p(r.replace(new RegExp("^/?"+o),""),e),!0)},this.destroy=function(){this.routes=c=[],a&&window.removeEventListener("popstate",this.v),this.destroyed=u=!0},this.notFound=function(t,n){return i._notFoundRoute=d("*",t,[e,n],"__NOT_FOUND__"),this},this.updatePageLinks=b,this.link=function(t){return"/"+o+"/"+Ti(t)},this.hooks=function(t){return e=t,this},this.extractGETParameters=function(t){return Ci(h(t))},this.lastResolved=function(){return s},this.generate=y,this.getLinkPath=function(t){return t.getAttribute("href")},this.match=function(t){var n={instance:i,currentLocationPath:t,to:t,navigateOptions:{},resolveOptions:r};return Wi(n,(function(){})),!!n.matches&&n.matches},this.matchLocation=function(t,n,e){void 0===n||void 0!==e&&!e||(n=l(n));var r={instance:i,to:n,currentLocationPath:n};Vi(r,(function(){})),"string"==typeof t&&(t=void 0===e||e?l(t):t);var o=Ni(r,{name:String(t),path:t,handler:function(){},hooks:{}});return o||!1},this.getCurrentLocation=function(){return w(Ti(Mi(o)).replace(new RegExp("^"+o),""))},this.addBeforeHook=m.bind(this,"before"),this.addAfterHook=m.bind(this,"after"),this.addAlreadyHook=m.bind(this,"already"),this.addLeaveHook=m.bind(this,"leave"),this.getRoute=g,this._pathToMatchObject=w,this._clean=Ti,this._checkForAHash=h,this._setCurrent=function(t){return s=i.current=t},function(){a&&(this.v=function(){i.o||v()},window.addEventListener("popstate",this.v))}.call(this),b.call(this)}class so{constructor(){this.manager=new Oi}get fallback(){return yi.get().app?.router?.fallback}get url(){return window.location.href.substring(window.location.origin.length)}init(t){t&&this.manager.configure(t),window.removeEventListener("popstate",(()=>this.handlePopState)),this.navigo=new oo(yi.get().router?.root||"/"),this.navigo.notFound((t=>{this.resolveRouteParts("/"+t.url,t.queryString,t.hashString)}))}handlePopState(t){this.popStateDelay&&clearTimeout(this.popStateDelay),this.popStateDelay=setTimeout((()=>{this.resolve(),this.popStateDelay=void 0}),100)}resolve(t){t||(t=this.url);const n=this.parse(t);this.resolveRouteParts(n.path,n.search,n.hash)}resolveRouteParts(t,n,e){if(this.redirectInvalidRoute(t))return;const r={path:t,hash:e};if(n){r.query={};const t=new URLSearchParams(n);for(const[n,e]of t)r.query[n]=e}const i=this.manager.getMatchRoute(t);r.routeId=i,r.params=this.manager.getPathParams(i,t),yi.once(`[resolve] ${t}`,(t=>{t.router=t.router||{},t.router.current=r})),this.handleRender?.(i,r)}parse(t){t.startsWith("/")&&(t=window.location.origin+t);const n=new URL(t);return{path:n.pathname,search:n.search,hash:n.hash}}navigate(t,n){this.redirectInvalidRoute(t)||this.navigo.navigate(t,n)}redirectInvalidRoute(t){if(!t)return yi.dispatch(`[resolve:404] ${t}`),this.navigate("/error/404"),!0;const n=this.manager.getMatchRoute(t);if(!n)return yi.dispatch(`[resolve:404] ${t}`),this.navigate("/error/404"),!0;const e=yi.get().app?.user,r=yi.get().route?.[n];return r?.auth&&!e?.authenticated||r?.permissions?.length&&!mi.hasPermissions(r.permissions)?(yi.dispatch(`[resolve:401] ${t}`),this.navigate("/error/401"),!0):void 0}}class co{constructor(){this.service={},this.router=new so,this.api=new wi,this.lib=new Map}get state(){return yi.get()}async init(t){gi.initialState=t.state,yi.once("[core] init",(n=>{for(const[e,r]of Object.entries(t?.state||{}))n[e]=r})),this.router.handleRender=(n,e)=>this.handleRouteRender(t.route,n,e),this.router.init(t.route||{}),ji.init(this,t.service||{})}select(t,n){return yi.select(t,n)}handleRouteRender(t,n,e){const r=t?.[n]||{},i=gi.create("route",this);if(r.app)for(const[t,n]of Object.entries(r.app))i(t).once("o-config",(t=>{vi(t,n)}));for(const[t,n]of Object.entries(r))if(t.startsWith("app.")){const e=t.split(".");e.shift();const r=e.shift();if(!r)continue;const o=e.join(".");i(r).once("x-config",(t=>{pi(t,o,n)}))}this.renderer?.render(r,i,e)}async render(t,n,e){const r=gi.create("mod",this);return await t({...n,...this.renderer?.shared},r,e)}async import(t,n,e){let r=this.lib.get(t);if(r||(r=await import(t),this.lib.set(t,r)),"function"==typeof r.default)return await this.render(r.default,n,e)}}const uo=function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof global)return global;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;try{return new Function("return this")()}catch(t){return{}}}();void 0===uo.trustedTypes&&(uo.trustedTypes={createPolicy:(t,n)=>n});const ao={configurable:!1,enumerable:!1,writable:!1};void 0===uo.FAST&&Reflect.defineProperty(uo,"FAST",Object.assign({value:Object.create(null)},ao));const fo=uo.FAST;if(void 0===fo.getById){const t=Object.create(null);Reflect.defineProperty(fo,"getById",Object.assign({value(n,e){let r=t[n];return void 0===r&&(r=e?t[n]=e():null),r}},ao))}function ho(){const t=new WeakMap;return function(n){let e=t.get(n);if(void 0===e){let r=Reflect.getPrototypeOf(n);for(;void 0===e&&null!==r;)e=t.get(r),r=Reflect.getPrototypeOf(r);e=void 0===e?[]:e.slice(0),t.set(n,e)}return e}}Object.freeze([]);const lo=uo.FAST.getById(1,(()=>{const t=[],n=[];function e(){if(n.length)throw n.shift()}function r(t){try{t.call()}catch(t){n.push(t),setTimeout(e,0)}}function i(){let n=0;for(;n<t.length;)if(r(t[n]),n++,n>1024){for(let e=0,r=t.length-n;e<r;e++)t[e]=t[e+n];t.length-=n,n=0}t.length=0}return Object.freeze({enqueue:function(n){t.length<1&&uo.requestAnimationFrame(i),t.push(n)},process:i})})),vo=uo.trustedTypes.createPolicy("fast-html",{createHTML:t=>t});let po=vo;const bo=`fast-${Math.random().toString(36).substring(2,8)}`,yo=`${bo}{`,wo=`}${bo}`,mo=Object.freeze({supportsAdoptedStyleSheets:Array.isArray(document.adoptedStyleSheets)&&"replace"in CSSStyleSheet.prototype,setHTMLPolicy(t){if(po!==vo)throw new Error("The HTML policy can only be set once.");po=t},createHTML:t=>po.createHTML(t),isMarker:t=>t&&8===t.nodeType&&t.data.startsWith(bo),extractDirectiveIndexFromMarker:t=>parseInt(t.data.replace(`${bo}:`,"")),createInterpolationPlaceholder:t=>`${yo}${t}${wo}`,createCustomAttributePlaceholder(t,n){return`${t}="${this.createInterpolationPlaceholder(n)}"`},createBlockPlaceholder:t=>`\x3c!--${bo}:${t}--\x3e`,queueUpdate:lo.enqueue,processUpdates:lo.process,nextUpdate:()=>new Promise(lo.enqueue),setAttribute(t,n,e){null==e?t.removeAttribute(n):t.setAttribute(n,e)},setBooleanAttribute(t,n,e){e?t.setAttribute(n,""):t.removeAttribute(n)},removeChildNodes(t){for(let n=t.firstChild;null!==n;n=t.firstChild)t.removeChild(n)},createTemplateWalker:t=>document.createTreeWalker(t,133,null,!1)});class go{constructor(t,n){this.sub1=void 0,this.sub2=void 0,this.spillover=void 0,this.source=t,this.sub1=n}has(t){return void 0===this.spillover?this.sub1===t||this.sub2===t:-1!==this.spillover.indexOf(t)}subscribe(t){const n=this.spillover;if(void 0===n){if(this.has(t))return;if(void 0===this.sub1)return void(this.sub1=t);if(void 0===this.sub2)return void(this.sub2=t);this.spillover=[this.sub1,this.sub2,t],this.sub1=void 0,this.sub2=void 0}else{-1===n.indexOf(t)&&n.push(t)}}unsubscribe(t){const n=this.spillover;if(void 0===n)this.sub1===t?this.sub1=void 0:this.sub2===t&&(this.sub2=void 0);else{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}notify(t){const n=this.spillover,e=this.source;if(void 0===n){const n=this.sub1,r=this.sub2;void 0!==n&&n.handleChange(e,t),void 0!==r&&r.handleChange(e,t)}else for(let r=0,i=n.length;r<i;++r)n[r].handleChange(e,t)}}class jo{constructor(t){this.subscribers={},this.sourceSubscribers=null,this.source=t}notify(t){var n;const e=this.subscribers[t];void 0!==e&&e.notify(t),null===(n=this.sourceSubscribers)||void 0===n||n.notify(t)}subscribe(t,n){var e;if(n){let e=this.subscribers[n];void 0===e&&(this.subscribers[n]=e=new go(this.source)),e.subscribe(t)}else this.sourceSubscribers=null!==(e=this.sourceSubscribers)&&void 0!==e?e:new go(this.source),this.sourceSubscribers.subscribe(t)}unsubscribe(t,n){var e;if(n){const e=this.subscribers[n];void 0!==e&&e.unsubscribe(t)}else null===(e=this.sourceSubscribers)||void 0===e||e.unsubscribe(t)}}const Oo=fo.getById(2,(()=>{const t=/(:|&&|\|\||if)/,n=new WeakMap,e=mo.queueUpdate;let r,i=t=>{throw new Error("Must call enableArrayObservation before observing arrays.")};function o(t){let e=t.$fastController||n.get(t);return void 0===e&&(Array.isArray(t)?e=i(t):n.set(t,e=new jo(t))),e}const s=ho();class c{constructor(t){this.name=t,this.field=`_${t}`,this.callback=`${t}Changed`}getValue(t){return void 0!==r&&r.watch(t,this.name),t[this.field]}setValue(t,n){const e=this.field,r=t[e];if(r!==n){t[e]=n;const i=t[this.callback];"function"==typeof i&&i.call(t,r,n),o(t).notify(this.name)}}}class u extends go{constructor(t,n,e=!1){super(t,n),this.binding=t,this.isVolatileBinding=e,this.needsRefresh=!0,this.needsQueue=!0,this.first=this,this.last=null,this.propertySource=void 0,this.propertyName=void 0,this.notifier=void 0,this.next=void 0}observe(t,n){this.needsRefresh&&null!==this.last&&this.disconnect();const e=r;r=this.needsRefresh?this:void 0,this.needsRefresh=this.isVolatileBinding;const i=this.binding(t,n);return r=e,i}disconnect(){if(null!==this.last){let t=this.first;for(;void 0!==t;)t.notifier.unsubscribe(this,t.propertyName),t=t.next;this.last=null,this.needsRefresh=this.needsQueue=!0}}watch(t,n){const e=this.last,i=o(t),s=null===e?this.first:{};if(s.propertySource=t,s.propertyName=n,s.notifier=i,i.subscribe(this,n),null!==e){if(!this.needsRefresh){let n;r=void 0,n=e.propertySource[e.propertyName],r=this,t===n&&(this.needsRefresh=!0)}e.next=s}this.last=s}handleChange(){this.needsQueue&&(this.needsQueue=!1,e(this))}call(){null!==this.last&&(this.needsQueue=!0,this.notify(this))}records(){let t=this.first;return{next:()=>{const n=t;return void 0===n?{value:void 0,done:!0}:(t=t.next,{value:n,done:!1})},[Symbol.iterator]:function(){return this}}}}return Object.freeze({setArrayObserverFactory(t){i=t},getNotifier:o,track(t,n){void 0!==r&&r.watch(t,n)},trackVolatile(){void 0!==r&&(r.needsRefresh=!0)},notify(t,n){o(t).notify(n)},defineProperty(t,n){"string"==typeof n&&(n=new c(n)),s(t).push(n),Reflect.defineProperty(t,n.name,{enumerable:!0,get:function(){return n.getValue(this)},set:function(t){n.setValue(this,t)}})},getAccessors:s,binding(t,n,e=this.isVolatileBinding(t)){return new u(t,n,e)},isVolatileBinding:n=>t.test(n.toString())})})),So=fo.getById(3,(()=>{let t=null;return{get:()=>t,set(n){t=n}}}));class xo{constructor(){this.index=0,this.length=0,this.parent=null,this.parentContext=null}get event(){return So.get()}get isEven(){return this.index%2==0}get isOdd(){return this.index%2!=0}get isFirst(){return 0===this.index}get isInMiddle(){return!this.isFirst&&!this.isLast}get isLast(){return this.index===this.length-1}static setEvent(t){So.set(t)}}Oo.defineProperty(xo.prototype,"index"),Oo.defineProperty(xo.prototype,"length");const _o=Object.seal(new xo);class Ao{constructor(){this.targetIndex=0}}class $o extends Ao{constructor(){super(...arguments),this.createPlaceholder=mo.createInterpolationPlaceholder}}function ko(t,n){this.source=t,this.context=n,null===this.bindingObserver&&(this.bindingObserver=Oo.binding(this.binding,this,this.isBindingVolatile)),this.updateTarget(this.bindingObserver.observe(t,n))}function Eo(t,n){this.source=t,this.context=n,this.target.addEventListener(this.targetName,this)}function Po(){this.bindingObserver.disconnect(),this.source=null,this.context=null}function Mo(){this.bindingObserver.disconnect(),this.source=null,this.context=null;const t=this.target.$fastView;void 0!==t&&t.isComposed&&(t.unbind(),t.needsBindOnly=!0)}function To(){this.target.removeEventListener(this.targetName,this),this.source=null,this.context=null}function Io(t){mo.setAttribute(this.target,this.targetName,t)}function Ro(t){mo.setBooleanAttribute(this.target,this.targetName,t)}function Co(t){if(null==t&&(t=""),t.create){this.target.textContent="";let n=this.target.$fastView;void 0===n?n=t.create():this.target.$fastTemplate!==t&&(n.isComposed&&(n.remove(),n.unbind()),n=t.create()),n.isComposed?n.needsBindOnly&&(n.needsBindOnly=!1,n.bind(this.source,this.context)):(n.isComposed=!0,n.bind(this.source,this.context),n.insertBefore(this.target),this.target.$fastView=n,this.target.$fastTemplate=t)}else{const n=this.target.$fastView;void 0!==n&&n.isComposed&&(n.isComposed=!1,n.remove(),n.needsBindOnly?n.needsBindOnly=!1:n.unbind()),this.target.textContent=t}}function Fo(t){this.target[this.targetName]=t}function No(t){const n=this.classVersions||Object.create(null),e=this.target;let r=this.version||0;if(null!=t&&t.length){const i=t.split(/\s+/);for(let t=0,o=i.length;t<o;++t){const o=i[t];""!==o&&(n[o]=r,e.classList.add(o))}}if(this.classVersions=n,this.version=r+1,0!==r){r-=1;for(const t in n)n[t]===r&&e.classList.remove(t)}}class Lo extends $o{constructor(t){super(),this.binding=t,this.bind=ko,this.unbind=Po,this.updateTarget=Io,this.isBindingVolatile=Oo.isVolatileBinding(this.binding)}get targetName(){return this.originalTargetName}set targetName(t){if(this.originalTargetName=t,void 0!==t)switch(t[0]){case":":if(this.cleanedTargetName=t.substr(1),this.updateTarget=Fo,"innerHTML"===this.cleanedTargetName){const t=this.binding;this.binding=(n,e)=>mo.createHTML(t(n,e))}break;case"?":this.cleanedTargetName=t.substr(1),this.updateTarget=Ro;break;case"@":this.cleanedTargetName=t.substr(1),this.bind=Eo,this.unbind=To;break;default:this.cleanedTargetName=t,"class"===t&&(this.updateTarget=No)}}targetAtContent(){this.updateTarget=Co,this.unbind=Mo}createBehavior(t){return new Bo(t,this.binding,this.isBindingVolatile,this.bind,this.unbind,this.updateTarget,this.cleanedTargetName)}}class Bo{constructor(t,n,e,r,i,o,s){this.source=null,this.context=null,this.bindingObserver=null,this.target=t,this.binding=n,this.isBindingVolatile=e,this.bind=r,this.unbind=i,this.updateTarget=o,this.targetName=s}handleChange(){this.updateTarget(this.bindingObserver.observe(this.source,this.context))}handleEvent(t){xo.setEvent(t);const n=this.binding(this.source,this.context);xo.setEvent(null),!0!==n&&t.preventDefault()}}let Uo=null;class Do{addFactory(t){t.targetIndex=this.targetIndex,this.behaviorFactories.push(t)}captureContentBinding(t){t.targetAtContent(),this.addFactory(t)}reset(){this.behaviorFactories=[],this.targetIndex=-1}release(){Uo=this}static borrow(t){const n=Uo||new Do;return n.directives=t,n.reset(),Uo=null,n}}function Ho(t){if(1===t.length)return t[0];let n;const e=t.length,r=t.map((t=>"string"==typeof t?()=>t:(n=t.targetName||n,t.binding))),i=new Lo(((t,n)=>{let i="";for(let o=0;o<e;++o)i+=r[o](t,n);return i}));return i.targetName=n,i}const Vo=wo.length;function Wo(t,n){const e=n.split(yo);if(1===e.length)return null;const r=[];for(let n=0,i=e.length;n<i;++n){const i=e[n],o=i.indexOf(wo);let s;if(-1===o)s=i;else{const n=parseInt(i.substring(0,o));r.push(t.directives[n]),s=i.substring(o+Vo)}""!==s&&r.push(s)}return r}function qo(t,n,e=!1){const r=n.attributes;for(let i=0,o=r.length;i<o;++i){const s=r[i],c=s.value,u=Wo(t,c);let a=null;null===u?e&&(a=new Lo((()=>c)),a.targetName=s.name):a=Ho(u),null!==a&&(n.removeAttributeNode(s),i--,o--,t.addFactory(a))}}function zo(t,n,e){const r=Wo(t,n.textContent);if(null!==r){let i=n;for(let o=0,s=r.length;o<s;++o){const s=r[o],c=0===o?n:i.parentNode.insertBefore(document.createTextNode(""),i.nextSibling);"string"==typeof s?c.textContent=s:(c.textContent=" ",t.captureContentBinding(s)),i=c,t.targetIndex++,c!==n&&e.nextNode()}t.targetIndex--}}const Yo=document.createRange();class Go{constructor(t,n){this.fragment=t,this.behaviors=n,this.source=null,this.context=null,this.firstChild=t.firstChild,this.lastChild=t.lastChild}appendTo(t){t.appendChild(this.fragment)}insertBefore(t){if(this.fragment.hasChildNodes())t.parentNode.insertBefore(this.fragment,t);else{const n=this.lastChild;if(t.previousSibling===n)return;const e=t.parentNode;let r,i=this.firstChild;for(;i!==n;)r=i.nextSibling,e.insertBefore(i,t),i=r;e.insertBefore(n,t)}}remove(){const t=this.fragment,n=this.lastChild;let e,r=this.firstChild;for(;r!==n;)e=r.nextSibling,t.appendChild(r),r=e;t.appendChild(n)}dispose(){const t=this.firstChild.parentNode,n=this.lastChild;let e,r=this.firstChild;for(;r!==n;)e=r.nextSibling,t.removeChild(r),r=e;t.removeChild(n);const i=this.behaviors,o=this.source;for(let t=0,n=i.length;t<n;++t)i[t].unbind(o)}bind(t,n){const e=this.behaviors;if(this.source!==t)if(null!==this.source){const r=this.source;this.source=t,this.context=n;for(let i=0,o=e.length;i<o;++i){const o=e[i];o.unbind(r),o.bind(t,n)}}else{this.source=t,this.context=n;for(let r=0,i=e.length;r<i;++r)e[r].bind(t,n)}}unbind(){if(null===this.source)return;const t=this.behaviors,n=this.source;for(let e=0,r=t.length;e<r;++e)t[e].unbind(n);this.source=null}static disposeContiguousBatch(t){if(0!==t.length){Yo.setStartBefore(t[0].firstChild),Yo.setEndAfter(t[t.length-1].lastChild),Yo.deleteContents();for(let n=0,e=t.length;n<e;++n){const e=t[n],r=e.behaviors,i=e.source;for(let t=0,n=r.length;t<n;++t)r[t].unbind(i)}}}}class Ko{constructor(t,n){this.behaviorCount=0,this.hasHostBehaviors=!1,this.fragment=null,this.targetOffset=0,this.viewBehaviorFactories=null,this.hostBehaviorFactories=null,this.html=t,this.directives=n}create(t){if(null===this.fragment){let t;const n=this.html;if("string"==typeof n){t=document.createElement("template"),t.innerHTML=mo.createHTML(n);const e=t.content.firstElementChild;null!==e&&"TEMPLATE"===e.tagName&&(t=e)}else t=n;const e=function(t,n){const e=t.content;document.adoptNode(e);const r=Do.borrow(n);qo(r,t,!0);const i=r.behaviorFactories;r.reset();const o=mo.createTemplateWalker(e);let s;for(;s=o.nextNode();)switch(r.targetIndex++,s.nodeType){case 1:qo(r,s);break;case 3:zo(r,s,o);break;case 8:mo.isMarker(s)&&r.addFactory(n[mo.extractDirectiveIndexFromMarker(s)])}let c=0;(mo.isMarker(e.firstChild)||1===e.childNodes.length&&n.length)&&(e.insertBefore(document.createComment(""),e.firstChild),c=-1);const u=r.behaviorFactories;return r.release(),{fragment:e,viewBehaviorFactories:u,hostBehaviorFactories:i,targetOffset:c}}(t,this.directives);this.fragment=e.fragment,this.viewBehaviorFactories=e.viewBehaviorFactories,this.hostBehaviorFactories=e.hostBehaviorFactories,this.targetOffset=e.targetOffset,this.behaviorCount=this.viewBehaviorFactories.length+this.hostBehaviorFactories.length,this.hasHostBehaviors=this.hostBehaviorFactories.length>0}const n=this.fragment.cloneNode(!0),e=this.viewBehaviorFactories,r=new Array(this.behaviorCount),i=mo.createTemplateWalker(n);let o=0,s=this.targetOffset,c=i.nextNode();for(let t=e.length;o<t;++o){const t=e[o],n=t.targetIndex;for(;null!==c;){if(s===n){r[o]=t.createBehavior(c);break}c=i.nextNode(),s++}}if(this.hasHostBehaviors){const n=this.hostBehaviorFactories;for(let e=0,i=n.length;e<i;++e,++o)r[o]=n[e].createBehavior(t)}return new Go(n,r)}render(t,n,e){"string"==typeof n&&(n=document.getElementById(n)),void 0===e&&(e=n);const r=this.create(e);return r.bind(t,_o),r.appendTo(n),r}}const Jo=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;class Qo{constructor(){this.targets=new WeakSet}addStylesTo(t){this.targets.add(t)}removeStylesFrom(t){this.targets.delete(t)}isAttachedTo(t){return this.targets.has(t)}withBehaviors(...t){return this.behaviors=null===this.behaviors?t:this.behaviors.concat(t),this}}function Xo(t){return t.map((t=>t instanceof Qo?Xo(t.styles):[t])).reduce(((t,n)=>t.concat(n)),[])}function Zo(t){return t.map((t=>t instanceof Qo?t.behaviors:null)).reduce(((t,n)=>null===n?t:(null===t&&(t=[]),t.concat(n))),null)}Qo.create=(()=>{if(mo.supportsAdoptedStyleSheets){const t=new Map;return n=>new is(n,t)}return t=>new ss(t)})();const ts=Symbol("prependToAdoptedStyleSheets");function ns(t){const n=[],e=[];return t.forEach((t=>(t[ts]?n:e).push(t))),{prepend:n,append:e}}let es=(t,n)=>{const{prepend:e,append:r}=ns(n);t.adoptedStyleSheets=[...e,...t.adoptedStyleSheets,...r]},rs=(t,n)=>{t.adoptedStyleSheets=t.adoptedStyleSheets.filter((t=>-1===n.indexOf(t)))};if(mo.supportsAdoptedStyleSheets)try{document.adoptedStyleSheets.push(),document.adoptedStyleSheets.splice(),es=(t,n)=>{const{prepend:e,append:r}=ns(n);t.adoptedStyleSheets.splice(0,0,...e),t.adoptedStyleSheets.push(...r)},rs=(t,n)=>{for(const e of n){const n=t.adoptedStyleSheets.indexOf(e);-1!==n&&t.adoptedStyleSheets.splice(n,1)}}}catch(t){}class is extends Qo{constructor(t,n){super(),this.styles=t,this.styleSheetCache=n,this._styleSheets=void 0,this.behaviors=Zo(t)}get styleSheets(){if(void 0===this._styleSheets){const t=this.styles,n=this.styleSheetCache;this._styleSheets=Xo(t).map((t=>{if(t instanceof CSSStyleSheet)return t;let e=n.get(t);return void 0===e&&(e=new CSSStyleSheet,e.replaceSync(t),n.set(t,e)),e}))}return this._styleSheets}addStylesTo(t){es(t,this.styleSheets),super.addStylesTo(t)}removeStylesFrom(t){rs(t,this.styleSheets),super.removeStylesFrom(t)}}let os=0;class ss extends Qo{constructor(t){super(),this.styles=t,this.behaviors=null,this.behaviors=Zo(t),this.styleSheets=Xo(t),this.styleClass="fast-style-class-"+ ++os}addStylesTo(t){const n=this.styleSheets,e=this.styleClass;t=this.normalizeTarget(t);for(let r=0;r<n.length;r++){const i=document.createElement("style");i.innerHTML=n[r],i.className=e,t.append(i)}super.addStylesTo(t)}removeStylesFrom(t){const n=(t=this.normalizeTarget(t)).querySelectorAll(`.${this.styleClass}`);for(let e=0,r=n.length;e<r;++e)t.removeChild(n[e]);super.removeStylesFrom(t)}isAttachedTo(t){return super.isAttachedTo(this.normalizeTarget(t))}normalizeTarget(t){return t===document?document.body:t}}const cs=Object.freeze({locate:ho()}),us={toView:t=>t?"true":"false",fromView:t=>null!=t&&"false"!==t&&!1!==t&&0!==t};class as{constructor(t,n,e=n.toLowerCase(),r="reflect",i){this.guards=new Set,this.Owner=t,this.name=n,this.attribute=e,this.mode=r,this.converter=i,this.fieldName=`_${n}`,this.callbackName=`${n}Changed`,this.hasCallback=this.callbackName in t.prototype,"boolean"===r&&void 0===i&&(this.converter=us)}setValue(t,n){const e=t[this.fieldName],r=this.converter;void 0!==r&&(n=r.fromView(n)),e!==n&&(t[this.fieldName]=n,this.tryReflectToAttribute(t),this.hasCallback&&t[this.callbackName](e,n),t.$fastController.notify(this.name))}getValue(t){return Oo.track(t,this.name),t[this.fieldName]}onAttributeChangedCallback(t,n){this.guards.has(t)||(this.guards.add(t),this.setValue(t,n),this.guards.delete(t))}tryReflectToAttribute(t){const n=this.mode,e=this.guards;e.has(t)||"fromView"===n||mo.queueUpdate((()=>{e.add(t);const r=t[this.fieldName];switch(n){case"reflect":const n=this.converter;mo.setAttribute(t,this.attribute,void 0!==n?n.toView(r):r);break;case"boolean":mo.setBooleanAttribute(t,this.attribute,r)}e.delete(t)}))}static collect(t,...n){const e=[];n.push(cs.locate(t));for(let r=0,i=n.length;r<i;++r){const i=n[r];if(void 0!==i)for(let n=0,r=i.length;n<r;++n){const r=i[n];"string"==typeof r?e.push(new as(t,r)):e.push(new as(t,r.property,r.attribute,r.mode,r.converter))}}return e}}const fs={mode:"open"},hs={},ls=fo.getById(4,(()=>{const t=new Map;return Object.freeze({register:n=>!t.has(n.type)&&(t.set(n.type,n),!0),getByType:n=>t.get(n)})}));class ds{constructor(t,n=t.definition){"string"==typeof n&&(n={name:n}),this.type=t,this.name=n.name,this.template=n.template;const e=as.collect(t,n.attributes),r=new Array(e.length),i={},o={};for(let t=0,n=e.length;t<n;++t){const n=e[t];r[t]=n.attribute,i[n.name]=n,o[n.attribute]=n}this.attributes=e,this.observedAttributes=r,this.propertyLookup=i,this.attributeLookup=o,this.shadowOptions=void 0===n.shadowOptions?fs:null===n.shadowOptions?void 0:Object.assign(Object.assign({},fs),n.shadowOptions),this.elementOptions=void 0===n.elementOptions?hs:Object.assign(Object.assign({},hs),n.elementOptions),this.styles=void 0===n.styles?void 0:Array.isArray(n.styles)?Qo.create(n.styles):n.styles instanceof Qo?n.styles:Qo.create([n.styles])}get isDefined(){return!!ls.getByType(this.type)}define(t=customElements){const n=this.type;if(ls.register(this)){const t=this.attributes,e=n.prototype;for(let n=0,r=t.length;n<r;++n)Oo.defineProperty(e,t[n]);Reflect.defineProperty(n,"observedAttributes",{value:this.observedAttributes,enumerable:!0})}return t.get(this.name)||t.define(this.name,n,this.elementOptions),this}}ds.forType=ls.getByType;const vs=new WeakMap,ps={bubbles:!0,composed:!0,cancelable:!0};function bs(t){return t.shadowRoot||vs.get(t)||null}class ys extends jo{constructor(t,n){super(t),this.boundObservables=null,this.behaviors=null,this.needsInitialization=!0,this._template=null,this._styles=null,this._isConnected=!1,this.$fastController=this,this.view=null,this.element=t,this.definition=n;const e=n.shadowOptions;if(void 0!==e){const n=t.attachShadow(e);"closed"===e.mode&&vs.set(t,n)}const r=Oo.getAccessors(t);if(r.length>0){const n=this.boundObservables=Object.create(null);for(let e=0,i=r.length;e<i;++e){const i=r[e].name,o=t[i];void 0!==o&&(delete t[i],n[i]=o)}}}get isConnected(){return Oo.track(this,"isConnected"),this._isConnected}setIsConnected(t){this._isConnected=t,Oo.notify(this,"isConnected")}get template(){return this._template}set template(t){this._template!==t&&(this._template=t,this.needsInitialization||this.renderTemplate(t))}get styles(){return this._styles}set styles(t){this._styles!==t&&(null!==this._styles&&this.removeStyles(this._styles),this._styles=t,this.needsInitialization||null===t||this.addStyles(t))}addStyles(t){const n=bs(this.element)||this.element.getRootNode();if(t instanceof HTMLStyleElement)n.append(t);else if(!t.isAttachedTo(n)){const e=t.behaviors;t.addStylesTo(n),null!==e&&this.addBehaviors(e)}}removeStyles(t){const n=bs(this.element)||this.element.getRootNode();if(t instanceof HTMLStyleElement)n.removeChild(t);else if(t.isAttachedTo(n)){const e=t.behaviors;t.removeStylesFrom(n),null!==e&&this.removeBehaviors(e)}}addBehaviors(t){const n=this.behaviors||(this.behaviors=new Map),e=t.length,r=[];for(let i=0;i<e;++i){const e=t[i];n.has(e)?n.set(e,n.get(e)+1):(n.set(e,1),r.push(e))}if(this._isConnected){const t=this.element;for(let n=0;n<r.length;++n)r[n].bind(t,_o)}}removeBehaviors(t,n=!1){const e=this.behaviors;if(null===e)return;const r=t.length,i=[];for(let o=0;o<r;++o){const r=t[o];if(e.has(r)){const t=e.get(r)-1;0===t||n?e.delete(r)&&i.push(r):e.set(r,t)}}if(this._isConnected){const t=this.element;for(let n=0;n<i.length;++n)i[n].unbind(t)}}onConnectedCallback(){if(this._isConnected)return;const t=this.element;this.needsInitialization?this.finishInitialization():null!==this.view&&this.view.bind(t,_o);const n=this.behaviors;if(null!==n)for(const[e]of n)e.bind(t,_o);this.setIsConnected(!0)}onDisconnectedCallback(){if(!this._isConnected)return;this.setIsConnected(!1);const t=this.view;null!==t&&t.unbind();const n=this.behaviors;if(null!==n){const t=this.element;for(const[e]of n)e.unbind(t)}}onAttributeChangedCallback(t,n,e){const r=this.definition.attributeLookup[t];void 0!==r&&r.onAttributeChangedCallback(this.element,e)}emit(t,n,e){return!!this._isConnected&&this.element.dispatchEvent(new CustomEvent(t,Object.assign(Object.assign({detail:n},ps),e)))}finishInitialization(){const t=this.element,n=this.boundObservables;if(null!==n){const e=Object.keys(n);for(let r=0,i=e.length;r<i;++r){const i=e[r];t[i]=n[i]}this.boundObservables=null}const e=this.definition;null===this._template&&(this.element.resolveTemplate?this._template=this.element.resolveTemplate():e.template&&(this._template=e.template||null)),null!==this._template&&this.renderTemplate(this._template),null===this._styles&&(this.element.resolveStyles?this._styles=this.element.resolveStyles():e.styles&&(this._styles=e.styles||null)),null!==this._styles&&this.addStyles(this._styles),this.needsInitialization=!1}renderTemplate(t){const n=this.element,e=bs(n)||n;null!==this.view?(this.view.dispose(),this.view=null):this.needsInitialization||mo.removeChildNodes(e),t&&(this.view=t.render(n,e,n))}static forCustomElement(t){const n=t.$fastController;if(void 0!==n)return n;const e=ds.forType(t.constructor);if(void 0===e)throw new Error("Missing FASTElement definition.");return t.$fastController=new ys(t,e)}}function ws(t){return class extends t{constructor(){super(),ys.forCustomElement(this)}$emit(t,n,e){return this.$fastController.emit(t,n,e)}connectedCallback(){this.$fastController.onConnectedCallback()}disconnectedCallback(){this.$fastController.onDisconnectedCallback()}attributeChangedCallback(t,n,e){this.$fastController.onAttributeChangedCallback(t,n,e)}}}const ms=Object.assign(ws(HTMLElement),{from:t=>ws(t),define:(t,n)=>new ds(t,n).define().type});var gs=function(t,n,e,r){for(var i,o=arguments.length,s=o<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r,c=t.length-1;c>=0;c--)(i=t[c])&&(s=(o<3?i(s):o>3?i(n,e,s):i(n,e))||s);return o>3&&s&&Object.defineProperty(n,e,s),s};let js=class extends ms{constructor(){super(...arguments),this.shared={}}async render(t,n,e){await this.createInstance(n("page").get().element,{config:t,route:e},n)}async createInstance(t,n,e){const r="string"==typeof t?{module:t}:t;if(r.script){const t=document.createElement("script");t.setAttribute("src",r.script),document.body.appendChild(t)}let i;if(r.module&&(i=await import(r.module),"function"==typeof i.default&&(this?.replaceChildren(),i.default({...n,parent:this,...this.shared},e))),r.component){const t=document.createElement(r.component);this?.replaceChildren(t)}else;}};var Os;js=gs([(Os={name:"mo-renderer",template:(function(t,...n){const e=[];let r="";for(let i=0,o=t.length-1;i<o;++i){const o=t[i];let s=n[i];if(r+=o,s instanceof Ko){const t=s;s=()=>t}if("function"==typeof s&&(s=new Lo(s)),s instanceof $o){const t=Jo.exec(o);null!==t&&(s.targetName=t[2])}s instanceof Ao?(r+=s.createPlaceholder(e.length),e.push(s)):r+=s}return r+=t[t.length-1],new Ko(r,e)})`<slot></slot>`},function(t){new ds(t,Os).define()})],js);export{co as Core,js as MockRendererElement};
