const t=function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof global)return global;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;try{return new Function("return this")()}catch(t){return{}}}();void 0===t.trustedTypes&&(t.trustedTypes={createPolicy:(t,s)=>s});const s={configurable:!1,enumerable:!1,writable:!1};void 0===t.FAST&&Reflect.defineProperty(t,"FAST",Object.assign({value:Object.create(null)},s));const i=t.FAST;if(void 0===i.getById){const t=Object.create(null);Reflect.defineProperty(i,"getById",Object.assign({value(s,i){let e=t[s];return void 0===e&&(e=i?t[s]=i():null),e}},s))}const e=Object.freeze([]);function n(){const t=new WeakMap;return function(s){let i=t.get(s);if(void 0===i){let e=Reflect.getPrototypeOf(s);for(;void 0===i&&null!==e;)i=t.get(e),e=Reflect.getPrototypeOf(e);i=void 0===i?[]:i.slice(0),t.set(s,i)}return i}}const o=t.FAST.getById(1,(()=>{const s=[],i=[];function e(){if(i.length)throw i.shift()}function n(t){try{t.call()}catch(t){i.push(t),setTimeout(e,0)}}function o(){let t=0;for(;t<s.length;)if(n(s[t]),t++,t>1024){for(let i=0,e=s.length-t;i<e;i++)s[i]=s[i+t];s.length-=t,t=0}s.length=0}return Object.freeze({enqueue:function(i){s.length<1&&t.requestAnimationFrame(o),s.push(i)},process:o})})),r=t.trustedTypes.createPolicy("fast-html",{createHTML:t=>t});let h=r;const l=`fast-${Math.random().toString(36).substring(2,8)}`,c=`${l}{`,a=`}${l}`,d=Object.freeze({supportsAdoptedStyleSheets:Array.isArray(document.adoptedStyleSheets)&&"replace"in CSSStyleSheet.prototype,setHTMLPolicy(t){if(h!==r)throw new Error("The HTML policy can only be set once.");h=t},createHTML:t=>h.createHTML(t),isMarker:t=>t&&8===t.nodeType&&t.data.startsWith(l),extractDirectiveIndexFromMarker:t=>parseInt(t.data.replace(`${l}:`,"")),createInterpolationPlaceholder:t=>`${c}${t}${a}`,createCustomAttributePlaceholder(t,s){return`${t}="${this.createInterpolationPlaceholder(s)}"`},createBlockPlaceholder:t=>`\x3c!--${l}:${t}--\x3e`,queueUpdate:o.enqueue,processUpdates:o.process,nextUpdate:()=>new Promise(o.enqueue),setAttribute(t,s,i){null==i?t.removeAttribute(s):t.setAttribute(s,i)},setBooleanAttribute(t,s,i){i?t.setAttribute(s,""):t.removeAttribute(s)},removeChildNodes(t){for(let s=t.firstChild;null!==s;s=t.firstChild)t.removeChild(s)},createTemplateWalker:t=>document.createTreeWalker(t,133,null,!1)});class u{constructor(t,s){this.sub1=void 0,this.sub2=void 0,this.spillover=void 0,this.source=t,this.sub1=s}has(t){return void 0===this.spillover?this.sub1===t||this.sub2===t:-1!==this.spillover.indexOf(t)}subscribe(t){const s=this.spillover;if(void 0===s){if(this.has(t))return;if(void 0===this.sub1)return void(this.sub1=t);if(void 0===this.sub2)return void(this.sub2=t);this.spillover=[this.sub1,this.sub2,t],this.sub1=void 0,this.sub2=void 0}else{-1===s.indexOf(t)&&s.push(t)}}unsubscribe(t){const s=this.spillover;if(void 0===s)this.sub1===t?this.sub1=void 0:this.sub2===t&&(this.sub2=void 0);else{const i=s.indexOf(t);-1!==i&&s.splice(i,1)}}notify(t){const s=this.spillover,i=this.source;if(void 0===s){const s=this.sub1,e=this.sub2;void 0!==s&&s.handleChange(i,t),void 0!==e&&e.handleChange(i,t)}else for(let e=0,n=s.length;e<n;++e)s[e].handleChange(i,t)}}class f{constructor(t){this.subscribers={},this.sourceSubscribers=null,this.source=t}notify(t){var s;const i=this.subscribers[t];void 0!==i&&i.notify(t),null===(s=this.sourceSubscribers)||void 0===s||s.notify(t)}subscribe(t,s){var i;if(s){let i=this.subscribers[s];void 0===i&&(this.subscribers[s]=i=new u(this.source)),i.subscribe(t)}else this.sourceSubscribers=null!==(i=this.sourceSubscribers)&&void 0!==i?i:new u(this.source),this.sourceSubscribers.subscribe(t)}unsubscribe(t,s){var i;if(s){const i=this.subscribers[s];void 0!==i&&i.unsubscribe(t)}else null===(i=this.sourceSubscribers)||void 0===i||i.unsubscribe(t)}}const v=i.getById(2,(()=>{const t=/(:|&&|\|\||if)/,s=new WeakMap,i=d.queueUpdate;let e,o=t=>{throw new Error("Must call enableArrayObservation before observing arrays.")};function r(t){let i=t.$fastController||s.get(t);return void 0===i&&(Array.isArray(t)?i=o(t):s.set(t,i=new f(t))),i}const h=n();class l{constructor(t){this.name=t,this.field=`_${t}`,this.callback=`${t}Changed`}getValue(t){return void 0!==e&&e.watch(t,this.name),t[this.field]}setValue(t,s){const i=this.field,e=t[i];if(e!==s){t[i]=s;const n=t[this.callback];"function"==typeof n&&n.call(t,e,s),r(t).notify(this.name)}}}class c extends u{constructor(t,s,i=!1){super(t,s),this.binding=t,this.isVolatileBinding=i,this.needsRefresh=!0,this.needsQueue=!0,this.first=this,this.last=null,this.propertySource=void 0,this.propertyName=void 0,this.notifier=void 0,this.next=void 0}observe(t,s){this.needsRefresh&&null!==this.last&&this.disconnect();const i=e;e=this.needsRefresh?this:void 0,this.needsRefresh=this.isVolatileBinding;const n=this.binding(t,s);return e=i,n}disconnect(){if(null!==this.last){let t=this.first;for(;void 0!==t;)t.notifier.unsubscribe(this,t.propertyName),t=t.next;this.last=null,this.needsRefresh=this.needsQueue=!0}}watch(t,s){const i=this.last,n=r(t),o=null===i?this.first:{};if(o.propertySource=t,o.propertyName=s,o.notifier=n,n.subscribe(this,s),null!==i){if(!this.needsRefresh){let s;e=void 0,s=i.propertySource[i.propertyName],e=this,t===s&&(this.needsRefresh=!0)}i.next=o}this.last=o}handleChange(){this.needsQueue&&(this.needsQueue=!1,i(this))}call(){null!==this.last&&(this.needsQueue=!0,this.notify(this))}records(){let t=this.first;return{next:()=>{const s=t;return void 0===s?{value:void 0,done:!0}:(t=t.next,{value:s,done:!1})},[Symbol.iterator]:function(){return this}}}}return Object.freeze({setArrayObserverFactory(t){o=t},getNotifier:r,track(t,s){void 0!==e&&e.watch(t,s)},trackVolatile(){void 0!==e&&(e.needsRefresh=!0)},notify(t,s){r(t).notify(s)},defineProperty(t,s){"string"==typeof s&&(s=new l(s)),h(t).push(s),Reflect.defineProperty(t,s.name,{enumerable:!0,get:function(){return s.getValue(this)},set:function(t){s.setValue(this,t)}})},getAccessors:h,binding(t,s,i=this.isVolatileBinding(t)){return new c(t,s,i)},isVolatileBinding:s=>t.test(s.toString())})}));const m=i.getById(3,(()=>{let t=null;return{get:()=>t,set(s){t=s}}}));class p{constructor(){this.index=0,this.length=0,this.parent=null,this.parentContext=null}get event(){return m.get()}get isEven(){return this.index%2==0}get isOdd(){return this.index%2!=0}get isFirst(){return 0===this.index}get isInMiddle(){return!this.isFirst&&!this.isLast}get isLast(){return this.index===this.length-1}static setEvent(t){m.set(t)}}v.defineProperty(p.prototype,"index"),v.defineProperty(p.prototype,"length");const b=Object.seal(new p);class g{constructor(){this.targetIndex=0}}class y extends g{constructor(){super(...arguments),this.createPlaceholder=d.createInterpolationPlaceholder}}class x extends g{constructor(t,s,i){super(),this.name=t,this.behavior=s,this.options=i}createPlaceholder(t){return d.createCustomAttributePlaceholder(this.name,t)}createBehavior(t){return new this.behavior(t,this.options)}}function w(t,s){this.source=t,this.context=s,null===this.bindingObserver&&(this.bindingObserver=v.binding(this.binding,this,this.isBindingVolatile)),this.updateTarget(this.bindingObserver.observe(t,s))}function k(t,s){this.source=t,this.context=s,this.target.addEventListener(this.targetName,this)}function C(){this.bindingObserver.disconnect(),this.source=null,this.context=null}function S(){this.bindingObserver.disconnect(),this.source=null,this.context=null;const t=this.target.$fastView;void 0!==t&&t.isComposed&&(t.unbind(),t.needsBindOnly=!0)}function O(){this.target.removeEventListener(this.targetName,this),this.source=null,this.context=null}function T(t){d.setAttribute(this.target,this.targetName,t)}function $(t){d.setBooleanAttribute(this.target,this.targetName,t)}function j(t){if(null==t&&(t=""),t.create){this.target.textContent="";let s=this.target.$fastView;void 0===s?s=t.create():this.target.$fastTemplate!==t&&(s.isComposed&&(s.remove(),s.unbind()),s=t.create()),s.isComposed?s.needsBindOnly&&(s.needsBindOnly=!1,s.bind(this.source,this.context)):(s.isComposed=!0,s.bind(this.source,this.context),s.insertBefore(this.target),this.target.$fastView=s,this.target.$fastTemplate=t)}else{const s=this.target.$fastView;void 0!==s&&s.isComposed&&(s.isComposed=!1,s.remove(),s.needsBindOnly?s.needsBindOnly=!1:s.unbind()),this.target.textContent=t}}function F(t){this.target[this.targetName]=t}function A(t){const s=this.classVersions||Object.create(null),i=this.target;let e=this.version||0;if(null!=t&&t.length){const n=t.split(/\s+/);for(let t=0,o=n.length;t<o;++t){const o=n[t];""!==o&&(s[o]=e,i.classList.add(o))}}if(this.classVersions=s,this.version=e+1,0!==e){e-=1;for(const t in s)s[t]===e&&i.classList.remove(t)}}class M extends y{constructor(t){super(),this.binding=t,this.bind=w,this.unbind=C,this.updateTarget=T,this.isBindingVolatile=v.isVolatileBinding(this.binding)}get targetName(){return this.originalTargetName}set targetName(t){if(this.originalTargetName=t,void 0!==t)switch(t[0]){case":":if(this.cleanedTargetName=t.substr(1),this.updateTarget=F,"innerHTML"===this.cleanedTargetName){const t=this.binding;this.binding=(s,i)=>d.createHTML(t(s,i))}break;case"?":this.cleanedTargetName=t.substr(1),this.updateTarget=$;break;case"@":this.cleanedTargetName=t.substr(1),this.bind=k,this.unbind=O;break;default:this.cleanedTargetName=t,"class"===t&&(this.updateTarget=A)}}targetAtContent(){this.updateTarget=j,this.unbind=S}createBehavior(t){return new E(t,this.binding,this.isBindingVolatile,this.bind,this.unbind,this.updateTarget,this.cleanedTargetName)}}class E{constructor(t,s,i,e,n,o,r){this.source=null,this.context=null,this.bindingObserver=null,this.target=t,this.binding=s,this.isBindingVolatile=i,this.bind=e,this.unbind=n,this.updateTarget=o,this.targetName=r}handleChange(){this.updateTarget(this.bindingObserver.observe(this.source,this.context))}handleEvent(t){p.setEvent(t);const s=this.binding(this.source,this.context);p.setEvent(null),!0!==s&&t.preventDefault()}}let z=null;class B{addFactory(t){t.targetIndex=this.targetIndex,this.behaviorFactories.push(t)}captureContentBinding(t){t.targetAtContent(),this.addFactory(t)}reset(){this.behaviorFactories=[],this.targetIndex=-1}release(){z=this}static borrow(t){const s=z||new B;return s.directives=t,s.reset(),z=null,s}}function R(t){if(1===t.length)return t[0];let s;const i=t.length,e=t.map((t=>"string"==typeof t?()=>t:(s=t.targetName||s,t.binding))),n=new M(((t,s)=>{let n="";for(let o=0;o<i;++o)n+=e[o](t,s);return n}));return n.targetName=s,n}const L=a.length;function I(t,s){const i=s.split(c);if(1===i.length)return null;const e=[];for(let s=0,n=i.length;s<n;++s){const n=i[s],o=n.indexOf(a);let r;if(-1===o)r=n;else{const s=parseInt(n.substring(0,o));e.push(t.directives[s]),r=n.substring(o+L)}""!==r&&e.push(r)}return e}function P(t,s,i=!1){const e=s.attributes;for(let n=0,o=e.length;n<o;++n){const r=e[n],h=r.value,l=I(t,h);let c=null;null===l?i&&(c=new M((()=>h)),c.targetName=r.name):c=R(l),null!==c&&(s.removeAttributeNode(r),n--,o--,t.addFactory(c))}}function V(t,s,i){const e=I(t,s.textContent);if(null!==e){let n=s;for(let o=0,r=e.length;o<r;++o){const r=e[o],h=0===o?s:n.parentNode.insertBefore(document.createTextNode(""),n.nextSibling);"string"==typeof r?h.textContent=r:(h.textContent=" ",t.captureContentBinding(r)),n=h,t.targetIndex++,h!==s&&i.nextNode()}t.targetIndex--}}const H=document.createRange();class N{constructor(t,s){this.fragment=t,this.behaviors=s,this.source=null,this.context=null,this.firstChild=t.firstChild,this.lastChild=t.lastChild}appendTo(t){t.appendChild(this.fragment)}insertBefore(t){if(this.fragment.hasChildNodes())t.parentNode.insertBefore(this.fragment,t);else{const s=this.lastChild;if(t.previousSibling===s)return;const i=t.parentNode;let e,n=this.firstChild;for(;n!==s;)e=n.nextSibling,i.insertBefore(n,t),n=e;i.insertBefore(s,t)}}remove(){const t=this.fragment,s=this.lastChild;let i,e=this.firstChild;for(;e!==s;)i=e.nextSibling,t.appendChild(e),e=i;t.appendChild(s)}dispose(){const t=this.firstChild.parentNode,s=this.lastChild;let i,e=this.firstChild;for(;e!==s;)i=e.nextSibling,t.removeChild(e),e=i;t.removeChild(s);const n=this.behaviors,o=this.source;for(let t=0,s=n.length;t<s;++t)n[t].unbind(o)}bind(t,s){const i=this.behaviors;if(this.source!==t)if(null!==this.source){const e=this.source;this.source=t,this.context=s;for(let n=0,o=i.length;n<o;++n){const o=i[n];o.unbind(e),o.bind(t,s)}}else{this.source=t,this.context=s;for(let e=0,n=i.length;e<n;++e)i[e].bind(t,s)}}unbind(){if(null===this.source)return;const t=this.behaviors,s=this.source;for(let i=0,e=t.length;i<e;++i)t[i].unbind(s);this.source=null}static disposeContiguousBatch(t){if(0!==t.length){H.setStartBefore(t[0].firstChild),H.setEndAfter(t[t.length-1].lastChild),H.deleteContents();for(let s=0,i=t.length;s<i;++s){const i=t[s],e=i.behaviors,n=i.source;for(let t=0,s=e.length;t<s;++t)e[t].unbind(n)}}}}class W{constructor(t,s){this.behaviorCount=0,this.hasHostBehaviors=!1,this.fragment=null,this.targetOffset=0,this.viewBehaviorFactories=null,this.hostBehaviorFactories=null,this.html=t,this.directives=s}create(t){if(null===this.fragment){let t;const s=this.html;if("string"==typeof s){t=document.createElement("template"),t.innerHTML=d.createHTML(s);const i=t.content.firstElementChild;null!==i&&"TEMPLATE"===i.tagName&&(t=i)}else t=s;const i=function(t,s){const i=t.content;document.adoptNode(i);const e=B.borrow(s);P(e,t,!0);const n=e.behaviorFactories;e.reset();const o=d.createTemplateWalker(i);let r;for(;r=o.nextNode();)switch(e.targetIndex++,r.nodeType){case 1:P(e,r);break;case 3:V(e,r,o);break;case 8:d.isMarker(r)&&e.addFactory(s[d.extractDirectiveIndexFromMarker(r)])}let h=0;(d.isMarker(i.firstChild)||1===i.childNodes.length&&s.length)&&(i.insertBefore(document.createComment(""),i.firstChild),h=-1);const l=e.behaviorFactories;return e.release(),{fragment:i,viewBehaviorFactories:l,hostBehaviorFactories:n,targetOffset:h}}(t,this.directives);this.fragment=i.fragment,this.viewBehaviorFactories=i.viewBehaviorFactories,this.hostBehaviorFactories=i.hostBehaviorFactories,this.targetOffset=i.targetOffset,this.behaviorCount=this.viewBehaviorFactories.length+this.hostBehaviorFactories.length,this.hasHostBehaviors=this.hostBehaviorFactories.length>0}const s=this.fragment.cloneNode(!0),i=this.viewBehaviorFactories,e=new Array(this.behaviorCount),n=d.createTemplateWalker(s);let o=0,r=this.targetOffset,h=n.nextNode();for(let t=i.length;o<t;++o){const t=i[o],s=t.targetIndex;for(;null!==h;){if(r===s){e[o]=t.createBehavior(h);break}h=n.nextNode(),r++}}if(this.hasHostBehaviors){const s=this.hostBehaviorFactories;for(let i=0,n=s.length;i<n;++i,++o)e[o]=s[i].createBehavior(t)}return new N(s,e)}render(t,s,i){"string"==typeof s&&(s=document.getElementById(s)),void 0===i&&(i=s);const e=this.create(i);return e.bind(t,b),e.appendTo(s),e}}const q=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function D(t,...s){const i=[];let e="";for(let n=0,o=t.length-1;n<o;++n){const o=t[n];let r=s[n];if(e+=o,r instanceof W){const t=r;r=()=>t}if("function"==typeof r&&(r=new M(r)),r instanceof y){const t=q.exec(o);null!==t&&(r.targetName=t[2])}r instanceof g?(e+=r.createPlaceholder(i.length),i.push(r)):e+=r}return e+=t[t.length-1],new W(e,i)}class U{constructor(){this.targets=new WeakSet}addStylesTo(t){this.targets.add(t)}removeStylesFrom(t){this.targets.delete(t)}isAttachedTo(t){return this.targets.has(t)}withBehaviors(...t){return this.behaviors=null===this.behaviors?t:this.behaviors.concat(t),this}}function _(t){return t.map((t=>t instanceof U?_(t.styles):[t])).reduce(((t,s)=>t.concat(s)),[])}function G(t){return t.map((t=>t instanceof U?t.behaviors:null)).reduce(((t,s)=>null===s?t:(null===t&&(t=[]),t.concat(s))),null)}U.create=(()=>{if(d.supportsAdoptedStyleSheets){const t=new Map;return s=>new Y(s,t)}return t=>new tt(t)})();const J=Symbol("prependToAdoptedStyleSheets");function K(t){const s=[],i=[];return t.forEach((t=>(t[J]?s:i).push(t))),{prepend:s,append:i}}let Q=(t,s)=>{const{prepend:i,append:e}=K(s);t.adoptedStyleSheets=[...i,...t.adoptedStyleSheets,...e]},X=(t,s)=>{t.adoptedStyleSheets=t.adoptedStyleSheets.filter((t=>-1===s.indexOf(t)))};if(d.supportsAdoptedStyleSheets)try{document.adoptedStyleSheets.push(),document.adoptedStyleSheets.splice(),Q=(t,s)=>{const{prepend:i,append:e}=K(s);t.adoptedStyleSheets.splice(0,0,...i),t.adoptedStyleSheets.push(...e)},X=(t,s)=>{for(const i of s){const s=t.adoptedStyleSheets.indexOf(i);-1!==s&&t.adoptedStyleSheets.splice(s,1)}}}catch(t){}class Y extends U{constructor(t,s){super(),this.styles=t,this.styleSheetCache=s,this._styleSheets=void 0,this.behaviors=G(t)}get styleSheets(){if(void 0===this._styleSheets){const t=this.styles,s=this.styleSheetCache;this._styleSheets=_(t).map((t=>{if(t instanceof CSSStyleSheet)return t;let i=s.get(t);return void 0===i&&(i=new CSSStyleSheet,i.replaceSync(t),s.set(t,i)),i}))}return this._styleSheets}addStylesTo(t){Q(t,this.styleSheets),super.addStylesTo(t)}removeStylesFrom(t){X(t,this.styleSheets),super.removeStylesFrom(t)}}let Z=0;class tt extends U{constructor(t){super(),this.styles=t,this.behaviors=null,this.behaviors=G(t),this.styleSheets=_(t),this.styleClass="fast-style-class-"+ ++Z}addStylesTo(t){const s=this.styleSheets,i=this.styleClass;t=this.normalizeTarget(t);for(let e=0;e<s.length;e++){const n=document.createElement("style");n.innerHTML=s[e],n.className=i,t.append(n)}super.addStylesTo(t)}removeStylesFrom(t){const s=(t=this.normalizeTarget(t)).querySelectorAll(`.${this.styleClass}`);for(let i=0,e=s.length;i<e;++i)t.removeChild(s[i]);super.removeStylesFrom(t)}isAttachedTo(t){return super.isAttachedTo(this.normalizeTarget(t))}normalizeTarget(t){return t===document?document.body:t}}const st=Object.freeze({locate:n()}),it={toView:t=>t?"true":"false",fromView:t=>null!=t&&"false"!==t&&!1!==t&&0!==t};class et{constructor(t,s,i=s.toLowerCase(),e="reflect",n){this.guards=new Set,this.Owner=t,this.name=s,this.attribute=i,this.mode=e,this.converter=n,this.fieldName=`_${s}`,this.callbackName=`${s}Changed`,this.hasCallback=this.callbackName in t.prototype,"boolean"===e&&void 0===n&&(this.converter=it)}setValue(t,s){const i=t[this.fieldName],e=this.converter;void 0!==e&&(s=e.fromView(s)),i!==s&&(t[this.fieldName]=s,this.tryReflectToAttribute(t),this.hasCallback&&t[this.callbackName](i,s),t.$fastController.notify(this.name))}getValue(t){return v.track(t,this.name),t[this.fieldName]}onAttributeChangedCallback(t,s){this.guards.has(t)||(this.guards.add(t),this.setValue(t,s),this.guards.delete(t))}tryReflectToAttribute(t){const s=this.mode,i=this.guards;i.has(t)||"fromView"===s||d.queueUpdate((()=>{i.add(t);const e=t[this.fieldName];switch(s){case"reflect":const s=this.converter;d.setAttribute(t,this.attribute,void 0!==s?s.toView(e):e);break;case"boolean":d.setBooleanAttribute(t,this.attribute,e)}i.delete(t)}))}static collect(t,...s){const i=[];s.push(st.locate(t));for(let e=0,n=s.length;e<n;++e){const n=s[e];if(void 0!==n)for(let s=0,e=n.length;s<e;++s){const e=n[s];"string"==typeof e?i.push(new et(t,e)):i.push(new et(t,e.property,e.attribute,e.mode,e.converter))}}return i}}function nt(t,s){let i;function e(t,s){arguments.length>1&&(i.property=s),st.locate(t.constructor).push(i)}return arguments.length>1?(i={},void e(t,s)):(i=void 0===t?{}:t,e)}const ot={mode:"open"},rt={},ht=i.getById(4,(()=>{const t=new Map;return Object.freeze({register:s=>!t.has(s.type)&&(t.set(s.type,s),!0),getByType:s=>t.get(s)})}));class lt{constructor(t,s=t.definition){"string"==typeof s&&(s={name:s}),this.type=t,this.name=s.name,this.template=s.template;const i=et.collect(t,s.attributes),e=new Array(i.length),n={},o={};for(let t=0,s=i.length;t<s;++t){const s=i[t];e[t]=s.attribute,n[s.name]=s,o[s.attribute]=s}this.attributes=i,this.observedAttributes=e,this.propertyLookup=n,this.attributeLookup=o,this.shadowOptions=void 0===s.shadowOptions?ot:null===s.shadowOptions?void 0:Object.assign(Object.assign({},ot),s.shadowOptions),this.elementOptions=void 0===s.elementOptions?rt:Object.assign(Object.assign({},rt),s.elementOptions),this.styles=void 0===s.styles?void 0:Array.isArray(s.styles)?U.create(s.styles):s.styles instanceof U?s.styles:U.create([s.styles])}get isDefined(){return!!ht.getByType(this.type)}define(t=customElements){const s=this.type;if(ht.register(this)){const t=this.attributes,i=s.prototype;for(let s=0,e=t.length;s<e;++s)v.defineProperty(i,t[s]);Reflect.defineProperty(s,"observedAttributes",{value:this.observedAttributes,enumerable:!0})}return t.get(this.name)||t.define(this.name,s,this.elementOptions),this}}lt.forType=ht.getByType;const ct=new WeakMap,at={bubbles:!0,composed:!0,cancelable:!0};function dt(t){return t.shadowRoot||ct.get(t)||null}class ut extends f{constructor(t,s){super(t),this.boundObservables=null,this.behaviors=null,this.needsInitialization=!0,this._template=null,this._styles=null,this._isConnected=!1,this.$fastController=this,this.view=null,this.element=t,this.definition=s;const i=s.shadowOptions;if(void 0!==i){const s=t.attachShadow(i);"closed"===i.mode&&ct.set(t,s)}const e=v.getAccessors(t);if(e.length>0){const s=this.boundObservables=Object.create(null);for(let i=0,n=e.length;i<n;++i){const n=e[i].name,o=t[n];void 0!==o&&(delete t[n],s[n]=o)}}}get isConnected(){return v.track(this,"isConnected"),this._isConnected}setIsConnected(t){this._isConnected=t,v.notify(this,"isConnected")}get template(){return this._template}set template(t){this._template!==t&&(this._template=t,this.needsInitialization||this.renderTemplate(t))}get styles(){return this._styles}set styles(t){this._styles!==t&&(null!==this._styles&&this.removeStyles(this._styles),this._styles=t,this.needsInitialization||null===t||this.addStyles(t))}addStyles(t){const s=dt(this.element)||this.element.getRootNode();if(t instanceof HTMLStyleElement)s.append(t);else if(!t.isAttachedTo(s)){const i=t.behaviors;t.addStylesTo(s),null!==i&&this.addBehaviors(i)}}removeStyles(t){const s=dt(this.element)||this.element.getRootNode();if(t instanceof HTMLStyleElement)s.removeChild(t);else if(t.isAttachedTo(s)){const i=t.behaviors;t.removeStylesFrom(s),null!==i&&this.removeBehaviors(i)}}addBehaviors(t){const s=this.behaviors||(this.behaviors=new Map),i=t.length,e=[];for(let n=0;n<i;++n){const i=t[n];s.has(i)?s.set(i,s.get(i)+1):(s.set(i,1),e.push(i))}if(this._isConnected){const t=this.element;for(let s=0;s<e.length;++s)e[s].bind(t,b)}}removeBehaviors(t,s=!1){const i=this.behaviors;if(null===i)return;const e=t.length,n=[];for(let o=0;o<e;++o){const e=t[o];if(i.has(e)){const t=i.get(e)-1;0===t||s?i.delete(e)&&n.push(e):i.set(e,t)}}if(this._isConnected){const t=this.element;for(let s=0;s<n.length;++s)n[s].unbind(t)}}onConnectedCallback(){if(this._isConnected)return;const t=this.element;this.needsInitialization?this.finishInitialization():null!==this.view&&this.view.bind(t,b);const s=this.behaviors;if(null!==s)for(const[i]of s)i.bind(t,b);this.setIsConnected(!0)}onDisconnectedCallback(){if(!this._isConnected)return;this.setIsConnected(!1);const t=this.view;null!==t&&t.unbind();const s=this.behaviors;if(null!==s){const t=this.element;for(const[i]of s)i.unbind(t)}}onAttributeChangedCallback(t,s,i){const e=this.definition.attributeLookup[t];void 0!==e&&e.onAttributeChangedCallback(this.element,i)}emit(t,s,i){return!!this._isConnected&&this.element.dispatchEvent(new CustomEvent(t,Object.assign(Object.assign({detail:s},at),i)))}finishInitialization(){const t=this.element,s=this.boundObservables;if(null!==s){const i=Object.keys(s);for(let e=0,n=i.length;e<n;++e){const n=i[e];t[n]=s[n]}this.boundObservables=null}const i=this.definition;null===this._template&&(this.element.resolveTemplate?this._template=this.element.resolveTemplate():i.template&&(this._template=i.template||null)),null!==this._template&&this.renderTemplate(this._template),null===this._styles&&(this.element.resolveStyles?this._styles=this.element.resolveStyles():i.styles&&(this._styles=i.styles||null)),null!==this._styles&&this.addStyles(this._styles),this.needsInitialization=!1}renderTemplate(t){const s=this.element,i=dt(s)||s;null!==this.view?(this.view.dispose(),this.view=null):this.needsInitialization||d.removeChildNodes(i),t&&(this.view=t.render(s,i,s))}static forCustomElement(t){const s=t.$fastController;if(void 0!==s)return s;const i=lt.forType(t.constructor);if(void 0===i)throw new Error("Missing FASTElement definition.");return t.$fastController=new ut(t,i)}}function ft(t){return class extends t{constructor(){super(),ut.forCustomElement(this)}$emit(t,s,i){return this.$fastController.emit(t,s,i)}connectedCallback(){this.$fastController.onConnectedCallback()}disconnectedCallback(){this.$fastController.onDisconnectedCallback()}attributeChangedCallback(t,s,i){this.$fastController.onAttributeChangedCallback(t,s,i)}}}const vt=Object.assign(ft(HTMLElement),{from:t=>ft(t),define:(t,s)=>new lt(t,s).define().type});function mt(t){return function(s){new lt(s,t).define()}}class pt{createCSS(){return""}createBehavior(){}}function bt(t,...s){const{styles:i,behaviors:e}=function(t,s){const i=[];let e="";const n=[];for(let o=0,r=t.length-1;o<r;++o){e+=t[o];let r=s[o];if(r instanceof pt){const t=r.createBehavior();r=r.createCSS(),t&&n.push(t)}r instanceof U||r instanceof CSSStyleSheet?(""!==e.trim()&&(i.push(e),e=""),i.push(r)):e+=r}return e+=t[t.length-1],""!==e.trim()&&i.push(e),{styles:i,behaviors:n}}(t,s),n=U.create(i);return e.length&&n.withBehaviors(...e),n}class gt{constructor(t,s){this.target=t,this.propertyName=s}bind(t){t[this.propertyName]=this.target}unbind(){}}function yt(t){return new x("fast-ref",gt,t)}class xt{constructor(t,s){this.target=t,this.options=s,this.source=null}bind(t){const s=this.options.property;this.shouldUpdate=v.getAccessors(t).some((t=>t.name===s)),this.source=t,this.updateTarget(this.computeNodes()),this.shouldUpdate&&this.observe()}unbind(){this.updateTarget(e),this.source=null,this.shouldUpdate&&this.disconnect()}handleEvent(){this.updateTarget(this.computeNodes())}computeNodes(){let t=this.getNodes();return void 0!==this.options.filter&&(t=t.filter(this.options.filter)),t}updateTarget(t){this.source[this.options.property]=t}}class wt extends xt{constructor(t,s){super(t,s)}observe(){this.target.addEventListener("slotchange",this)}disconnect(){this.target.removeEventListener("slotchange",this)}getNodes(){return this.target.assignedNodes(this.options)}}const kt=bt`
  :host { 
    display: flex;
    flex-direction: column;
    box-sizing: border-box;
  }
  [part="actions"] {
    padding: var(--padding-md) 0 var(--padding-xs);
    margin-top: var(--margin-sm);
    border-top: var(--default-border-width) solid var(--default-border-color);
  }
  [part="actions"] ::slotted(*) {
    margin-left: var(--margin-2xs);
  }
`,Ct=D`
  <div class="flex-fill flex-col">
    <slot></slot>
  </div>
  <div class="flex-row right" part="actions" ?hidden="${t=>!t.actionNodes?.length}">
    <slot name="actions" ${St="actionNodes","string"==typeof St&&(St={property:St}),new x("fast-slotted",wt,St)}></slot>
  </div>
`;var St,Ot=function(t,s,i,e){for(var n,o=arguments.length,r=o<3?s:null===e?e=Object.getOwnPropertyDescriptor(s,i):e,h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(s,i,r):n(s,i))||r);return o>3&&r&&Object.defineProperty(s,i,r),r};let Tt=class extends vt{constructor(){super(...arguments),this.context={},this.actionNodes=[]}get validators(){return this.querySelectorAll("mo-form-validator")}get controls(){return this.querySelectorAll("[form-field],[form-check-field]")}get valid(){const t=this.validators;for(const s of t){if(!s.valid)return!1}return!0}get value(){const t=this.controls,s={};for(const i of t){let t=i.getAttribute("form-field");t&&(s[t]=i.value),t=i.getAttribute("form-check-field"),t&&(s[t]=i.checked)}return s}async cancel(){this.dispatchEvent(new CustomEvent("cancel"))}lock(){for(const t of this.controls)t.setAttribute("read-only","");for(const t of this.actionNodes)t.setAttribute?.("disabled","")}unlock(){for(const t of this.controls)t.removeAttribute("read-only");for(const t of this.actionNodes)t.removeAttribute?.("disabled")}focusOnFirstError(){for(const t of this.validators)if(!t.valid){const s=t.getAttribute("for"),i=this.querySelector(`[form-field="${s}"]`);return void i?.focus?.()}}async submit(){if(this.lock(),this.submitted=!0,!this.valid)return this.focusOnFirstError(),void this.unlock();this.dispatchEvent(new CustomEvent("submit"))}};Ot([nt({mode:"boolean"})],Tt.prototype,"submitted",void 0),Ot([function(t,s){v.defineProperty(t,s)}],Tt.prototype,"actionNodes",void 0),Tt=Ot([mt({name:"mo-form",template:Ct,styles:[kt]})],Tt);const $t=bt`
  :host { 
    display: flex;
    flex-direction: column;
    padding: var(--padding-md) var(--padding-md);
    box-sizing: border-box;
  }
  [screen-xs] :host { 
    width: 100%;
  }
  [part="note"] { 
    color: var(--color-neutral-60);
    font-size: var(--font-size-sm);
  }
  [part="error"] { 
    color: var(--color-error-30);
    font-size: var(--font-size-sm);
  }
  [part="input"] {
    display: flex;
  }
  [part="input"] ::slotted(*) {
    flex: 1 1 auto;
  }
  [part="label"] { 
    margin: var(--margin-2xs) 0;
  }
  [part="validators"] { 
    margin: var(--margin-xs) 0 0 0;
  }
`,jt=D`
  <div class="flex-row">
    <div class="flex-col flex-fill">
      <div part="label">
        <slot name="label"></slot>
      </div>
      <div part="input">
        <slot></slot>
      </div>
      <div part="note">
        <slot name="note"></slot>
      </div>
      <div part="error">
        <slot name="error"></slot>
      </div>
    </div>
    <div part="control">
      <slot name="control"></slot>
    </div>
  </div>
  <div part="validators">
    <slot name="validators"></slot>
  </div>
`;var Ft=function(t,s,i,e){for(var n,o=arguments.length,r=o<3?s:null===e?e=Object.getOwnPropertyDescriptor(s,i):e,h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(s,i,r):n(s,i))||r);return o>3&&r&&Object.defineProperty(s,i,r),r};let At=class extends vt{};At=Ft([mt({name:"mo-form-field",template:jt,styles:[$t]})],At);const Mt=bt`
  :host { 
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    box-sizing: border-box;
    margin-bottom: var(--margin-sm);
  }
  [part="header"] { 
    background: var(--color-neutral-90);
    padding: var(--padding-md);
    border-radius: var(--border-radius-sm);
    margin: 0 var(--padding-sm);
  }
`,Et=D`
  <div part="header" ${yt("headerRef")}>
    <slot name="header" ${yt("headerSlot")}></slot>
  </div>
  <slot></slot>
  <div class="flex-fill"></div>
  <div part="footer" ${yt("footerRef")}>
    <slot name="footer" ${yt("footerSlot")}></slot>
  </div>
`;var zt;!function(t){t.landscape="landscape",t.portrait="portrait"}(zt||(zt={}));class Bt{get size(){return this.current.size}constructor(){this.elements=new Map,this.current={width:document.body.clientWidth,orientation:zt.landscape,size:"md",sizing:{}},this.sizes=["xs","sm","md","lg","xl"],this.styles="\n    :root {\n      --screen-xs: 576px;\n      --screen-sm: 768px;\n      --screen-md: 992px;\n      --screen-lg: 1140px;\n      --screen-xl: 99999px;\n    }\n    [hidden] { display: none !important }\n    .screen-xs [hidden-xs], .screen-xs[hidden-xs] { display: none !important }\n    .screen-sm [hidden-sm], .screen-sm[hidden-sm] { display: none !important }\n    .screen-md [hidden-md], .screen-md[hidden-md] { display: none !important }\n    .screen-lg [hidden-lg], .screen-lg[hidden-lg] { display: none !important }\n    .screen-xl [hidden-xl], .screen-xl[hidden-xl] { display: none !important }\n    .no-pad { padding: 0 }\n    .no-margin { margin: 0 }\n    .no-border { border: 0 }\n    .no-scroll, .no-scroll *:not(.yes-scroll) {\n      overscroll-behavior: none !important;\n      overflow: hidden !important;\n    }\n  ",window.addEventListener("resize",(()=>{this.trackWidth(),this.update()})),window.screen.orientation.addEventListener("change",(()=>{this.trackOrientation(),this.update()}))}init(){this.initializeSizing(),this.trackWidth(),this.trackOrientation()}initializeSizing(){for(const t of this.sizes)this.current.sizing[t]=this.getSizeFromCss(t)}getSizeFromCss(t){return parseInt(getComputedStyle(document.body).getPropertyValue(`--screen-${t}`).replace("px",""))}trackWidth(){this.current.width=document.body.clientWidth;for(const t of this.sizes)if(this.current.width<this.current.sizing[t]){this.current.size=t;break}}trackOrientation(){if(["landscape","landscape-primary","landscape-secondary"].indexOf(window.screen.orientation.type)>-1)return void(this.current.orientation=zt.landscape);["portrait","portrait-primary","portrait-secondary"].indexOf(window.screen.orientation.type)>-1?this.current.orientation=zt.portrait:this.current.orientation=void 0}isSize(t){return this.current.size===t}sync(t,s={width:!0}){this.elements.has(t)||(this.elements.set(t,s),this.updateElement(t))}unsync(t){this.elements.delete(t),this.clearElement(t)}clear(){for(const t of this.elements.keys())this.updateElement(t)}clearElement(t){for(const s of this.sizes)this.removeClass(t,`screen-${s}`);this.removeClass(t,zt.landscape),this.removeClass(t,zt.portrait)}update(){for(const t of this.elements.keys())this.updateElement(t)}updateElement(t){const s=this.elements.get(t);if(s?.width)for(const s of this.sizes)this.current.size===s?this.addClass(t,`screen-${s}`):this.removeClass(t,`screen-${s}`);if(s?.orientation)switch(this.current.orientation){case zt.landscape:this.addClass(t,zt.landscape),this.removeClass(t,zt.portrait);break;case zt.portrait:this.addClass(t,zt.portrait),this.removeClass(t,zt.landscape);break;default:this.removeClass(t,zt.portrait),this.removeClass(t,zt.landscape)}}lockScroll(t){return(t=t||document.body)&&this.addClass(t,"no-scroll"),()=>{this.removeClass(document.body,"no-scroll"),t&&this.removeClass(t,"no-scroll")}}addAttribute(t,s,i=""){t.setAttribute(s,i)}removeAttribute(t,s){t.removeAttribute(s)}toggleAttribute(t,s,i,e=""){void 0===i&&(i=t.hasAttribute(s)),i?this.addAttribute(t,s,e):this.removeAttribute(t,s)}addClass(t,s){t.classList.contains(s)||t.classList.add(s)}removeClass(t,s){for(;t.classList.contains(s);)t.classList.remove(s)}async wait(t=1){return await new Promise((s=>setTimeout((()=>s(void 0)),t)))}}let Rt=window?.$screen;if(!Rt){Rt=new Bt,window.$screen=Rt;const t=document.createElement("style");t.setAttribute("mo-screen",""),t.innerHTML=Rt.styles,document.head.appendChild(t),Rt.init()}var Lt=function(t,s,i,e){for(var n,o=arguments.length,r=o<3?s:null===e?e=Object.getOwnPropertyDescriptor(s,i):e,h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(s,i,r):n(s,i))||r);return o>3&&r&&Object.defineProperty(s,i,r),r};let It=class extends vt{get hasHeader(){return!!this.headerSlot?.assignedNodes()?.length}get hasFooter(){return!!this.footerSlot?.assignedNodes()?.length}connectedCallback(){super.connectedCallback(),Rt.toggleAttribute(this.headerRef,"hidden",!this.hasHeader),Rt.toggleAttribute(this.footerRef,"hidden",!this.hasFooter)}};It=Lt([mt({name:"mo-form-group",template:Et,styles:[Mt]})],It);const Pt=bt`
  :host { 
    display: flex;
    flex-direction: row;
    box-sizing: border-box;
    padding: var(--padding-sm) var(--padding-md);
  }
  :host([status="success"]) {
    color: var(--color-success-30);
  }
  :host([status="error"]) {
    color: var(--color-error-30);
  }
  [part="icon"] { 
    margin-right: var(--margin-sm);
  }
  :host([loading]) [part="icon"] { 
    animation: icon-blinker 0.5s linear infinite;
  }
  @keyframes icon-blinker {
    50% { opacity: 0 }
  }
`,Vt=D`
  <div part="icon">
    <i slot="icon" class="fa-solid fa-circle" ${yt("iconRef")}></i>
  </div>
  <div part="message">
    <slot></slot>
  </div>
`;var Ht=function(t,s,i,e){for(var n,o=arguments.length,r=o<3?s:null===e?e=Object.getOwnPropertyDescriptor(s,i):e,h=t.length-1;h>=0;h--)(n=t[h])&&(r=(o<3?n(r):o>3?n(s,i,r):n(s,i))||r);return o>3&&r&&Object.defineProperty(s,i,r),r};let Nt=class extends vt{constructor(){super(...arguments),this.connected=!1,this.requestIndex=0,this.delay=0,this.status="empty",this.loading=!1,this.handleSubmit=()=>{this.updateStyles()},this.handleKeyup=()=>{this.validate&&(this.dispatch(),this.keyDelayTimeoutId&&clearTimeout(this.keyDelayTimeoutId),this.keyDelayTimeoutId=setTimeout((()=>{clearTimeout(this.keyDelayTimeoutId),delete this.keyDelayTimeoutId,this.update()}),this.delay))},this.handleChange=()=>{this.validate&&this.value!==this.lastValueChecked&&(this.dispatch(),this.keyDelayTimeoutId&&(clearTimeout(this.keyDelayTimeoutId),delete this.keyDelayTimeoutId),this.update())}}statusChanged(){this.iconRef&&this.updateStyles()}requiredChanged(){this.required&&(this.validate=t=>!!t?.toString()?.trim().length)}patternChanged(){this.pattern&&(this.validate=t=>new RegExp(this.pattern).test(t))}minChanged(){this.setLengthRule()}maxChanged(){this.setLengthRule()}lesserChanged(){this.setValueRule()}greaterChanged(){this.setValueRule()}forChanged(){this.connected&&this.bind()}get value(){return this.targetRef?.value||""}get valid(){return!this.loading&&"success"===this.status}connectedCallback(){super.connectedCallback(),this.statusChanged(),this.bind(),this.handleSubmit.bind(this),this.addEventListener("submit",this.handleSubmit)}disconnectedCallback(){super.disconnectedCallback(),this.unbind(),this.removeEventListener("submit",this.handleSubmit)}bind(){if(this.unbind(),!this.for)return;let t=this.getForm(this);t||(console.warn("Form not found",this),t=this.parentElement||this),this.targetRef=t?.querySelector(`[form-field="${this.for}"]`),this.targetRef&&(this.targetRef.addEventListener("change",this.handleChange),this.targetRef.addEventListener("keyup",this.handleKeyup))}unbind(){this.targetRef&&(this.targetRef.removeEventListener("change",this.handleChange),this.targetRef.removeEventListener("keyup",this.handleKeyup))}getForm(t){if(t.parentElement)return"MO-FORM"===t.parentElement?.nodeName?t.parentElement:this.getForm(t.parentElement)}getFormField(t){if(t.parentElement)return"MO-FORM-FIELD"===t.parentElement?.nodeName?t.parentElement:this.getForm(t.parentElement)}dispatch(t="validate"){const s=this.getFormField(this);s&&(this.valid?s.setAttribute("valid",""):s.removeAttribute("valid")),this.dispatchEvent(new CustomEvent(t,{bubbles:!0,detail:{field:this.for,element:this.targetRef}}))}async update(){const t=++this.requestIndex;if(""===this.value)return this.status="empty",void this.dispatch();this.loading=!0,this.status,this.dispatch();const s=await(this.validate?.(this.value));t===this.requestIndex&&(this.status=s?"success":"error",this.loading=!1,this.lastValueChecked=this.value),this.dispatch()}setLengthRule(){(this.min||this.max)&&(this.validate=t=>!(this.min&&t.length<this.min)&&!(this.max&&t.length>this.max))}setValueRule(){(this.lesser||this.greater)&&(this.validate=t=>!(this.lesser&&parseFloat(t)<this.lesser)&&!(this.greater&&parseFloat(t)>this.greater))}updateStyles(){const t=this.getForm(this)?.submitted;switch(this.status){case"empty":t&&this.required?(Rt.removeClass(this.iconRef,"fa-circle"),Rt.removeClass(this.iconRef,"fa-circle-check"),Rt.addClass(this.iconRef,"fa-circle-xmark")):(Rt.addClass(this.iconRef,"fa-circle"),Rt.removeClass(this.iconRef,"fa-circle-check"),Rt.removeClass(this.iconRef,"fa-circle-xmark")),this.removeAttribute("loading");break;case"success":Rt.removeClass(this.iconRef,"fa-circle"),Rt.addClass(this.iconRef,"fa-circle-check"),Rt.removeClass(this.iconRef,"fa-circle-xmark");break;case"error":Rt.removeClass(this.iconRef,"fa-circle"),Rt.removeClass(this.iconRef,"fa-circle-check"),Rt.addClass(this.iconRef,"fa-circle-xmark")}}};Ht([nt],Nt.prototype,"delay",void 0),Ht([nt],Nt.prototype,"status",void 0),Ht([nt({mode:"boolean"})],Nt.prototype,"required",void 0),Ht([nt],Nt.prototype,"pattern",void 0),Ht([nt],Nt.prototype,"min",void 0),Ht([nt],Nt.prototype,"max",void 0),Ht([nt],Nt.prototype,"lesser",void 0),Ht([nt],Nt.prototype,"greater",void 0),Ht([nt],Nt.prototype,"for",void 0),Ht([nt({mode:"boolean"})],Nt.prototype,"loading",void 0),Nt=Ht([mt({name:"mo-form-validator",template:Vt,styles:[Pt]})],Nt);export{Tt as MockFormElement,At as MockFormFieldElement,It as MockFormGroupElement,Nt as MockFormValidatorElement};
