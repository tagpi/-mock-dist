var t="object"==typeof global&&global&&global.Object===Object&&global,n="object"==typeof self&&self&&self.Object===Object&&self,e=t||n||Function("return this")(),r=e.Symbol,i=Object.prototype,o=i.hasOwnProperty,s=i.toString,c=r?r.toStringTag:void 0;var u=Object.prototype.toString;var a="[object Null]",f="[object Undefined]",h=r?r.toStringTag:void 0;function l(t){return null==t?void 0===t?f:a:h&&h in Object(t)?function(t){var n=o.call(t,c),e=t[c];try{t[c]=void 0;var r=!0}catch(t){}var i=s.call(t);return r&&(n?t[c]=e:delete t[c]),i}(t):function(t){return u.call(t)}(t)}function d(t){return null!=t&&"object"==typeof t}var v="[object Symbol]";function p(t){return"symbol"==typeof t||d(t)&&l(t)==v}var b=Array.isArray,y=1/0,w=r?r.prototype:void 0,m=w?w.toString:void 0;function g(t){if("string"==typeof t)return t;if(b(t))return function(t,n){for(var e=-1,r=null==t?0:t.length,i=Array(r);++e<r;)i[e]=n(t[e],e,t);return i}(t,g)+"";if(p(t))return m?m.call(t):"";var n=t+"";return"0"==n&&1/t==-y?"-0":n}function j(t){var n=typeof t;return null!=t&&("object"==n||"function"==n)}function O(t){return t}var S="[object AsyncFunction]",x="[object Function]",A="[object GeneratorFunction]",_="[object Proxy]";function k(t){if(!j(t))return!1;var n=l(t);return n==x||n==A||n==S||n==_}var $,E=e["t"],P=($=/[^.]+$/.exec(E&&E.keys&&E.keys.IE_PROTO||""))?"Symbol(src)_1."+$:"";var C=Function.prototype.toString;function M(t){if(null!=t){try{return C.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var T=/^\[object .+?Constructor\]$/,I=Function.prototype,R=Object.prototype,F=I.toString,N=R.hasOwnProperty,L=RegExp("^"+F.call(N).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function B(t){return!(!j(t)||(n=t,P&&P in n))&&(k(t)?L:T).test(M(t));var n}function U(t,n){var e=function(t,n){return null==t?void 0:t[n]}(t,n);return B(e)?e:void 0}var D=U(e,"WeakMap"),H=Object.create,V=function(){function t(){}return function(n){if(!j(n))return{};if(H)return H(n);t.prototype=n;var e=new t;return t.prototype=void 0,e}}();function q(t,n){var e=-1,r=t.length;for(n||(n=Array(r));++e<r;)n[e]=t[e];return n}var W=Date.now;var z,Y,G,K=function(){try{var t=U(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),J=K,Q=J?function(t,n){return J(t,"toString",{configurable:!0,enumerable:!1,value:(e=n,function(){return e}),writable:!0});var e}:O,X=(z=Q,Y=0,G=0,function(){var t=W(),n=16-(t-G);if(G=t,n>0){if(++Y>=800)return arguments[0]}else Y=0;return z.apply(void 0,arguments)});var Z=9007199254740991,tt=/^(?:0|[1-9]\d*)$/;function nt(t,n){var e=typeof t;return!!(n=n??Z)&&("number"==e||"symbol"!=e&&tt.test(t))&&t>-1&&t%1==0&&t<n}function et(t,n,e){"__proto__"==n&&J?J(t,n,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[n]=e}function rt(t,n){return t===n||t!=t&&n!=n}var it=Object.prototype.hasOwnProperty;function ot(t,n,e){var r=t[n];it.call(t,n)&&rt(r,e)&&(void 0!==e||n in t)||et(t,n,e)}function st(t,n,e,r){var i=!e;e||(e={});for(var o=-1,s=n.length;++o<s;){var c=n[o],u=r?r(e[c],t[c],c,e,t):void 0;void 0===u&&(u=t[c]),i?et(e,c,u):ot(e,c,u)}return e}var ct=Math.max;function ut(t,n){return X(function(t,n,e){return n=ct(void 0===n?t.length-1:n,0),function(){for(var r=arguments,i=-1,o=ct(r.length-n,0),s=Array(o);++i<o;)s[i]=r[n+i];i=-1;for(var c=Array(n+1);++i<n;)c[i]=r[i];return c[n]=e(s),function(t,n,e){switch(e.length){case 0:return t.call(n);case 1:return t.call(n,e[0]);case 2:return t.call(n,e[0],e[1]);case 3:return t.call(n,e[0],e[1],e[2])}return t.apply(n,e)}(t,this,c)}}(t,n,O),t+"")}var at=9007199254740991;function ft(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=at}function ht(t){return null!=t&&ft(t.length)&&!k(t)}var lt=Object.prototype;function dt(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||lt)}function vt(t){return d(t)&&"[object Arguments]"==l(t)}var pt=Object.prototype,bt=pt.hasOwnProperty,yt=pt.propertyIsEnumerable,wt=vt(function(){return arguments}())?vt:function(t){return d(t)&&bt.call(t,"callee")&&!yt.call(t,"callee")};var mt="object"==typeof exports&&exports&&!exports.nodeType&&exports,gt=mt&&"object"==typeof module&&module&&!module.nodeType&&module,jt=gt&&gt.exports===mt?e.Buffer:void 0,Ot=(jt?jt.isBuffer:void 0)||function(){return!1},St={};function xt(t){return function(n){return t(n)}}St["[object Float32Array]"]=St["[object Float64Array]"]=St["[object Int8Array]"]=St["[object Int16Array]"]=St["[object Int32Array]"]=St["[object Uint8Array]"]=St["[object Uint8ClampedArray]"]=St["[object Uint16Array]"]=St["[object Uint32Array]"]=!0,St["[object Arguments]"]=St["[object Array]"]=St["[object ArrayBuffer]"]=St["[object Boolean]"]=St["[object DataView]"]=St["[object Date]"]=St["[object Error]"]=St["[object Function]"]=St["[object Map]"]=St["[object Number]"]=St["[object Object]"]=St["[object RegExp]"]=St["[object Set]"]=St["[object String]"]=St["[object WeakMap]"]=!1;var At="object"==typeof exports&&exports&&!exports.nodeType&&exports,_t=At&&"object"==typeof module&&module&&!module.nodeType&&module,kt=_t&&_t.exports===At&&t.process,$t=function(){try{var t=_t&&_t.require&&_t.require("util").types;return t||kt&&kt.binding&&kt.binding("util")}catch(t){}}(),Et=$t&&$t.isTypedArray,Pt=Et?xt(Et):function(t){return d(t)&&ft(t.length)&&!!St[l(t)]},Ct=Object.prototype.hasOwnProperty;function Mt(t,n){var e=b(t),r=!e&&wt(t),i=!e&&!r&&Ot(t),o=!e&&!r&&!i&&Pt(t),s=e||r||i||o,c=s?function(t,n){for(var e=-1,r=Array(t);++e<t;)r[e]=n(e);return r}(t.length,String):[],u=c.length;for(var a in t)!n&&!Ct.call(t,a)||s&&("length"==a||i&&("offset"==a||"parent"==a)||o&&("buffer"==a||"byteLength"==a||"byteOffset"==a)||nt(a,u))||c.push(a);return c}function Tt(t,n){return function(e){return t(n(e))}}var It=Tt(Object.keys,Object),Rt=Object.prototype.hasOwnProperty;function Ft(t){return ht(t)?Mt(t):function(t){if(!dt(t))return It(t);var n=[];for(var e in Object(t))Rt.call(t,e)&&"constructor"!=e&&n.push(e);return n}(t)}var Nt=Object.prototype.hasOwnProperty;function Lt(t){if(!j(t))return function(t){var n=[];if(null!=t)for(var e in Object(t))n.push(e);return n}(t);var n=dt(t),e=[];for(var r in t)("constructor"!=r||!n&&Nt.call(t,r))&&e.push(r);return e}function Bt(t){return ht(t)?Mt(t,!0):Lt(t)}var Ut=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Dt=/^\w*$/;var Ht=U(Object,"create");var Vt=Object.prototype.hasOwnProperty;var qt=Object.prototype.hasOwnProperty;function Wt(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function zt(t,n){for(var e=t.length;e--;)if(rt(t[e][0],n))return e;return-1}Wt.prototype.clear=function(){this.i=Ht?Ht(null):{},this.size=0},Wt.prototype.delete=function(t){var n=this.has(t)&&delete this.i[t];return this.size-=n?1:0,n},Wt.prototype.get=function(t){var n=this.i;if(Ht){var e=n[t];return"__lodash_hash_undefined__"===e?void 0:e}return Vt.call(n,t)?n[t]:void 0},Wt.prototype.has=function(t){var n=this.i;return Ht?void 0!==n[t]:qt.call(n,t)},Wt.prototype.set=function(t,n){var e=this.i;return this.size+=this.has(t)?0:1,e[t]=Ht&&void 0===n?"__lodash_hash_undefined__":n,this};var Yt=Array.prototype.splice;function Gt(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}Gt.prototype.clear=function(){this.i=[],this.size=0},Gt.prototype.delete=function(t){var n=this.i,e=zt(n,t);return!(e<0)&&(e==n.length-1?n.pop():Yt.call(n,e,1),--this.size,!0)},Gt.prototype.get=function(t){var n=this.i,e=zt(n,t);return e<0?void 0:n[e][1]},Gt.prototype.has=function(t){return zt(this.i,t)>-1},Gt.prototype.set=function(t,n){var e=this.i,r=zt(e,t);return r<0?(++this.size,e.push([t,n])):e[r][1]=n,this};var Kt=U(e,"Map");function Jt(t,n){var e,r,i=t.i;return("string"==(r=typeof(e=n))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==e:null===e)?i["string"==typeof n?"string":"hash"]:i.map}function Qt(t){var n=-1,e=null==t?0:t.length;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}Qt.prototype.clear=function(){this.size=0,this.i={hash:new Wt,map:new(Kt||Gt),string:new Wt}},Qt.prototype.delete=function(t){var n=Jt(this,t).delete(t);return this.size-=n?1:0,n},Qt.prototype.get=function(t){return Jt(this,t).get(t)},Qt.prototype.has=function(t){return Jt(this,t).has(t)},Qt.prototype.set=function(t,n){var e=Jt(this,t),r=e.size;return e.set(t,n),this.size+=e.size==r?0:1,this};var Xt="Expected a function";function Zt(t,n){if("function"!=typeof t||null!=n&&"function"!=typeof n)throw new TypeError(Xt);var e=function(){var r=arguments,i=n?n.apply(this,r):r[0],o=e.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return e.cache=o.set(i,s)||o,s};return e.cache=new(Zt.Cache||Qt),e}Zt.Cache=Qt;var tn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,nn=/\\(\\)?/g,en=function(t){var n=Zt(t,(function(t){return 500===e.size&&e.clear(),t})),e=n.cache;return n}((function(t){var n=[];return 46===t.charCodeAt(0)&&n.push(""),t.replace(tn,(function(t,e,r,i){n.push(r?i.replace(nn,"$1"):e||t)})),n})),rn=en;function on(t,n){return b(t)?t:function(t,n){if(b(t))return!1;var e=typeof t;return!("number"!=e&&"symbol"!=e&&"boolean"!=e&&null!=t&&!p(t))||Dt.test(t)||!Ut.test(t)||null!=n&&t in Object(n)}(t,n)?[t]:rn(function(t){return null==t?"":g(t)}(t))}var sn=1/0;function cn(t){if("string"==typeof t||p(t))return t;var n=t+"";return"0"==n&&1/t==-sn?"-0":n}function un(t,n){for(var e=-1,r=n.length,i=t.length;++e<r;)t[i+e]=n[e];return t}var an=Tt(Object.getPrototypeOf,Object),fn="[object Object]",hn=Function.prototype,ln=Object.prototype,dn=hn.toString,vn=ln.hasOwnProperty,pn=dn.call(Object);function bn(t){var n=this.i=new Gt(t);this.size=n.size}bn.prototype.clear=function(){this.i=new Gt,this.size=0},bn.prototype.delete=function(t){var n=this.i,e=n.delete(t);return this.size=n.size,e},bn.prototype.get=function(t){return this.i.get(t)},bn.prototype.has=function(t){return this.i.has(t)},bn.prototype.set=function(t,n){var e=this.i;if(e instanceof Gt){var r=e.i;if(!Kt||r.length<199)return r.push([t,n]),this.size=++e.size,this;e=this.i=new Qt(r)}return e.set(t,n),this.size=e.size,this};var yn="object"==typeof exports&&exports&&!exports.nodeType&&exports,wn=yn&&"object"==typeof module&&module&&!module.nodeType&&module,mn=wn&&wn.exports===yn?e.Buffer:void 0,gn=mn?mn.allocUnsafe:void 0;function jn(t,n){if(n)return t.slice();var e=t.length,r=gn?gn(e):new t.constructor(e);return t.copy(r),r}function On(){return[]}var Sn=Object.prototype.propertyIsEnumerable,xn=Object.getOwnPropertySymbols,An=xn?function(t){return null==t?[]:(t=Object(t),function(t,n){for(var e=-1,r=null==t?0:t.length,i=0,o=[];++e<r;){var s=t[e];n(s,e,t)&&(o[i++]=s)}return o}(xn(t),(function(n){return Sn.call(t,n)})))}:On;var _n=Object.getOwnPropertySymbols?function(t){for(var n=[];t;)un(n,An(t)),t=an(t);return n}:On;function kn(t,n,e){var r=n(t);return b(t)?r:un(r,e(t))}function $n(t){return kn(t,Ft,An)}function En(t){return kn(t,Bt,_n)}var Pn=U(e,"DataView"),Cn=U(e,"Promise"),Mn=U(e,"Set"),Tn="[object Map]",In="[object Promise]",Rn="[object Set]",Fn="[object WeakMap]",Nn="[object DataView]",Ln=M(Pn),Bn=M(Kt),Un=M(Cn),Dn=M(Mn),Hn=M(D),Vn=l;(Pn&&Vn(new Pn(new ArrayBuffer(1)))!=Nn||Kt&&Vn(new Kt)!=Tn||Cn&&Vn(Cn.resolve())!=In||Mn&&Vn(new Mn)!=Rn||D&&Vn(new D)!=Fn)&&(Vn=function(t){var n=l(t),e="[object Object]"==n?t.constructor:void 0,r=e?M(e):"";if(r)switch(r){case Ln:return Nn;case Bn:return Tn;case Un:return In;case Dn:return Rn;case Hn:return Fn}return n});var qn=Vn,Wn=Object.prototype.hasOwnProperty;var zn=e.Uint8Array;function Yn(t){var n=new t.constructor(t.byteLength);return new zn(n).set(new zn(t)),n}var Gn=/\w*$/;var Kn=r?r.prototype:void 0,Jn=Kn?Kn.valueOf:void 0;function Qn(t,n){var e=n?Yn(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}var Xn="[object Boolean]",Zn="[object Date]",te="[object Map]",ne="[object Number]",ee="[object RegExp]",re="[object Set]",ie="[object String]",oe="[object Symbol]",se="[object ArrayBuffer]",ce="[object DataView]",ue="[object Float32Array]",ae="[object Float64Array]",fe="[object Int8Array]",he="[object Int16Array]",le="[object Int32Array]",de="[object Uint8Array]",ve="[object Uint8ClampedArray]",pe="[object Uint16Array]",be="[object Uint32Array]";function ye(t,n,e){var r,i,o,s=t.constructor;switch(n){case se:return Yn(t);case Xn:case Zn:return new s(+t);case ce:return function(t,n){var e=n?Yn(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}(t,e);case ue:case ae:case fe:case he:case le:case de:case ve:case pe:case be:return Qn(t,e);case te:return new s;case ne:case ie:return new s(t);case ee:return(o=new(i=t).constructor(i.source,Gn.exec(i))).lastIndex=i.lastIndex,o;case re:return new s;case oe:return r=t,Jn?Object(Jn.call(r)):{}}}function we(t){return"function"!=typeof t.constructor||dt(t)?{}:V(an(t))}var me=$t&&$t.isMap,ge=me?xt(me):function(t){return d(t)&&"[object Map]"==qn(t)};var je=$t&&$t.isSet,Oe=je?xt(je):function(t){return d(t)&&"[object Set]"==qn(t)},Se=1,xe=2,Ae=4,_e="[object Arguments]",ke="[object Function]",$e="[object GeneratorFunction]",Ee="[object Object]",Pe={};function Ce(t,n,e,r,i,o){var s,c=n&Se,u=n&xe,a=n&Ae;if(e&&(s=i?e(t,r,i,o):e(t)),void 0!==s)return s;if(!j(t))return t;var f=b(t);if(f){if(s=function(t){var n=t.length,e=new t.constructor(n);return n&&"string"==typeof t[0]&&Wn.call(t,"index")&&(e.index=t.index,e.input=t.input),e}(t),!c)return q(t,s)}else{var h=qn(t),l=h==ke||h==$e;if(Ot(t))return jn(t,c);if(h==Ee||h==_e||l&&!i){if(s=u||l?{}:we(t),!c)return u?function(t,n){return st(t,_n(t),n)}(t,function(t,n){return t&&st(n,Bt(n),t)}(s,t)):function(t,n){return st(t,An(t),n)}(t,function(t,n){return t&&st(n,Ft(n),t)}(s,t))}else{if(!Pe[h])return i?t:{};s=ye(t,h,c)}}o||(o=new bn);var d=o.get(t);if(d)return d;o.set(t,s),Oe(t)?t.forEach((function(r){s.add(Ce(r,n,e,r,t,o))})):ge(t)&&t.forEach((function(r,i){s.set(i,Ce(r,n,e,i,t,o))}));var v=f?void 0:(a?u?En:$n:u?Bt:Ft)(t);return function(t,n){for(var e=-1,r=null==t?0:t.length;++e<r&&!1!==n(t[e],e,t););}(v||t,(function(r,i){v&&(r=t[i=r]),ot(s,i,Ce(r,n,e,i,t,o))})),s}Pe[_e]=Pe["[object Array]"]=Pe["[object ArrayBuffer]"]=Pe["[object DataView]"]=Pe["[object Boolean]"]=Pe["[object Date]"]=Pe["[object Float32Array]"]=Pe["[object Float64Array]"]=Pe["[object Int8Array]"]=Pe["[object Int16Array]"]=Pe["[object Int32Array]"]=Pe["[object Map]"]=Pe["[object Number]"]=Pe[Ee]=Pe["[object RegExp]"]=Pe["[object Set]"]=Pe["[object String]"]=Pe["[object Symbol]"]=Pe["[object Uint8Array]"]=Pe["[object Uint8ClampedArray]"]=Pe["[object Uint16Array]"]=Pe["[object Uint32Array]"]=!0,Pe["[object Error]"]=Pe[ke]=Pe["[object WeakMap]"]=!1;function Me(t){return Ce(t,5)}function Te(t){var n=-1,e=null==t?0:t.length;for(this.i=new Qt;++n<e;)this.add(t[n])}function Ie(t,n){for(var e=-1,r=null==t?0:t.length;++e<r;)if(n(t[e],e,t))return!0;return!1}Te.prototype.add=Te.prototype.push=function(t){return this.i.set(t,"__lodash_hash_undefined__"),this},Te.prototype.has=function(t){return this.i.has(t)};var Re=1,Fe=2;function Ne(t,n,e,r,i,o){var s=e&Re,c=t.length,u=n.length;if(c!=u&&!(s&&u>c))return!1;var a=o.get(t),f=o.get(n);if(a&&f)return a==n&&f==t;var h=-1,l=!0,d=e&Fe?new Te:void 0;for(o.set(t,n),o.set(n,t);++h<c;){var v=t[h],p=n[h];if(r)var b=s?r(p,v,h,n,t,o):r(v,p,h,t,n,o);if(void 0!==b){if(b)continue;l=!1;break}if(d){if(!Ie(n,(function(t,n){if(s=n,!d.has(s)&&(v===t||i(v,t,e,r,o)))return d.push(n);var s}))){l=!1;break}}else if(v!==p&&!i(v,p,e,r,o)){l=!1;break}}return o.delete(t),o.delete(n),l}function Le(t){var n=-1,e=Array(t.size);return t.forEach((function(t,r){e[++n]=[r,t]})),e}function Be(t){var n=-1,e=Array(t.size);return t.forEach((function(t){e[++n]=t})),e}var Ue=1,De=2,He="[object Boolean]",Ve="[object Date]",qe="[object Error]",We="[object Map]",ze="[object Number]",Ye="[object RegExp]",Ge="[object Set]",Ke="[object String]",Je="[object Symbol]",Qe="[object ArrayBuffer]",Xe="[object DataView]",Ze=r?r.prototype:void 0,tr=Ze?Ze.valueOf:void 0;var nr=1,er=Object.prototype.hasOwnProperty;var rr=1,ir="[object Arguments]",or="[object Array]",sr="[object Object]",cr=Object.prototype.hasOwnProperty;function ur(t,n,e,r,i,o){var s=b(t),c=b(n),u=s?or:qn(t),a=c?or:qn(n),f=(u=u==ir?sr:u)==sr,h=(a=a==ir?sr:a)==sr,l=u==a;if(l&&Ot(t)){if(!Ot(n))return!1;s=!0,f=!1}if(l&&!f)return o||(o=new bn),s||Pt(t)?Ne(t,n,e,r,i,o):function(t,n,e,r,i,o,s){switch(e){case Xe:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case Qe:return!(t.byteLength!=n.byteLength||!o(new zn(t),new zn(n)));case He:case Ve:case ze:return rt(+t,+n);case qe:return t.name==n.name&&t.message==n.message;case Ye:case Ke:return t==n+"";case We:var c=Le;case Ge:var u=r&Ue;if(c||(c=Be),t.size!=n.size&&!u)return!1;var a=s.get(t);if(a)return a==n;r|=De,s.set(t,n);var f=Ne(c(t),c(n),r,i,o,s);return s.delete(t),f;case Je:if(tr)return tr.call(t)==tr.call(n)}return!1}(t,n,u,e,r,i,o);if(!(e&rr)){var d=f&&cr.call(t,"__wrapped__"),v=h&&cr.call(n,"__wrapped__");if(d||v){var p=d?t.value():t,y=v?n.value():n;return o||(o=new bn),i(p,y,e,r,o)}}return!!l&&(o||(o=new bn),function(t,n,e,r,i,o){var s=e&nr,c=$n(t),u=c.length;if(u!=$n(n).length&&!s)return!1;for(var a=u;a--;){var f=c[a];if(!(s?f in n:er.call(n,f)))return!1}var h=o.get(t),l=o.get(n);if(h&&l)return h==n&&l==t;var d=!0;o.set(t,n),o.set(n,t);for(var v=s;++a<u;){var p=t[f=c[a]],b=n[f];if(r)var y=s?r(b,p,f,n,t,o):r(p,b,f,t,n,o);if(!(void 0===y?p===b||i(p,b,e,r,o):y)){d=!1;break}v||(v="constructor"==f)}if(d&&!v){var w=t.constructor,m=n.constructor;w==m||!("constructor"in t)||!("constructor"in n)||"function"==typeof w&&w instanceof w&&"function"==typeof m&&m instanceof m||(d=!1)}return o.delete(t),o.delete(n),d}(t,n,e,r,i,o))}function ar(t,n,e,r,i){return t===n||(null==t||null==n||!d(t)&&!d(n)?t!=t&&n!=n:ur(t,n,e,r,ar,i))}var fr,hr=function(t,n,e){for(var r=-1,i=Object(t),o=e(t),s=o.length;s--;){var c=o[fr?s:++r];if(!1===n(i[c],c,i))break}return t};function lr(t,n,e){(void 0!==e&&!rt(t[n],e)||void 0===e&&!(n in t))&&et(t,n,e)}function dr(t,n){if(("constructor"!==n||"function"!=typeof t[n])&&"__proto__"!=n)return t[n]}function vr(t,n,e,r,i,o,s){var c=dr(t,e),u=dr(n,e),a=s.get(u);if(a)lr(t,e,a);else{var f,h=o?o(c,u,e+"",t,n,s):void 0,v=void 0===h;if(v){var p=b(u),y=!p&&Ot(u),w=!p&&!y&&Pt(u);h=u,p||y||w?b(c)?h=c:d(f=c)&&ht(f)?h=q(c):y?(v=!1,h=jn(u,!0)):w?(v=!1,h=Qn(u,!0)):h=[]:function(t){if(!d(t)||l(t)!=fn)return!1;var n=an(t);if(null===n)return!0;var e=vn.call(n,"constructor")&&n.constructor;return"function"==typeof e&&e instanceof e&&dn.call(e)==pn}(u)||wt(u)?(h=c,wt(c)?h=function(t){return st(t,Bt(t))}(c):j(c)&&!k(c)||(h=we(u))):v=!1}v&&(s.set(u,h),i(h,u,r,o,s),s.delete(u)),lr(t,e,h)}}function pr(t,n,e,r,i){t!==n&&hr(n,(function(o,s){if(i||(i=new bn),j(o))vr(t,n,s,e,pr,r,i);else{var c=r?r(dr(t,s),o,s+"",t,n,i):void 0;void 0===c&&(c=o),lr(t,s,c)}}),Bt)}var br,yr=(br=function(t,n,e){pr(t,n,e)},ut((function(t,n){var e=-1,r=n.length,i=r>1?n[r-1]:void 0,o=r>2?n[2]:void 0;for(i=br.length>3&&"function"==typeof i?(r--,i):void 0,o&&function(t,n,e){if(!j(e))return!1;var r=typeof n;return!!("number"==r?ht(e)&&nt(n,e.length):"string"==r&&n in e)&&rt(e[n],t)}(n[0],n[1],o)&&(i=r<3?void 0:i,r=1),t=Object(t);++e<r;){var s=n[e];s&&br(t,s,e,i)}return t})));function wr(t,n,e){return null==t?t:function(t,n,e,r){if(!j(t))return t;for(var i=-1,o=(n=on(n,t)).length,s=o-1,c=t;null!=c&&++i<o;){var u=cn(n[i]),a=e;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(i!=s){var f=c[u];void 0===(a=r?r(f,u,c):void 0)&&(a=j(f)?f:nt(n[i+1])?[]:{})}ot(c,u,a),c=c[u]}return t}(t,n,e)}var mr=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),gr=()=>Math.random().toString(36).substring(7).split("").join("."),jr={INIT:`@@redux/INIT${gr()}`,REPLACE:`@@redux/REPLACE${gr()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${gr()}`};function Or(t){if(void 0===t)return"undefined";if(null===t)return"null";const n=typeof t;switch(n){case"boolean":case"string":case"number":case"symbol":case"function":return n}if(Array.isArray(t))return"array";if(function(t){return t instanceof Date||"function"==typeof t.toDateString&&"function"==typeof t.getDate&&"function"==typeof t.setDate}(t))return"date";if(function(t){return t instanceof Error||"string"==typeof t.message&&t.constructor&&"number"==typeof t.constructor.stackTraceLimit}(t))return"error";const e=function(t){return"function"==typeof t.constructor?t.constructor.name:null}(t);switch(e){case"Symbol":case"Promise":case"WeakMap":case"WeakSet":case"Map":case"Set":return e}return Object.prototype.toString.call(t).slice(8,-1).toLowerCase().replace(/\s/g,"")}function Sr(t){let n=typeof t;return n=Or(t),n}function xr(t,n,e){if("function"!=typeof t)throw new Error(`Expected the root reducer to be a function. Instead, received: '${Sr(t)}'`);if("function"==typeof n&&"function"==typeof e||"function"==typeof e&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.");if("function"==typeof n&&void 0===e&&(e=n,n=void 0),void 0!==e){if("function"!=typeof e)throw new Error(`Expected the enhancer to be a function. Instead, received: '${Sr(e)}'`);return e(xr)(t,n)}let r=t,i=n,o=new Map,s=o,c=0,u=!1;function a(){s===o&&(s=new Map,o.forEach(((t,n)=>{s.set(n,t)})))}function f(){if(u)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return i}function h(t){if("function"!=typeof t)throw new Error(`Expected the listener to be a function. Instead, received: '${Sr(t)}'`);if(u)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api/store#subscribelistener for more details.");let n=!0;a();const e=c++;return s.set(e,t),function(){if(n){if(u)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api/store#subscribelistener for more details.");n=!1,a(),s.delete(e),o=null}}}function l(t){if(!function(t){if("object"!=typeof t||null===t)return!1;let n=t;for(;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(t)===n||null===Object.getPrototypeOf(t)}(t))throw new Error(`Actions must be plain objects. Instead, the actual type was: '${Sr(t)}'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.`);if(void 0===t.type)throw new Error('Actions may not have an undefined "type" property. You may have misspelled an action type string constant.');if("string"!=typeof t.type)throw new Error(`Action "type" property must be a string. Instead, the actual type was: '${Sr(t.type)}'. Value was: '${t.type}' (stringified)`);if(u)throw new Error("Reducers may not dispatch actions.");try{u=!0,i=r(i,t)}finally{u=!1}return(o=s).forEach((t=>{t()})),t}l({type:jr.INIT});return{dispatch:l,subscribe:h,getState:f,replaceReducer:function(t){if("function"!=typeof t)throw new Error(`Expected the nextReducer to be a function. Instead, received: '${Sr(t)}`);r=t,l({type:jr.REPLACE})},[mr]:function(){const t=h;return{subscribe(n){if("object"!=typeof n||null===n)throw new Error(`Expected the observer to be an object. Instead, received: '${Sr(n)}'`);function e(){const t=n;t.next&&t.next(f())}e();return{unsubscribe:t(e)}},[mr](){return this}}}}}function Ar(...t){return 0===t.length?t=>t:1===t.length?t[0]:t.reduce(((t,n)=>(...e)=>t(n(...e))))}var _r=Symbol.for("immer-nothing"),kr=Symbol.for("immer-draftable"),$r=Symbol.for("immer-state"),Er=[function(t){return`The plugin for '${t}' has not been loaded into Immer. To enable the plugin, import and call \`enable${t}()\` when initializing your application.`},function(t){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${t}'`},"This object has been frozen and should not be mutated",function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(t){return`'current' expects a draft, got: ${t}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(t){return`'original' expects a draft, got: ${t}`}];function Pr(t,...n){{const e=Er[t],r="function"==typeof e?e.apply(null,n):e;throw new Error(`[Immer] ${r}`)}}var Cr=Object.getPrototypeOf;function Mr(t){return!!t&&!!t[$r]}function Tr(t){return!!t&&(Rr(t)||Array.isArray(t)||!!t[kr]||!!t.constructor?.[kr]||Ur(t)||Dr(t))}var Ir=Object.prototype.constructor.toString();function Rr(t){if(!t||"object"!=typeof t)return!1;const n=Cr(t);if(null===n)return!0;const e=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return e===Object||"function"==typeof e&&Function.toString.call(e)===Ir}function Fr(t,n){0===Nr(t)?Reflect.ownKeys(t).forEach((e=>{n(e,t[e],t)})):t.forEach(((e,r)=>n(r,e,t)))}function Nr(t){const n=t[$r];return n?n.type_:Array.isArray(t)?1:Ur(t)?2:Dr(t)?3:0}function Lr(t,n){return 2===Nr(t)?t.has(n):Object.prototype.hasOwnProperty.call(t,n)}function Br(t,n,e){const r=Nr(t);2===r?t.set(n,e):3===r?t.add(e):t[n]=e}function Ur(t){return t instanceof Map}function Dr(t){return t instanceof Set}function Hr(t){return t.copy_||t.base_}function Vr(t,n){if(Ur(t))return new Map(t);if(Dr(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const e=Rr(t);if(!0===n||"class_only"===n&&!e){const n=Object.getOwnPropertyDescriptors(t);delete n[$r];let e=Reflect.ownKeys(n);for(let r=0;r<e.length;r++){const i=e[r],o=n[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[i]})}return Object.create(Cr(t),n)}{const n=Cr(t);if(null!==n&&e)return{...t};const r=Object.create(n);return Object.assign(r,t)}}function qr(t,n=!1){return zr(t)||Mr(t)||!Tr(t)||(Nr(t)>1&&(t.set=t.add=t.clear=t.delete=Wr),Object.freeze(t),n&&Object.entries(t).forEach((([t,n])=>qr(n,!0)))),t}function Wr(){Pr(2)}function zr(t){return Object.isFrozen(t)}var Yr,Gr={};function Kr(t){const n=Gr[t];return n||Pr(0,t),n}function Jr(){return Yr}function Qr(t,n){n&&(Kr("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=n)}function Xr(t){Zr(t),t.drafts_.forEach(ni),t.drafts_=null}function Zr(t){t===Yr&&(Yr=t.parent_)}function ti(t){return Yr={drafts_:[],parent_:Yr,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function ni(t){const n=t[$r];0===n.type_||1===n.type_?n.revoke_():n.revoked_=!0}function ei(t,n){n.unfinalizedDrafts_=n.drafts_.length;const e=n.drafts_[0];return void 0!==t&&t!==e?(e[$r].modified_&&(Xr(n),Pr(4)),Tr(t)&&(t=ri(n,t),n.parent_||oi(n,t)),n.patches_&&Kr("Patches").generateReplacementPatches_(e[$r].base_,t,n.patches_,n.inversePatches_)):t=ri(n,e,[]),Xr(n),n.patches_&&n.patchListener_(n.patches_,n.inversePatches_),t!==_r?t:void 0}function ri(t,n,e){if(zr(n))return n;const r=n[$r];if(!r)return Fr(n,((i,o)=>ii(t,r,n,i,o,e))),n;if(r.scope_!==t)return n;if(!r.modified_)return oi(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const n=r.copy_;let i=n,o=!1;3===r.type_&&(i=new Set(n),n.clear(),o=!0),Fr(i,((i,s)=>ii(t,r,n,i,s,e,o))),oi(t,n,!1),e&&t.patches_&&Kr("Patches").generatePatches_(r,e,t.patches_,t.inversePatches_)}return r.copy_}function ii(t,n,e,r,i,o,s){if(i===e&&Pr(5),Mr(i)){const s=ri(t,i,o&&n&&3!==n.type_&&!Lr(n.assigned_,r)?o.concat(r):void 0);if(Br(e,r,s),!Mr(s))return;t.canAutoFreeze_=!1}else s&&e.add(i);if(Tr(i)&&!zr(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;ri(t,i),n&&n.scope_.parent_||"symbol"==typeof r||!Object.prototype.propertyIsEnumerable.call(e,r)||oi(t,i)}}function oi(t,n,e=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&qr(n,e)}var si={get(t,n){if(n===$r)return t;const e=Hr(t);if(!Lr(e,n))return function(t,n,e){const r=ai(n,e);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}(t,e,n);const r=e[n];return t.finalized_||!Tr(r)?r:r===ui(t.base_,n)?(hi(t),t.copy_[n]=li(r,t)):r},has:(t,n)=>n in Hr(t),ownKeys:t=>Reflect.ownKeys(Hr(t)),set(t,n,e){const r=ai(Hr(t),n);if(r?.set)return r.set.call(t.draft_,e),!0;if(!t.modified_){const r=ui(Hr(t),n),s=r?.[$r];if(s&&s.base_===e)return t.copy_[n]=e,t.assigned_[n]=!1,!0;if(((i=e)===(o=r)?0!==i||1/i==1/o:i!=i&&o!=o)&&(void 0!==e||Lr(t.base_,n)))return!0;hi(t),fi(t)}var i,o;return t.copy_[n]===e&&(void 0!==e||n in t.copy_)||Number.isNaN(e)&&Number.isNaN(t.copy_[n])||(t.copy_[n]=e,t.assigned_[n]=!0),!0},deleteProperty:(t,n)=>(void 0!==ui(t.base_,n)||n in t.base_?(t.assigned_[n]=!1,hi(t),fi(t)):delete t.assigned_[n],t.copy_&&delete t.copy_[n],!0),getOwnPropertyDescriptor(t,n){const e=Hr(t),r=Reflect.getOwnPropertyDescriptor(e,n);return r?{writable:!0,configurable:1!==t.type_||"length"!==n,enumerable:r.enumerable,value:e[n]}:r},defineProperty(){Pr(11)},getPrototypeOf:t=>Cr(t.base_),setPrototypeOf(){Pr(12)}},ci={};function ui(t,n){const e=t[$r];return(e?Hr(e):t)[n]}function ai(t,n){if(!(n in t))return;let e=Cr(t);for(;e;){const t=Object.getOwnPropertyDescriptor(e,n);if(t)return t;e=Cr(e)}}function fi(t){t.modified_||(t.modified_=!0,t.parent_&&fi(t.parent_))}function hi(t){t.copy_||(t.copy_=Vr(t.base_,t.scope_.immer_.useStrictShallowCopy_))}Fr(si,((t,n)=>{ci[t]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}})),ci.deleteProperty=function(t,n){return isNaN(parseInt(n))&&Pr(13),ci.set.call(this,t,n,void 0)},ci.set=function(t,n,e){return"length"!==n&&isNaN(parseInt(n))&&Pr(14),si.set.call(this,t[0],n,e,t[0])};function li(t,n){const e=Ur(t)?Kr("MapSet").proxyMap_(t,n):Dr(t)?Kr("MapSet").proxySet_(t,n):function(t,n){const e=Array.isArray(t),r={type_:e?1:0,scope_:n?n.scope_:Jr(),modified_:!1,finalized_:!1,assigned_:{},parent_:n,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=si;e&&(i=[r],o=ci);const{revoke:s,proxy:c}=Proxy.revocable(i,o);return r.draft_=c,r.revoke_=s,c}(t,n);return(n?n.scope_:Jr()).drafts_.push(e),e}function di(t){if(!Tr(t)||zr(t))return t;const n=t[$r];let e;if(n){if(!n.modified_)return n.base_;n.finalized_=!0,e=Vr(t,n.scope_.immer_.useStrictShallowCopy_)}else e=Vr(t,!0);return Fr(e,((t,n)=>{Br(e,t,di(n))})),n&&(n.finalized_=!1),e}var vi=new class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,e)=>{if("function"==typeof t&&"function"!=typeof n){const e=n;n=t;const r=this;return function(t=e,...i){return r.produce(t,(t=>n.call(this,t,...i)))}}let r;if("function"!=typeof n&&Pr(6),void 0!==e&&"function"!=typeof e&&Pr(7),Tr(t)){const i=ti(this),o=li(t,void 0);let s=!0;try{r=n(o),s=!1}finally{s?Xr(i):Zr(i)}return Qr(i,e),ei(r,i)}if(!t||"object"!=typeof t){if(r=n(t),void 0===r&&(r=t),r===_r&&(r=void 0),this.autoFreeze_&&qr(r,!0),e){const n=[],i=[];Kr("Patches").generateReplacementPatches_(t,r,n,i),e(n,i)}return r}Pr(1,t)},this.produceWithPatches=(t,n)=>{if("function"==typeof t)return(n,...e)=>this.produceWithPatches(n,(n=>t(n,...e)));let e,r;return[this.produce(t,n,((t,n)=>{e=t,r=n})),e,r]},"boolean"==typeof t?.autoFreeze&&this.setAutoFreeze(t.autoFreeze),"boolean"==typeof t?.useStrictShallowCopy&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Tr(t)||Pr(8),Mr(t)&&(t=function(t){Mr(t)||Pr(10,t);return di(t)}(t));const n=ti(this),e=li(t,void 0);return e[$r].isManual_=!0,Zr(n),e}finishDraft(t,n){const e=t&&t[$r];e&&e.isManual_||Pr(9);const{scope_:r}=e;return Qr(r,n),ei(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,n){let e;for(e=n.length-1;e>=0;e--){const r=n[e];if(0===r.path.length&&"replace"===r.op){t=r.value;break}}e>-1&&(n=n.slice(e+1));const r=Kr("Patches").applyPatches_;return Mr(t)?r(t,n):this.produce(t,(t=>r(t,n)))}},pi=vi.produce;vi.produceWithPatches.bind(vi),vi.setAutoFreeze.bind(vi),vi.setUseStrictShallowCopy.bind(vi),vi.applyPatches.bind(vi),vi.createDraft.bind(vi),vi.finishDraft.bind(vi);const bi="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?Ar:Ar.apply(null,arguments)};const yi=new class{constructor(){this.action=new Map,this.subscriptions=new Set}init(t,n=!0){var e,r,i;this.store=(e=(n=t,e)=>pi(n,(t=>{this.lastState=n,this.action.get(e.type)?.(t,e)})),r=n&&bi(),xr(e,r,i)),this.store.subscribe((()=>{const t=this.store.getState();for(const n of this.subscriptions){const e=this.lastState&&n.selector(this.lastState),r=n.selector(t);let i=!1;i="object"==typeof r?ar(e,r):e===r,i||n.listener(r)}}))}register(t,n){this.action.has(t)||this.action.set(t,n)}unregister(t){this.action.delete(t)}get(){return this.store.getState()}select(t,n){const e={prev:t(this.get()),selector:t,listener:n};return this.subscriptions.add(e),()=>this.subscriptions.delete(e)}dispatch(t){"string"==typeof t&&(t={type:t}),this.store.dispatch(t)}once(t,n){n&&this.register(t,n),this.dispatch({type:t}),n&&this.unregister(t)}};yi.init({});const wi={service:{core:void 0,app:void 0,module:void 0,route:void 0,router:void 0,api:void 0,auth:void 0,service:void 0},element:{core:void 0,routerOutlet:void 0},config:undefined};window.$core=wi;wi.service.api=new class{constructor(){this.headers={Accept:"application/json","Content-Type":"application/json"}}async request(t,n={}){if(Array.isArray(t))return await this.handleRequestList(t);let e=Me(t);"string"==typeof e&&(e={url:e}),e.options=e.options||{method:"GET"},e.options.headers=yr({},this.headers,e.options.headers);const r=yi.get().app?.user?.authorization;if(r&&(e.options.headers.Authorization=r),n.exceptions=n.exceptions||new Set,n.exceptions.has(e.url))return{};n.exceptions.add(e.url);const i=await fetch(e.url,e.options),o=await i.json();return await this.extend(o,n)}async handleRequestList(t){let n={};for(const e of t){const t=await this.request(e);yr(n,t)}return n}async extend(t,n={}){if(!1===n.extends)return t;if(!t.extends)return t;const e=t.extends;delete t.extends;const r=await this.request(e,n);return yr(r,t)}async get(t,n){return await this.request({url:t,options:n})}async post(t,n,e){return await this.request({url:t,options:yr({method:"POST",body:JSON.stringify(n)},e)})}};wi.service.app=new class{restrict(t,n){const e=yi.get().app?.[n];if(e?.$restrict?.length&&!e?.$restrict.includes(t))throw new Error(`[${t}] does not have permission to write to [${n}]`)}create(t){const n=n=>({register:(e,r)=>(wi.service.app.restrict(t,n),yi.register(`[${t}=>${n}] ${e}`,((t,e)=>{t[n]=t[n]||{},r(t[n],e)}))),unregister:e=>yi.unregister(`[${t}:${n}] ${e}`),get:()=>yi.get()[n],select:(t,e)=>yi.select((e=>t(e[n])),e),dispatch(t){"string"==typeof t&&(t={type:t});const e=Me(t);return e.type=`[${n}] ${t.type}`,yi.dispatch(e)},once:(e,r)=>(wi.service.app.restrict(t,n),yi.once(`[${t}=>${n}] ${e}`,r?(t,e)=>{t[n]=t[n]||{},r(t[n],e)}:void 0)),reset(){this.once("reset",(t=>{for(const n of Object.keys(t))delete t[n];t={...Me(t.initialState?.[n])}}))}});return n.router={get current(){return yi.get().router?.current},navigate:(t,n)=>wi.service.router.navigate(t,n),resolve:t=>wi.service.router.resolve(t)},n.user={hasPermissions:t=>wi.service.auth.hasPermissions(t),hasAnyPermission:t=>wi.service.auth.hasAnyPermission(t),get profile(){return wi.service.auth.getProfile()}},n.api={request:(t,n)=>wi.service.api.request(t,n),get:(t,n)=>wi.service.api.get(t,n),post:(t,n,e)=>wi.service.api.post(t,n,e)},n.service=async t=>{const n=wi.service.service.service[t];if("function"==typeof n)return await n()},n.import=async(n,e)=>{const r=await wi.service.module.import(n);return e&&await wi.service.module.exec(t,r.default,e),r},n.exec=async(n,e)=>{await wi.service.module.exec(t,n,e)},n}};wi.service.auth=new class{getProfile(){return yi.get().user?.profile}hasPermission(t){if(!t)return!1;const n=yi.get().user?.permissions;return!!n?.length&&n.includes(t.trim())}hasPermissions(t){if(!t?.length)return!1;for(const n of t)if(!this.hasPermission(n))return!1;return!0}hasAnyPermission(t){if(!t?.length)return!1;for(const n of t)if(this.hasPermission(n))return!0;return!1}};wi.service.core=new class{constructor(){this.initialized=!1}get state(){return yi.get()}async init(t){if(this.initialized)return void console.warn("Mulitple cores services requested. Only the first core will be used.");this.initialized=!0;let n={};t&&(n=await wi.service.api.get(t)),wi.config=n,yi.initial=n.state,yi.once("[core] init",(t=>{for(const[e,r]of Object.entries(n?.state||{}))t[e]=r})),wi.service.router.init(),wi.service.service.init()}};wi.service.module=new class{constructor(){this.lib=new Map}async import(t){let n=this.lib.get(t);return n||(n=await import(t),this.lib.set(t,n)),n}async exec(t,n,e){return await n({...e,app:wi.service.app.create(t)})}};wi.service.route=new class{constructor(){this.pathMatchIndex=new Map}async configure(t){for(const[n,e]of Object.entries(t))e.path=e.path||n,e.match=e.path.split("/").filter((t=>!!t));this.createPathIndex(t)}createPathIndex(t){const n=Object.entries(t).map((t=>({key:t[0],match:t[1].match||[]})));n.sort(((t,n)=>this.getMatchPriority(t.match,n.match)));for(const t of n)this.pathMatchIndex.set(t.match,t.key)}getMatchRoute(t){if(!t)return;let n=t.split("?")[0].split("#")[0];for(const t of this.pathMatchIndex.keys())if(this.matchPath(n,t))return this.pathMatchIndex.get(t)}getMatchPriority(t,n){let e=0;for(;;){const r=t[e],i=n[e];if(!r&&!i)return 0;if(!r)return-1;if(!i)return 1;if("*"===r&&"*"===i)return 0;if("*"===r)return 1;if("*"===i)return-1;const o=r.substring(0,1),s=i.substring(0,1);if(":"===o&&":"===s)return 0;if(":"===o)return 1;if(":"===s)return-1;if(r>i)return-1;if(r<i)return 1;e++}}matchPath(t,n){const e=t.split("/").filter((t=>!!t));if(n.length>e.length)return!1;for(let t=0;t<e.length;t++){const r=e[t],i=n[t];if(!i)return!1;if("*"===i)return!0;if(":"!==i.substring(0,1)&&r!==i)return!1}return!0}getPathParams(t,n){const e=yi.get().route?.[t],r=(e?.path||t).split("/"),i=n.split("/"),o={};for(let t=0;t<r.length;t++){const n=r[t],e=i[t];n.startsWith(":")&&(o[n.substring(1)]=e)}return o}};var mi=/([:*])(\w+)/g,gi="([^/]+)",ji=/\*/g,Oi="?(?:.*)",Si=/\/\?/g,xi="/?([^/]+|)",Ai="(?:/^|^)",_i="";function ki(t){return void 0===t&&(t="/"),Fi()?location.pathname+location.search+location.hash:t}function $i(t){return t.replace(/\/+$/,"").replace(/^\/+/,"")}function Ei(t){return"string"==typeof t}function Pi(t){return t&&t.indexOf("#")>=0&&t.split("#").pop()||""}function Ci(t){var n=$i(t).split(/\?(.*)?$/);return[$i(n[0]),n.slice(1).join("")]}function Mi(t){for(var n={},e=t.split("&"),r=0;r<e.length;r++){var i=e[r].split("=");if(""!==i[0]){var o=decodeURIComponent(i[0]);n[o]?(Array.isArray(n[o])||(n[o]=[n[o]]),n[o].push(decodeURIComponent(i[1]||""))):n[o]=decodeURIComponent(i[1]||"")}}return n}function Ti(t,n){var e,r=Ci($i(t.currentLocationPath)),i=r[0],o=r[1],s=""===o?null:Mi(o),c=[];if(Ei(n.path)){if(e=Ai+$i(n.path).replace(mi,(function(t,n,e){return c.push(e),gi})).replace(ji,Oi).replace(Si,xi)+"$",""===$i(n.path)&&""===$i(i))return{url:i,queryString:o,hashString:Pi(t.to),route:n,data:null,params:s}}else e=n.path;var u=new RegExp(e,_i),a=i.match(u);if(a){var f=Ei(n.path)?function(t,n){return 0===n.length?null:t?t.slice(1,t.length).reduce((function(t,e,r){return null===t&&(t={}),t[n[r]]=decodeURIComponent(e),t}),null):null}(a,c):a.groups?a.groups:a.slice(1);return{url:$i(i.replace(new RegExp("^"+t.instance.root),"")),queryString:o,hashString:Pi(t.to),route:n,data:f,params:s}}return!1}function Ii(){return!("undefined"==typeof window||!window.history||!window.history.pushState)}function Ri(t,n){return void 0===t[n]||!0===t[n]}function Fi(){return"undefined"!=typeof window}function Ni(t,n){return void 0===t&&(t=[]),void 0===n&&(n={}),t.filter((function(t){return t})).forEach((function(t){["before","after","already","leave"].forEach((function(e){t[e]&&(n[e]||(n[e]=[]),n[e].push(t[e]))}))})),n}function Li(t,n,e){var r=n||{},i=0;!function n(){t[i]?Array.isArray(t[i])?(t.splice.apply(t,[i,1].concat(t[i][0](r)?t[i][1]:t[i][2])),n()):t[i](r,(function(t){void 0===t||!0===t?(i+=1,n()):e&&e(r)})):e&&e(r)}()}function Bi(t,n){void 0===t.currentLocationPath&&(t.currentLocationPath=t.to=ki(t.instance.root)),t.currentLocationPath=t.instance._checkForAHash(t.currentLocationPath),n()}function Ui(t,n){for(var e=0;e<t.instance.routes.length;e++){var r=Ti(t,t.instance.routes[e]);if(r&&(t.matches||(t.matches=[]),t.matches.push(r),"ONE"===t.resolveOptions.strategy))return void n()}n()}function Di(t,n){t.navigateOptions&&(void 0!==t.navigateOptions.shouldResolve&&console.warn('"shouldResolve" is deprecated. Please check the documentation.'),void 0!==t.navigateOptions.silent&&console.warn('"silent" is deprecated. Please check the documentation.')),n()}function Hi(t,n){!0===t.navigateOptions.force?(t.instance._setCurrent([t.instance._pathToMatchObject(t.to)]),n(!1)):n()}Li.if=function(t,n,e){return Array.isArray(n)||(n=[n]),Array.isArray(e)||(e=[e]),[t,n,e]};var Vi=Fi(),qi=Ii();function Wi(t,n){if(Ri(t.navigateOptions,"updateBrowserURL")){var e=("/"+t.to).replace(/\/\//g,"/"),r=Vi&&t.resolveOptions&&!0===t.resolveOptions.hash;qi?(history[t.navigateOptions.historyAPIMethod||"pushState"](t.navigateOptions.stateObj||{},t.navigateOptions.title||"",r?"#"+e:e),location&&location.hash&&(t.instance.o=!0,setTimeout((function(){if(!r){var n=location.hash;location.hash="",location.hash=n}t.instance.o=!1}),1))):Vi&&(window.location.href=t.to)}n()}function zi(t,n){var e=t.instance;e.lastResolved()?Li(e.lastResolved().map((function(n){return function(e,r){if(n.route.hooks&&n.route.hooks.leave){var i=!1,o=t.instance.matchLocation(n.route.path,t.currentLocationPath,!1);if("*"!==n.route.path)i=!o;else i=!(!!t.matches&&t.matches.find((function(t){return n.route.path===t.route.path})));Ri(t.navigateOptions,"callHooks")&&i?Li(n.route.hooks.leave.map((function(n){return function(e,r){return n((function(n){!1===n?t.instance.u(t):r()}),t.matches&&t.matches.length>0?1===t.matches.length?t.matches[0]:t.matches:void 0)}})).concat([function(){return r()}])):r()}else r()}})),{},(function(){return n()})):n()}function Yi(t,n){Ri(t.navigateOptions,"updateState")&&t.instance._setCurrent(t.matches),n()}var Gi=[function(t,n){var e=t.instance.lastResolved();if(e&&e[0]&&e[0].route===t.match.route&&e[0].url===t.match.url&&e[0].queryString===t.match.queryString)return e.forEach((function(n){n.route.hooks&&n.route.hooks.already&&Ri(t.navigateOptions,"callHooks")&&n.route.hooks.already.forEach((function(n){return n(t.match)}))})),void n(!1);n()},function(t,n){t.match.route.hooks&&t.match.route.hooks.before&&Ri(t.navigateOptions,"callHooks")?Li(t.match.route.hooks.before.map((function(n){return function(e,r){return n((function(n){!1===n?t.instance.u(t):r()}),t.match)}})).concat([function(){return n()}])):n()},function(t,n){Ri(t.navigateOptions,"callHandler")&&t.match.route.handler(t.match),t.instance.updatePageLinks(),n()},function(t,n){t.match.route.hooks&&t.match.route.hooks.after&&Ri(t.navigateOptions,"callHooks")&&t.match.route.hooks.after.forEach((function(n){return n(t.match)})),n()}],Ki=[zi,function(t,n){var e=t.instance._notFoundRoute;if(e){t.notFoundHandled=!0;var r=Ci(t.currentLocationPath),i=r[0],o=r[1],s=Pi(t.to);e.path=$i(i);var c={url:e.path,queryString:o,hashString:s,data:null,route:e,params:""!==o?Mi(o):null};t.matches=[c],t.match=c}n()},Li.if((function(t){return t.notFoundHandled}),Gi.concat([Yi]),[function(t,n){t.resolveOptions&&!1!==t.resolveOptions.noMatchWarning&&void 0!==t.resolveOptions.noMatchWarning||console.warn('Navigo: "'+t.currentLocationPath+"\" didn't match any of the registered routes."),n()},function(t,n){t.instance._setCurrent(null),n()}])];function Ji(){return Ji=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Ji.apply(this,arguments)}function Qi(t,n){var e=0;zi(t,(function r(){e!==t.matches.length?Li(Gi,Ji({},t,{match:t.matches[e]}),(function(){e+=1,r()})):Yi(t,n)}))}function Xi(t){t.instance.u(t)}function Zi(){return Zi=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Zi.apply(this,arguments)}var to="[data-navigo]";function no(t,n){var e,r=n||{strategy:"ONE",hash:!1,noMatchWarning:!1,linksSelector:to},i=this,o="/",s=null,c=[],u=!1,a=Ii(),f=Fi();function h(t){return t.indexOf("#")>=0&&(t=!0===r.hash?t.split("#")[1]||"/":t.split("#")[0]),t}function l(t){return $i(o+"/"+$i(t))}function d(t,n,e,r){return t=Ei(t)?l(t):t,{name:r||$i(String(t)),path:t,handler:n,hooks:Ni(e)}}function v(t,n){if(!i.h){i.h=!0,t=t?$i(o)+"/"+$i(t):void 0;var e={instance:i,to:t,currentLocationPath:t,navigateOptions:{},resolveOptions:Zi({},r,n)};return Li([Bi,Ui,Li.if((function(t){var n=t.matches;return n&&n.length>0}),Qi,Ki)],e,Xi),!!e.matches&&e.matches}i.l.push((function(){return i.resolve(t,n)}))}function p(t,n){if(i.h)i.l.push((function(){return i.navigate(t,n)}));else{i.h=!0,t=$i(o)+"/"+$i(t);var e={instance:i,to:t,navigateOptions:n||{},resolveOptions:n&&n.resolveOptions?n.resolveOptions:r,currentLocationPath:h(t)};Li([Di,Hi,Ui,Li.if((function(t){var n=t.matches;return n&&n.length>0}),Qi,Ki),Wi,Xi],e,Xi)}}function b(){if(f)return function(){if(f)return[].slice.call(document.querySelectorAll(r.linksSelector||to));return[]}().forEach((function(t){"false"!==t.getAttribute("data-navigo")&&"_blank"!==t.getAttribute("target")?t.hasListenerAttached||(t.hasListenerAttached=!0,t.navigoHandler=function(n){if((n.ctrlKey||n.metaKey)&&"a"===n.target.tagName.toLowerCase())return!1;var e=t.getAttribute("href");if(null==e)return!1;if(e.match(/^(http|https)/)&&"undefined"!=typeof URL)try{var r=new URL(e);e=r.pathname+r.search}catch(t){}var o=function(t){if(!t)return{};var n,e=t.split(","),r={};return e.forEach((function(t){var e=t.split(":").map((function(t){return t.replace(/(^ +| +$)/g,"")}));switch(e[0]){case"historyAPIMethod":r.historyAPIMethod=e[1];break;case"resolveOptionsStrategy":n||(n={}),n.strategy=e[1];break;case"resolveOptionsHash":n||(n={}),n.hash="true"===e[1];break;case"updateBrowserURL":case"callHandler":case"updateState":case"force":r[e[0]]="true"===e[1]}})),n&&(r.resolveOptions=n),r}(t.getAttribute("data-navigo-options"));u||(n.preventDefault(),n.stopPropagation(),i.navigate($i(e),o))},t.addEventListener("click",t.navigoHandler)):t.hasListenerAttached&&t.removeEventListener("click",t.navigoHandler)})),i}function y(t,n,e){var r=c.find((function(n){return n.name===t})),i=null;if(r){if(i=r.path,n)for(var s in n)i=i.replace(":"+s,n[s]);i=i.match(/^\//)?i:"/"+i}return i&&e&&!e.includeRoot&&(i=i.replace(new RegExp("^/"+o),"")),i}function w(t){var n=Ci($i(t)),r=n[0],i=n[1],o=""===i?null:Mi(i);return{url:r,queryString:i,hashString:Pi(t),route:d(r,(function(){}),[e],r),data:null,params:o}}function m(t,n,e){return"string"==typeof n&&(n=g(n)),n?(n.hooks[t]||(n.hooks[t]=[]),n.hooks[t].push(e),function(){n.hooks[t]=n.hooks[t].filter((function(t){return t!==e}))}):(console.warn("Route doesn't exists: "+n),function(){})}function g(t){return"string"==typeof t?c.find((function(n){return n.name===l(t)})):c.find((function(n){return n.handler===t}))}t?o=$i(t):console.warn('Navigo requires a root path in its constructor. If not provided will use "/" as default.'),this.root=o,this.routes=c,this.destroyed=u,this.current=s,this.o=!1,this.l=[],this.h=!1,this.u=function(t){t.instance.h=!1,t.instance.l.length>0&&t.instance.l.shift()()},this.on=function(t,n,r){var i=this;return"object"!=typeof t||t instanceof RegExp?("function"==typeof t&&(r=n,n=t,t=o),c.push(d(t,n,[e,r])),this):(Object.keys(t).forEach((function(n){if("function"==typeof t[n])i.on(n,t[n]);else{var r=t[n],o=r.uses,s=r.as,u=r.hooks;c.push(d(n,o,[e,u],s))}})),this)},this.off=function(t){return this.routes=c=c.filter((function(n){return Ei(t)?$i(n.path)!==$i(t):"function"==typeof t?t!==n.handler:String(n.path)!==String(t)})),this},this.resolve=v,this.navigate=p,this.navigateByName=function(t,n,e){var r=y(t,n);return null!==r&&(p(r.replace(new RegExp("^/?"+o),""),e),!0)},this.destroy=function(){this.routes=c=[],a&&window.removeEventListener("popstate",this.v),this.destroyed=u=!0},this.notFound=function(t,n){return i._notFoundRoute=d("*",t,[e,n],"__NOT_FOUND__"),this},this.updatePageLinks=b,this.link=function(t){return"/"+o+"/"+$i(t)},this.hooks=function(t){return e=t,this},this.extractGETParameters=function(t){return Ci(h(t))},this.lastResolved=function(){return s},this.generate=y,this.getLinkPath=function(t){return t.getAttribute("href")},this.match=function(t){var n={instance:i,currentLocationPath:t,to:t,navigateOptions:{},resolveOptions:r};return Ui(n,(function(){})),!!n.matches&&n.matches},this.matchLocation=function(t,n,e){void 0===n||void 0!==e&&!e||(n=l(n));var r={instance:i,to:n,currentLocationPath:n};Bi(r,(function(){})),"string"==typeof t&&(t=void 0===e||e?l(t):t);var o=Ti(r,{name:String(t),path:t,handler:function(){},hooks:{}});return o||!1},this.getCurrentLocation=function(){return w($i(ki(o)).replace(new RegExp("^"+o),""))},this.addBeforeHook=m.bind(this,"before"),this.addAfterHook=m.bind(this,"after"),this.addAlreadyHook=m.bind(this,"already"),this.addLeaveHook=m.bind(this,"leave"),this.getRoute=g,this._pathToMatchObject=w,this._clean=$i,this._checkForAHash=h,this._setCurrent=function(t){return s=i.current=t},function(){a&&(this.v=function(){i.o||v()},window.addEventListener("popstate",this.v))}.call(this),b.call(this)}wi.service.router=new class{get fallback(){return yi.get().app?.router?.fallback}get url(){return window.location.href.substring(window.location.origin.length)}init(){wi.config?.route&&wi.service.route.configure(wi.config?.route),window.removeEventListener("popstate",(()=>this.handlePopState)),this.navigo=new no(yi.get().router?.root||"/"),this.navigo.notFound((t=>{this.resolveRouteParts("/"+t.url,t.queryString,t.hashString)}))}handlePopState(t){this.popStateDelay&&clearTimeout(this.popStateDelay),this.popStateDelay=setTimeout((()=>{this.resolve(),this.popStateDelay=void 0}),100)}async resolve(t){t||(t=this.url);const n=this.parse(t);await this.resolveRouteParts(n.path,n.search,n.hash)}async resolveRouteParts(t,n,e){if(await this.redirectInvalidRoute(t))return;const r={path:t,hash:e};if(n){r.query={};const t=new URLSearchParams(n);for(const[n,e]of t)r.query[n]=e}const i=wi.service.route.getMatchRoute(t);r.routeId=i,r.params=wi.service.route.getPathParams(i,t),yi.once(`[resolve] ${t}`,(t=>{const n=t.router?.current?.count||0;t.router=t.router||{},t.router.current=r,t.router.current.count=n+1})),this.handleRouteRender(i)}parse(t){t.startsWith("/")&&(t=window.location.origin+t);const n=new URL(t);return{path:n.pathname,search:n.search,hash:n.hash}}async navigate(t,n){await this.redirectInvalidRoute(t)||this.navigo.navigate(t,n)}async redirectInvalidRoute(t){if(!t)return console.log("no-path"),yi.dispatch(`[resolve:404] ${t}`),this.navigate("/error/404"),!0;const n=wi.service.route.getMatchRoute(t);if(!n)return yi.dispatch(`[resolve:404] ${t}`),this.navigate("/error/404"),!0;const e=yi.get().user,r=wi.config.route?.[n];return r?.auth&&!e?.authenticated||r?.permissions?.length&&(await this.waitForUserPermissions(),!wi.service.auth.hasPermissions(r.permissions))?(yi.dispatch(`[resolve:401] ${t}`),this.navigate("/error/401"),!0):void 0}async waitForUserPermissions(){const t=yi.get()?.user;t?.authenticated&&(t?.profile?.id||await new Promise((t=>{const n=yi.select((t=>t?.user?.profile?.id),(()=>{t(n),n()}))})))}handleRouteRender(t){const n=wi.config?.route?.[t]||{},e={app:Me(n.app)}||{};for(const[t,r]of Object.entries(n))t.startsWith("app.")&&wr(e,t,r);for(const[t,n]of Object.entries(e?.app||{}))yi.once(`[route=>${t}]`,(e=>{yr(e[t],n)}))}};wi.service.service=new class{constructor(){this.service={}}async init(){await Promise.all(Object.entries(wi.config.service||{}).map((([t,n])=>this.createService(t,n))))}async createService(t,n){if(!n.module)throw new Error(`invalid-service:${t}`);const e=(await import(n.module)).default;if(!e)return;const r=wi.service.app.create(t);if("function"!=typeof e)return this.configureLegacyInstance(t,n,e);const i=Me(n.config),o=()=>e({id:t,config:i,util:{merge:yr,rescope:async n=>(n.id=t,n.config=yr({},n.config,i),n.app=r,await(n.init?.()),n)},app:r});this.service[t]=o;return await o()}async configureLegacyInstance(t,n,e){return e.app=wi.service.app.create(t),this.service[t]=e,yr({},e.config,n),await(e.init?.()),e}};const eo=function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof global)return global;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;try{return new Function("return this")()}catch(t){return{}}}();void 0===eo.trustedTypes&&(eo.trustedTypes={createPolicy:(t,n)=>n});const ro={configurable:!1,enumerable:!1,writable:!1};void 0===eo.FAST&&Reflect.defineProperty(eo,"FAST",Object.assign({value:Object.create(null)},ro));const io=eo.FAST;if(void 0===io.getById){const t=Object.create(null);Reflect.defineProperty(io,"getById",Object.assign({value(n,e){let r=t[n];return void 0===r&&(r=e?t[n]=e():null),r}},ro))}function oo(){const t=new WeakMap;return function(n){let e=t.get(n);if(void 0===e){let r=Reflect.getPrototypeOf(n);for(;void 0===e&&null!==r;)e=t.get(r),r=Reflect.getPrototypeOf(r);e=void 0===e?[]:e.slice(0),t.set(n,e)}return e}}Object.freeze([]);const so=eo.FAST.getById(1,(()=>{const t=[],n=[];function e(){if(n.length)throw n.shift()}function r(t){try{t.call()}catch(t){n.push(t),setTimeout(e,0)}}function i(){let n=0;for(;n<t.length;)if(r(t[n]),n++,n>1024){for(let e=0,r=t.length-n;e<r;e++)t[e]=t[e+n];t.length-=n,n=0}t.length=0}return Object.freeze({enqueue:function(n){t.length<1&&eo.requestAnimationFrame(i),t.push(n)},process:i})})),co=eo.trustedTypes.createPolicy("fast-html",{createHTML:t=>t});let uo=co;const ao=`fast-${Math.random().toString(36).substring(2,8)}`,fo=`${ao}{`,ho=`}${ao}`,lo=Object.freeze({supportsAdoptedStyleSheets:Array.isArray(document.adoptedStyleSheets)&&"replace"in CSSStyleSheet.prototype,setHTMLPolicy(t){if(uo!==co)throw new Error("The HTML policy can only be set once.");uo=t},createHTML:t=>uo.createHTML(t),isMarker:t=>t&&8===t.nodeType&&t.data.startsWith(ao),extractDirectiveIndexFromMarker:t=>parseInt(t.data.replace(`${ao}:`,"")),createInterpolationPlaceholder:t=>`${fo}${t}${ho}`,createCustomAttributePlaceholder(t,n){return`${t}="${this.createInterpolationPlaceholder(n)}"`},createBlockPlaceholder:t=>`\x3c!--${ao}:${t}--\x3e`,queueUpdate:so.enqueue,processUpdates:so.process,nextUpdate:()=>new Promise(so.enqueue),setAttribute(t,n,e){null==e?t.removeAttribute(n):t.setAttribute(n,e)},setBooleanAttribute(t,n,e){e?t.setAttribute(n,""):t.removeAttribute(n)},removeChildNodes(t){for(let n=t.firstChild;null!==n;n=t.firstChild)t.removeChild(n)},createTemplateWalker:t=>document.createTreeWalker(t,133,null,!1)});class vo{constructor(t,n){this.sub1=void 0,this.sub2=void 0,this.spillover=void 0,this.source=t,this.sub1=n}has(t){return void 0===this.spillover?this.sub1===t||this.sub2===t:-1!==this.spillover.indexOf(t)}subscribe(t){const n=this.spillover;if(void 0===n){if(this.has(t))return;if(void 0===this.sub1)return void(this.sub1=t);if(void 0===this.sub2)return void(this.sub2=t);this.spillover=[this.sub1,this.sub2,t],this.sub1=void 0,this.sub2=void 0}else{-1===n.indexOf(t)&&n.push(t)}}unsubscribe(t){const n=this.spillover;if(void 0===n)this.sub1===t?this.sub1=void 0:this.sub2===t&&(this.sub2=void 0);else{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}notify(t){const n=this.spillover,e=this.source;if(void 0===n){const n=this.sub1,r=this.sub2;void 0!==n&&n.handleChange(e,t),void 0!==r&&r.handleChange(e,t)}else for(let r=0,i=n.length;r<i;++r)n[r].handleChange(e,t)}}class po{constructor(t){this.subscribers={},this.sourceSubscribers=null,this.source=t}notify(t){var n;const e=this.subscribers[t];void 0!==e&&e.notify(t),null===(n=this.sourceSubscribers)||void 0===n||n.notify(t)}subscribe(t,n){var e;if(n){let e=this.subscribers[n];void 0===e&&(this.subscribers[n]=e=new vo(this.source)),e.subscribe(t)}else this.sourceSubscribers=null!==(e=this.sourceSubscribers)&&void 0!==e?e:new vo(this.source),this.sourceSubscribers.subscribe(t)}unsubscribe(t,n){var e;if(n){const e=this.subscribers[n];void 0!==e&&e.unsubscribe(t)}else null===(e=this.sourceSubscribers)||void 0===e||e.unsubscribe(t)}}const bo=io.getById(2,(()=>{const t=/(:|&&|\|\||if)/,n=new WeakMap,e=lo.queueUpdate;let r,i=t=>{throw new Error("Must call enableArrayObservation before observing arrays.")};function o(t){let e=t.$fastController||n.get(t);return void 0===e&&(Array.isArray(t)?e=i(t):n.set(t,e=new po(t))),e}const s=oo();class c{constructor(t){this.name=t,this.field=`_${t}`,this.callback=`${t}Changed`}getValue(t){return void 0!==r&&r.watch(t,this.name),t[this.field]}setValue(t,n){const e=this.field,r=t[e];if(r!==n){t[e]=n;const i=t[this.callback];"function"==typeof i&&i.call(t,r,n),o(t).notify(this.name)}}}class u extends vo{constructor(t,n,e=!1){super(t,n),this.binding=t,this.isVolatileBinding=e,this.needsRefresh=!0,this.needsQueue=!0,this.first=this,this.last=null,this.propertySource=void 0,this.propertyName=void 0,this.notifier=void 0,this.next=void 0}observe(t,n){this.needsRefresh&&null!==this.last&&this.disconnect();const e=r;r=this.needsRefresh?this:void 0,this.needsRefresh=this.isVolatileBinding;const i=this.binding(t,n);return r=e,i}disconnect(){if(null!==this.last){let t=this.first;for(;void 0!==t;)t.notifier.unsubscribe(this,t.propertyName),t=t.next;this.last=null,this.needsRefresh=this.needsQueue=!0}}watch(t,n){const e=this.last,i=o(t),s=null===e?this.first:{};if(s.propertySource=t,s.propertyName=n,s.notifier=i,i.subscribe(this,n),null!==e){if(!this.needsRefresh){let n;r=void 0,n=e.propertySource[e.propertyName],r=this,t===n&&(this.needsRefresh=!0)}e.next=s}this.last=s}handleChange(){this.needsQueue&&(this.needsQueue=!1,e(this))}call(){null!==this.last&&(this.needsQueue=!0,this.notify(this))}records(){let t=this.first;return{next:()=>{const n=t;return void 0===n?{value:void 0,done:!0}:(t=t.next,{value:n,done:!1})},[Symbol.iterator]:function(){return this}}}}return Object.freeze({setArrayObserverFactory(t){i=t},getNotifier:o,track(t,n){void 0!==r&&r.watch(t,n)},trackVolatile(){void 0!==r&&(r.needsRefresh=!0)},notify(t,n){o(t).notify(n)},defineProperty(t,n){"string"==typeof n&&(n=new c(n)),s(t).push(n),Reflect.defineProperty(t,n.name,{enumerable:!0,get:function(){return n.getValue(this)},set:function(t){n.setValue(this,t)}})},getAccessors:s,binding(t,n,e=this.isVolatileBinding(t)){return new u(t,n,e)},isVolatileBinding:n=>t.test(n.toString())})})),yo=io.getById(3,(()=>{let t=null;return{get:()=>t,set(n){t=n}}}));class wo{constructor(){this.index=0,this.length=0,this.parent=null,this.parentContext=null}get event(){return yo.get()}get isEven(){return this.index%2==0}get isOdd(){return this.index%2!=0}get isFirst(){return 0===this.index}get isInMiddle(){return!this.isFirst&&!this.isLast}get isLast(){return this.index===this.length-1}static setEvent(t){yo.set(t)}}bo.defineProperty(wo.prototype,"index"),bo.defineProperty(wo.prototype,"length");const mo=Object.seal(new wo);class go{constructor(){this.targetIndex=0}}class jo extends go{constructor(){super(...arguments),this.createPlaceholder=lo.createInterpolationPlaceholder}}function Oo(t,n){this.source=t,this.context=n,null===this.bindingObserver&&(this.bindingObserver=bo.binding(this.binding,this,this.isBindingVolatile)),this.updateTarget(this.bindingObserver.observe(t,n))}function So(t,n){this.source=t,this.context=n,this.target.addEventListener(this.targetName,this)}function xo(){this.bindingObserver.disconnect(),this.source=null,this.context=null}function Ao(){this.bindingObserver.disconnect(),this.source=null,this.context=null;const t=this.target.$fastView;void 0!==t&&t.isComposed&&(t.unbind(),t.needsBindOnly=!0)}function _o(){this.target.removeEventListener(this.targetName,this),this.source=null,this.context=null}function ko(t){lo.setAttribute(this.target,this.targetName,t)}function $o(t){lo.setBooleanAttribute(this.target,this.targetName,t)}function Eo(t){if(null==t&&(t=""),t.create){this.target.textContent="";let n=this.target.$fastView;void 0===n?n=t.create():this.target.$fastTemplate!==t&&(n.isComposed&&(n.remove(),n.unbind()),n=t.create()),n.isComposed?n.needsBindOnly&&(n.needsBindOnly=!1,n.bind(this.source,this.context)):(n.isComposed=!0,n.bind(this.source,this.context),n.insertBefore(this.target),this.target.$fastView=n,this.target.$fastTemplate=t)}else{const n=this.target.$fastView;void 0!==n&&n.isComposed&&(n.isComposed=!1,n.remove(),n.needsBindOnly?n.needsBindOnly=!1:n.unbind()),this.target.textContent=t}}function Po(t){this.target[this.targetName]=t}function Co(t){const n=this.classVersions||Object.create(null),e=this.target;let r=this.version||0;if(null!=t&&t.length){const i=t.split(/\s+/);for(let t=0,o=i.length;t<o;++t){const o=i[t];""!==o&&(n[o]=r,e.classList.add(o))}}if(this.classVersions=n,this.version=r+1,0!==r){r-=1;for(const t in n)n[t]===r&&e.classList.remove(t)}}class Mo extends jo{constructor(t){super(),this.binding=t,this.bind=Oo,this.unbind=xo,this.updateTarget=ko,this.isBindingVolatile=bo.isVolatileBinding(this.binding)}get targetName(){return this.originalTargetName}set targetName(t){if(this.originalTargetName=t,void 0!==t)switch(t[0]){case":":if(this.cleanedTargetName=t.substr(1),this.updateTarget=Po,"innerHTML"===this.cleanedTargetName){const t=this.binding;this.binding=(n,e)=>lo.createHTML(t(n,e))}break;case"?":this.cleanedTargetName=t.substr(1),this.updateTarget=$o;break;case"@":this.cleanedTargetName=t.substr(1),this.bind=So,this.unbind=_o;break;default:this.cleanedTargetName=t,"class"===t&&(this.updateTarget=Co)}}targetAtContent(){this.updateTarget=Eo,this.unbind=Ao}createBehavior(t){return new To(t,this.binding,this.isBindingVolatile,this.bind,this.unbind,this.updateTarget,this.cleanedTargetName)}}class To{constructor(t,n,e,r,i,o,s){this.source=null,this.context=null,this.bindingObserver=null,this.target=t,this.binding=n,this.isBindingVolatile=e,this.bind=r,this.unbind=i,this.updateTarget=o,this.targetName=s}handleChange(){this.updateTarget(this.bindingObserver.observe(this.source,this.context))}handleEvent(t){wo.setEvent(t);const n=this.binding(this.source,this.context);wo.setEvent(null),!0!==n&&t.preventDefault()}}let Io=null;class Ro{addFactory(t){t.targetIndex=this.targetIndex,this.behaviorFactories.push(t)}captureContentBinding(t){t.targetAtContent(),this.addFactory(t)}reset(){this.behaviorFactories=[],this.targetIndex=-1}release(){Io=this}static borrow(t){const n=Io||new Ro;return n.directives=t,n.reset(),Io=null,n}}function Fo(t){if(1===t.length)return t[0];let n;const e=t.length,r=t.map((t=>"string"==typeof t?()=>t:(n=t.targetName||n,t.binding))),i=new Mo(((t,n)=>{let i="";for(let o=0;o<e;++o)i+=r[o](t,n);return i}));return i.targetName=n,i}const No=ho.length;function Lo(t,n){const e=n.split(fo);if(1===e.length)return null;const r=[];for(let n=0,i=e.length;n<i;++n){const i=e[n],o=i.indexOf(ho);let s;if(-1===o)s=i;else{const n=parseInt(i.substring(0,o));r.push(t.directives[n]),s=i.substring(o+No)}""!==s&&r.push(s)}return r}function Bo(t,n,e=!1){const r=n.attributes;for(let i=0,o=r.length;i<o;++i){const s=r[i],c=s.value,u=Lo(t,c);let a=null;null===u?e&&(a=new Mo((()=>c)),a.targetName=s.name):a=Fo(u),null!==a&&(n.removeAttributeNode(s),i--,o--,t.addFactory(a))}}function Uo(t,n,e){const r=Lo(t,n.textContent);if(null!==r){let i=n;for(let o=0,s=r.length;o<s;++o){const s=r[o],c=0===o?n:i.parentNode.insertBefore(document.createTextNode(""),i.nextSibling);"string"==typeof s?c.textContent=s:(c.textContent=" ",t.captureContentBinding(s)),i=c,t.targetIndex++,c!==n&&e.nextNode()}t.targetIndex--}}const Do=document.createRange();class Ho{constructor(t,n){this.fragment=t,this.behaviors=n,this.source=null,this.context=null,this.firstChild=t.firstChild,this.lastChild=t.lastChild}appendTo(t){t.appendChild(this.fragment)}insertBefore(t){if(this.fragment.hasChildNodes())t.parentNode.insertBefore(this.fragment,t);else{const n=this.lastChild;if(t.previousSibling===n)return;const e=t.parentNode;let r,i=this.firstChild;for(;i!==n;)r=i.nextSibling,e.insertBefore(i,t),i=r;e.insertBefore(n,t)}}remove(){const t=this.fragment,n=this.lastChild;let e,r=this.firstChild;for(;r!==n;)e=r.nextSibling,t.appendChild(r),r=e;t.appendChild(n)}dispose(){const t=this.firstChild.parentNode,n=this.lastChild;let e,r=this.firstChild;for(;r!==n;)e=r.nextSibling,t.removeChild(r),r=e;t.removeChild(n);const i=this.behaviors,o=this.source;for(let t=0,n=i.length;t<n;++t)i[t].unbind(o)}bind(t,n){const e=this.behaviors;if(this.source!==t)if(null!==this.source){const r=this.source;this.source=t,this.context=n;for(let i=0,o=e.length;i<o;++i){const o=e[i];o.unbind(r),o.bind(t,n)}}else{this.source=t,this.context=n;for(let r=0,i=e.length;r<i;++r)e[r].bind(t,n)}}unbind(){if(null===this.source)return;const t=this.behaviors,n=this.source;for(let e=0,r=t.length;e<r;++e)t[e].unbind(n);this.source=null}static disposeContiguousBatch(t){if(0!==t.length){Do.setStartBefore(t[0].firstChild),Do.setEndAfter(t[t.length-1].lastChild),Do.deleteContents();for(let n=0,e=t.length;n<e;++n){const e=t[n],r=e.behaviors,i=e.source;for(let t=0,n=r.length;t<n;++t)r[t].unbind(i)}}}}class Vo{constructor(t,n){this.behaviorCount=0,this.hasHostBehaviors=!1,this.fragment=null,this.targetOffset=0,this.viewBehaviorFactories=null,this.hostBehaviorFactories=null,this.html=t,this.directives=n}create(t){if(null===this.fragment){let t;const n=this.html;if("string"==typeof n){t=document.createElement("template"),t.innerHTML=lo.createHTML(n);const e=t.content.firstElementChild;null!==e&&"TEMPLATE"===e.tagName&&(t=e)}else t=n;const e=function(t,n){const e=t.content;document.adoptNode(e);const r=Ro.borrow(n);Bo(r,t,!0);const i=r.behaviorFactories;r.reset();const o=lo.createTemplateWalker(e);let s;for(;s=o.nextNode();)switch(r.targetIndex++,s.nodeType){case 1:Bo(r,s);break;case 3:Uo(r,s,o);break;case 8:lo.isMarker(s)&&r.addFactory(n[lo.extractDirectiveIndexFromMarker(s)])}let c=0;(lo.isMarker(e.firstChild)||1===e.childNodes.length&&n.length)&&(e.insertBefore(document.createComment(""),e.firstChild),c=-1);const u=r.behaviorFactories;return r.release(),{fragment:e,viewBehaviorFactories:u,hostBehaviorFactories:i,targetOffset:c}}(t,this.directives);this.fragment=e.fragment,this.viewBehaviorFactories=e.viewBehaviorFactories,this.hostBehaviorFactories=e.hostBehaviorFactories,this.targetOffset=e.targetOffset,this.behaviorCount=this.viewBehaviorFactories.length+this.hostBehaviorFactories.length,this.hasHostBehaviors=this.hostBehaviorFactories.length>0}const n=this.fragment.cloneNode(!0),e=this.viewBehaviorFactories,r=new Array(this.behaviorCount),i=lo.createTemplateWalker(n);let o=0,s=this.targetOffset,c=i.nextNode();for(let t=e.length;o<t;++o){const t=e[o],n=t.targetIndex;for(;null!==c;){if(s===n){r[o]=t.createBehavior(c);break}c=i.nextNode(),s++}}if(this.hasHostBehaviors){const n=this.hostBehaviorFactories;for(let e=0,i=n.length;e<i;++e,++o)r[o]=n[e].createBehavior(t)}return new Ho(n,r)}render(t,n,e){"string"==typeof n&&(n=document.getElementById(n)),void 0===e&&(e=n);const r=this.create(e);return r.bind(t,mo),r.appendTo(n),r}}const qo=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function Wo(t,...n){const e=[];let r="";for(let i=0,o=t.length-1;i<o;++i){const o=t[i];let s=n[i];if(r+=o,s instanceof Vo){const t=s;s=()=>t}if("function"==typeof s&&(s=new Mo(s)),s instanceof jo){const t=qo.exec(o);null!==t&&(s.targetName=t[2])}s instanceof go?(r+=s.createPlaceholder(e.length),e.push(s)):r+=s}return r+=t[t.length-1],new Vo(r,e)}class zo{constructor(){this.targets=new WeakSet}addStylesTo(t){this.targets.add(t)}removeStylesFrom(t){this.targets.delete(t)}isAttachedTo(t){return this.targets.has(t)}withBehaviors(...t){return this.behaviors=null===this.behaviors?t:this.behaviors.concat(t),this}}function Yo(t){return t.map((t=>t instanceof zo?Yo(t.styles):[t])).reduce(((t,n)=>t.concat(n)),[])}function Go(t){return t.map((t=>t instanceof zo?t.behaviors:null)).reduce(((t,n)=>null===n?t:(null===t&&(t=[]),t.concat(n))),null)}zo.create=(()=>{if(lo.supportsAdoptedStyleSheets){const t=new Map;return n=>new Zo(n,t)}return t=>new ns(t)})();const Ko=Symbol("prependToAdoptedStyleSheets");function Jo(t){const n=[],e=[];return t.forEach((t=>(t[Ko]?n:e).push(t))),{prepend:n,append:e}}let Qo=(t,n)=>{const{prepend:e,append:r}=Jo(n);t.adoptedStyleSheets=[...e,...t.adoptedStyleSheets,...r]},Xo=(t,n)=>{t.adoptedStyleSheets=t.adoptedStyleSheets.filter((t=>-1===n.indexOf(t)))};if(lo.supportsAdoptedStyleSheets)try{document.adoptedStyleSheets.push(),document.adoptedStyleSheets.splice(),Qo=(t,n)=>{const{prepend:e,append:r}=Jo(n);t.adoptedStyleSheets.splice(0,0,...e),t.adoptedStyleSheets.push(...r)},Xo=(t,n)=>{for(const e of n){const n=t.adoptedStyleSheets.indexOf(e);-1!==n&&t.adoptedStyleSheets.splice(n,1)}}}catch(t){}class Zo extends zo{constructor(t,n){super(),this.styles=t,this.styleSheetCache=n,this._styleSheets=void 0,this.behaviors=Go(t)}get styleSheets(){if(void 0===this._styleSheets){const t=this.styles,n=this.styleSheetCache;this._styleSheets=Yo(t).map((t=>{if(t instanceof CSSStyleSheet)return t;let e=n.get(t);return void 0===e&&(e=new CSSStyleSheet,e.replaceSync(t),n.set(t,e)),e}))}return this._styleSheets}addStylesTo(t){Qo(t,this.styleSheets),super.addStylesTo(t)}removeStylesFrom(t){Xo(t,this.styleSheets),super.removeStylesFrom(t)}}let ts=0;class ns extends zo{constructor(t){super(),this.styles=t,this.behaviors=null,this.behaviors=Go(t),this.styleSheets=Yo(t),this.styleClass="fast-style-class-"+ ++ts}addStylesTo(t){const n=this.styleSheets,e=this.styleClass;t=this.normalizeTarget(t);for(let r=0;r<n.length;r++){const i=document.createElement("style");i.innerHTML=n[r],i.className=e,t.append(i)}super.addStylesTo(t)}removeStylesFrom(t){const n=(t=this.normalizeTarget(t)).querySelectorAll(`.${this.styleClass}`);for(let e=0,r=n.length;e<r;++e)t.removeChild(n[e]);super.removeStylesFrom(t)}isAttachedTo(t){return super.isAttachedTo(this.normalizeTarget(t))}normalizeTarget(t){return t===document?document.body:t}}const es=Object.freeze({locate:oo()}),rs={toView:t=>t?"true":"false",fromView:t=>null!=t&&"false"!==t&&!1!==t&&0!==t};class is{constructor(t,n,e=n.toLowerCase(),r="reflect",i){this.guards=new Set,this.Owner=t,this.name=n,this.attribute=e,this.mode=r,this.converter=i,this.fieldName=`_${n}`,this.callbackName=`${n}Changed`,this.hasCallback=this.callbackName in t.prototype,"boolean"===r&&void 0===i&&(this.converter=rs)}setValue(t,n){const e=t[this.fieldName],r=this.converter;void 0!==r&&(n=r.fromView(n)),e!==n&&(t[this.fieldName]=n,this.tryReflectToAttribute(t),this.hasCallback&&t[this.callbackName](e,n),t.$fastController.notify(this.name))}getValue(t){return bo.track(t,this.name),t[this.fieldName]}onAttributeChangedCallback(t,n){this.guards.has(t)||(this.guards.add(t),this.setValue(t,n),this.guards.delete(t))}tryReflectToAttribute(t){const n=this.mode,e=this.guards;e.has(t)||"fromView"===n||lo.queueUpdate((()=>{e.add(t);const r=t[this.fieldName];switch(n){case"reflect":const n=this.converter;lo.setAttribute(t,this.attribute,void 0!==n?n.toView(r):r);break;case"boolean":lo.setBooleanAttribute(t,this.attribute,r)}e.delete(t)}))}static collect(t,...n){const e=[];n.push(es.locate(t));for(let r=0,i=n.length;r<i;++r){const i=n[r];if(void 0!==i)for(let n=0,r=i.length;n<r;++n){const r=i[n];"string"==typeof r?e.push(new is(t,r)):e.push(new is(t,r.property,r.attribute,r.mode,r.converter))}}return e}}function os(t,n){let e;function r(t,n){arguments.length>1&&(e.property=n),es.locate(t.constructor).push(e)}return arguments.length>1?(e={},void r(t,n)):(e=void 0===t?{}:t,r)}const ss={mode:"open"},cs={},us=io.getById(4,(()=>{const t=new Map;return Object.freeze({register:n=>!t.has(n.type)&&(t.set(n.type,n),!0),getByType:n=>t.get(n)})}));class as{constructor(t,n=t.definition){"string"==typeof n&&(n={name:n}),this.type=t,this.name=n.name,this.template=n.template;const e=is.collect(t,n.attributes),r=new Array(e.length),i={},o={};for(let t=0,n=e.length;t<n;++t){const n=e[t];r[t]=n.attribute,i[n.name]=n,o[n.attribute]=n}this.attributes=e,this.observedAttributes=r,this.propertyLookup=i,this.attributeLookup=o,this.shadowOptions=void 0===n.shadowOptions?ss:null===n.shadowOptions?void 0:Object.assign(Object.assign({},ss),n.shadowOptions),this.elementOptions=void 0===n.elementOptions?cs:Object.assign(Object.assign({},cs),n.elementOptions),this.styles=void 0===n.styles?void 0:Array.isArray(n.styles)?zo.create(n.styles):n.styles instanceof zo?n.styles:zo.create([n.styles])}get isDefined(){return!!us.getByType(this.type)}define(t=customElements){const n=this.type;if(us.register(this)){const t=this.attributes,e=n.prototype;for(let n=0,r=t.length;n<r;++n)bo.defineProperty(e,t[n]);Reflect.defineProperty(n,"observedAttributes",{value:this.observedAttributes,enumerable:!0})}return t.get(this.name)||t.define(this.name,n,this.elementOptions),this}}as.forType=us.getByType;const fs=new WeakMap,hs={bubbles:!0,composed:!0,cancelable:!0};function ls(t){return t.shadowRoot||fs.get(t)||null}class ds extends po{constructor(t,n){super(t),this.boundObservables=null,this.behaviors=null,this.needsInitialization=!0,this._template=null,this._styles=null,this._isConnected=!1,this.$fastController=this,this.view=null,this.element=t,this.definition=n;const e=n.shadowOptions;if(void 0!==e){const n=t.attachShadow(e);"closed"===e.mode&&fs.set(t,n)}const r=bo.getAccessors(t);if(r.length>0){const n=this.boundObservables=Object.create(null);for(let e=0,i=r.length;e<i;++e){const i=r[e].name,o=t[i];void 0!==o&&(delete t[i],n[i]=o)}}}get isConnected(){return bo.track(this,"isConnected"),this._isConnected}setIsConnected(t){this._isConnected=t,bo.notify(this,"isConnected")}get template(){return this._template}set template(t){this._template!==t&&(this._template=t,this.needsInitialization||this.renderTemplate(t))}get styles(){return this._styles}set styles(t){this._styles!==t&&(null!==this._styles&&this.removeStyles(this._styles),this._styles=t,this.needsInitialization||null===t||this.addStyles(t))}addStyles(t){const n=ls(this.element)||this.element.getRootNode();if(t instanceof HTMLStyleElement)n.append(t);else if(!t.isAttachedTo(n)){const e=t.behaviors;t.addStylesTo(n),null!==e&&this.addBehaviors(e)}}removeStyles(t){const n=ls(this.element)||this.element.getRootNode();if(t instanceof HTMLStyleElement)n.removeChild(t);else if(t.isAttachedTo(n)){const e=t.behaviors;t.removeStylesFrom(n),null!==e&&this.removeBehaviors(e)}}addBehaviors(t){const n=this.behaviors||(this.behaviors=new Map),e=t.length,r=[];for(let i=0;i<e;++i){const e=t[i];n.has(e)?n.set(e,n.get(e)+1):(n.set(e,1),r.push(e))}if(this._isConnected){const t=this.element;for(let n=0;n<r.length;++n)r[n].bind(t,mo)}}removeBehaviors(t,n=!1){const e=this.behaviors;if(null===e)return;const r=t.length,i=[];for(let o=0;o<r;++o){const r=t[o];if(e.has(r)){const t=e.get(r)-1;0===t||n?e.delete(r)&&i.push(r):e.set(r,t)}}if(this._isConnected){const t=this.element;for(let n=0;n<i.length;++n)i[n].unbind(t)}}onConnectedCallback(){if(this._isConnected)return;const t=this.element;this.needsInitialization?this.finishInitialization():null!==this.view&&this.view.bind(t,mo);const n=this.behaviors;if(null!==n)for(const[e]of n)e.bind(t,mo);this.setIsConnected(!0)}onDisconnectedCallback(){if(!this._isConnected)return;this.setIsConnected(!1);const t=this.view;null!==t&&t.unbind();const n=this.behaviors;if(null!==n){const t=this.element;for(const[e]of n)e.unbind(t)}}onAttributeChangedCallback(t,n,e){const r=this.definition.attributeLookup[t];void 0!==r&&r.onAttributeChangedCallback(this.element,e)}emit(t,n,e){return!!this._isConnected&&this.element.dispatchEvent(new CustomEvent(t,Object.assign(Object.assign({detail:n},hs),e)))}finishInitialization(){const t=this.element,n=this.boundObservables;if(null!==n){const e=Object.keys(n);for(let r=0,i=e.length;r<i;++r){const i=e[r];t[i]=n[i]}this.boundObservables=null}const e=this.definition;null===this._template&&(this.element.resolveTemplate?this._template=this.element.resolveTemplate():e.template&&(this._template=e.template||null)),null!==this._template&&this.renderTemplate(this._template),null===this._styles&&(this.element.resolveStyles?this._styles=this.element.resolveStyles():e.styles&&(this._styles=e.styles||null)),null!==this._styles&&this.addStyles(this._styles),this.needsInitialization=!1}renderTemplate(t){const n=this.element,e=ls(n)||n;null!==this.view?(this.view.dispose(),this.view=null):this.needsInitialization||lo.removeChildNodes(e),t&&(this.view=t.render(n,e,n))}static forCustomElement(t){const n=t.$fastController;if(void 0!==n)return n;const e=as.forType(t.constructor);if(void 0===e)throw new Error("Missing FASTElement definition.");return t.$fastController=new ds(t,e)}}function vs(t){return class extends t{constructor(){super(),ds.forCustomElement(this)}$emit(t,n,e){return this.$fastController.emit(t,n,e)}connectedCallback(){this.$fastController.onConnectedCallback()}disconnectedCallback(){this.$fastController.onDisconnectedCallback()}attributeChangedCallback(t,n,e){this.$fastController.onAttributeChangedCallback(t,n,e)}}}const ps=Object.assign(vs(HTMLElement),{from:t=>vs(t),define:(t,n)=>new as(t,n).define().type});function bs(t){return function(n){new as(n,t).define()}}class ys{createCSS(){return""}createBehavior(){}}var ws=function(t,n,e,r){for(var i,o=arguments.length,s=o<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r,c=t.length-1;c>=0;c--)(i=t[c])&&(s=(o<3?i(s):o>3?i(n,e,s):i(n,e))||s);return o>3&&s&&Object.defineProperty(n,e,s),s};let ms=class extends ps{attributeChangedCallback(t,n,e){super.attributeChangedCallback(t,n,e),n!==e&&this.update()}connectedCallback(){super.connectedCallback(),this.hidden=!0,this.stateHandler&&this.stateHandler(),this.stateHandler=yi.select((t=>t.user?.profile?.id),(()=>this.update())),this.update()}disconnectedCallback(){super.disconnectedCallback(),this.stateHandler()}update(){this.hidden=!1;const t=yi.get()?.user?.authenticated,n=!!yi.get()?.user?.profile?.id;if(this.unknown&&("test"===this.getAttribute("id")&&console.log("hit",t,void 0!==t),void 0!==t))return void(this.hidden=!0);if(this.anon&&(void 0===t||!0===t))return void(this.hidden=!0);if(this.auth&&(void 0===t||!1===t))return void(this.hidden=!0);if(this.identified&&!n)return void(this.hidden=!0);if(this.unidentified&&n)return void(this.hidden=!0);const e=this.require?.trim();if(e){if(!n)return void(this.hidden=!0);const t=e.split(",");if(t?.length&&!wi.service.auth.hasPermissions(t))return void(this.hidden=!0)}const r=this.any?.trim();if(r){if(!n)return void(this.hidden=!0);const t=r.split(",");if(t?.length&&!wi.service.auth.hasAnyPermission(t))return void(this.hidden=!0)}const i=this.not?.trim();if(i){if(!n)return void(this.hidden=!0);const t=i.split(",");if(t?.length&&wi.service.auth.hasAnyPermission(t))return void(this.hidden=!0)}this.hidden=!1}};ws([os({mode:"boolean"})],ms.prototype,"unknown",void 0),ws([os({mode:"boolean"})],ms.prototype,"anon",void 0),ws([os({mode:"boolean"})],ms.prototype,"auth",void 0),ws([os({mode:"boolean"})],ms.prototype,"identified",void 0),ws([os({mode:"boolean"})],ms.prototype,"unidentified",void 0),ws([os],ms.prototype,"require",void 0),ws([os],ms.prototype,"any",void 0),ws([os],ms.prototype,"not",void 0),ms=ws([bs({name:"mo-access",styles:[(function(t,...n){const{styles:e,behaviors:r}=function(t,n){const e=[];let r="";const i=[];for(let o=0,s=t.length-1;o<s;++o){r+=t[o];let s=n[o];if(s instanceof ys){const t=s.createBehavior();s=s.createCSS(),t&&i.push(t)}s instanceof zo||s instanceof CSSStyleSheet?(""!==r.trim()&&(e.push(r),r=""),e.push(s)):r+=s}return r+=t[t.length-1],""!==r.trim()&&e.push(r),{styles:e,behaviors:i}}(t,n),i=zo.create(e);return r.length&&i.withBehaviors(...r),i})`
    :host { 
      transition: opacity 0.25s ease-out;
      opacity: 0;
    }
    :host(:not([hidden])) {
      opacity: 1;
    }
  `],template:Wo`<slot></slot>`})],ms);var gs=function(t,n,e,r){for(var i,o=arguments.length,s=o<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r,c=t.length-1;c>=0;c--)(i=t[c])&&(s=(o<3?i(s):o>3?i(n,e,s):i(n,e))||s);return o>3&&s&&Object.defineProperty(n,e,s),s};let js=class extends ps{connectedCallback(){super.connectedCallback(),wi.element.core?console.warn("Mulitple cores found. Only the first core will be used."):(wi.element.core=this,wi.service.core.init(this.config))}async import(t,n){const e=await wi.service.module.import(t);return n&&await this.exec("import",e.default,n),e}async exec(t,n,e){await wi.service.module.exec(t,n,e)}};gs([os],js.prototype,"config",void 0),js=gs([bs({name:"mo-core"})],js);var Os=function(t,n,e,r){for(var i,o=arguments.length,s=o<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,e):r,c=t.length-1;c>=0;c--)(i=t[c])&&(s=(o<3?i(s):o>3?i(n,e,s):i(n,e))||s);return o>3&&s&&Object.defineProperty(n,e,s),s};let Ss=class extends ps{constructor(){super(...arguments),this.current={module:"",context:""}}connectedCallback(){super.connectedCallback(),wi.element.routerOutlet?console.warn("Mulitple router outlets found. Only the first router outlet will be used."):this.unsubscribe=yi.select((t=>t?.page),(()=>this.render()))}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribe()}async render(){const t=yi.get().page;if(!t?.module)return void this.replaceChildren();const n=yi.get().router?.current,e=await wi.service.module.import(t.module);let r;t?.context&&(r=await wi.service.api.get(t.context)),this.replaceChildren(),wi.service.module.exec(n.routeId,e.default,{parent:this,route:n,config:wi.config.route?.[n.routeId],context:r})}};Ss=Os([bs({name:"mo-router-outlet",template:Wo`<slot></slot>`})],Ss);
